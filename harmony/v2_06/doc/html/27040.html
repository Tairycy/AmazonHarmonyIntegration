<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
<head>
<title>Test Execution Environments</title>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <meta name="generator" content="Doc-O-Matic" />
    <meta name="save" content="history" />
    <meta http-equiv="Content-Style-Type" content="text/css" />
    <link rel="STYLESHEET" href="default.css" type="text/css" />

<script type="text/javascript" src="scripts.js"></script>
</head>
<body class="Element700" onload="onBodyLoad();" onmousedown="onBodyMouseDown();">
<div id="persistenceDiv" style="display:none; behavior:url(#default#userData);"></div>

<!-- Begin Popups -->

<!-- End Popups -->

<!-- Begin Page Header -->
<div class="Element710" id="areafixed">
<div class="Element94">
<a href="13064.html">Volume IV: MPLAB Harmony Development</a> &gt; <a href="16814.html">MPLAB Harmony Test Harness User's Guide</a> &gt; <a href="27040.html">Test Execution Environments</a></div>
<div class="Element92">
<table width="100%" cellspacing="0" cellpadding="0">
<tr><td width="25%">
<div class="Element1">
MPLAB Harmony Help</div>
</td><td width="25%">
<div class="Element2">
<a href="contents.htm">Contents</a> | <a href="idx.html">Index</a> | <a href="04300.html">Home</a></div>
</td><td width="25%">
<div class="Element90">
<a href="27041.html">Previous</a> | <a href="16814.html">Up</a> | <a href="27035.html">Next</a></div>
</td><td width="25%">
<div class="Element96">
<a href="mailto:docerrors@microchip.com&subject=MPLAB Harmony Documentation Feedback (Topic ID: TEST_HARNESS_UG Test Execution Environments Topic Title: Test Execution Environments)&body=Thank you for your feedback! Please include a description of your feedback, and indicate whether you are reporting an an error in the documentation or an enhancement.">Documentation Feedback</a><br> <a href="http://support.microchip.com">Microchip Support</a></div>
</td></tr></table><div class="Element5">
Test Execution Environments</div>
</div>
</div>

<!-- End Page Header -->

<!-- Begin Client Area -->
<div class="Element720" id="areascroll">
<div class="Element721">

<!-- Begin Page Content -->
<div class="Element58">
<a name="4465736372697074696F6E"></a><div class="Element11">
<div class="Element10">
<p class="Element10">
The Test Harness sits between the test and the normal MPLAB Harmony &quot;main&quot; function. In all configurations, the Test Harness controls initialization of the test application and the Library Under Test (LUT), as shown in the following diagram. </p><p class="Element10" style="text-align: center;">
<strong>Initialization</strong>&nbsp;</p>
<p class="Element10" style="text-align: center;">
<img src="HARNESS_Initialization.png" border="0" alt="" title="">&nbsp;</p><p class="Element10">
After initialization, the test harness state machine manages the execution of the test and the LUT. However, the test and LUT each execute within their own potentially different tasks environments, as described in the following sections. </p><p class="Element10" style="text-align: center;">
<strong>Bare-Metal Polled Tests</strong>&nbsp;</p>
<p class="Element10" style="text-align: center;">
<img src="HARNESS Bare-Metal Polled Tests.png" border="0" alt="" title=""></p><p class="Element10">
In a bare-metal polled configuration, all of the state machine tasks functions execute in the context of the main system loop. This includes the tasks function for the test harness, the test, and the LUT. However, the test and library tasks are only executed when the test harness state machine permits so that the harness can track and control them. </p><p class="Element10" style="text-align: center;">
<strong>Bare-Metal Interrupt-Driven</strong>&nbsp;</p>
<p class="Element10" style="text-align: center;">
<img src="HARNESS Bare-Metal Interrupt-Driven.png" border="0" alt="" title=""></p><p class="Element10">
In an interrupt-driven test configuration in a bare-metal environment (with no OS), one or more of the tasks functions for the library under test may run within the context of an Interrupt Service Routine (ISR) that is defined for that peripheral module, depending on what is appropriate for the LUT. These ISR-ready Tasks functions are still called indirectly through the test harness so that it can capture spurious interrupts and manage the execution of the test and LUT. </p><p class="Element10" style="text-align: center;">
<strong>RTOS-Based Polled</strong>&nbsp;</p>
<p class="Element10" style="text-align: center;">
<img src="HARNESS RTOS-Based Polled.png" border="0" alt="" title=""></p><p class="Element10">
In an RTOS-based polled configuration, the Tasks functions for the test harness, the test, and the LUT are each called from its own RTOS thread loop. This supports testing of the OSAL mechanisms used to protect the shared resources used by the library when different clients call it from different thread contexts while it is running in its own thread context. </p><p class="Element10" style="text-align: center;">
<strong>RTOS-Based Interrupt-Driven</strong>&nbsp;</p>
<p class="Element10" style="text-align: center;">
<img src="HARNESS RTOS-Based Interrupt-Driven.png" border="0" alt="" title=""></p><p class="Element10">
In an interrupt-driven test configuration in an RTOS-based environment, one or more of the tasks functions for the library under test may run within the context of an Interrupt Service Routine (ISR) that is defined for that peripheral module, depending on what is appropriate for the LUT. As before (in the bare-metal, interrupt-driven environment), these ISR-ready Tasks functions are called indirectly through the test harness so that it can capture spurious interrupts and manage the execution of the test and LUT. But, in an RTOS environment, the test and the test harness Tasks functions are called from their own RTOS thread loops. Also, there may be RTOS-specific restrictions or requirements on the ISRs themselves.</p></div>
</div>
</div>
<!-- End Page Content -->

<!-- Begin Page Footer -->
<div class="Element95">
<a href="13064.html">Volume IV: MPLAB Harmony Development</a> &gt; <a href="16814.html">MPLAB Harmony Test Harness User's Guide</a> &gt; <a href="27040.html">Test Execution Environments</a></div>
<div class="Element93">
<table width="100%" cellspacing="0" cellpadding="0">
<tr><td width="100%">
<div class="Element3">
 MPLAB Harmony Help</div>
</td></tr><tr><td width="100%">
<div class="Element4">
<a href="contents.htm">Contents</a> | <a href="idx.html">Index</a> | <a href="04300.html">Home</a></div>
</td></tr><tr><td width="100%">
<div class="Element97">
<a href="mailto:docerrors@microchip.com&subject=MPLAB Harmony Documentation Feedback (Topic ID: TEST_HARNESS_UG Test Execution Environments Topic Title: Test Execution Environments)&body=Thank you for your feedback! Please include a description of your feedback, and indicate whether you are reporting an an error in the documentation or an enhancement.">Documentation Feedback</a><br> <a href="http://support.microchip.com">Microchip Support</a></div>
</td></tr></table></div>

<!-- End Page Footer -->
</div>
</div>

<!-- End Client Area -->
</body></html>