<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
<head>
<title>Hardware Abstraction Model</title>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <meta name="generator" content="Doc-O-Matic" />
    <meta name="save" content="history" />
    <meta http-equiv="Content-Style-Type" content="text/css" />
    <link rel="STYLESHEET" href="default.css" type="text/css" />

<script type="text/javascript" src="scripts.js"></script>
</head>
<body class="Element700" onload="onBodyLoad();" onmousedown="onBodyMouseDown();">
<div id="persistenceDiv" style="display:none; behavior:url(#default#userData);"></div>

<!-- Begin Popups -->

<!-- End Popups -->

<!-- Begin Page Header -->
<div class="Element710" id="areafixed">
<div class="Element94">
<a href="16811.html">Volume V: MPLAB Harmony Framework Reference</a> &gt; <a href="17367.html">Peripheral Libraries Help</a> &gt; <a href="23143.html">SPI Peripheral Library</a> &gt; <a href="18024.html">Using the Library</a> &gt; <a href="18001.html">Hardware Abstraction Model</a></div>
<div class="Element92">
<table width="100%" cellspacing="0" cellpadding="0">
<tr><td width="25%">
<div class="Element1">
MPLAB Harmony Help</div>
</td><td width="25%">
<div class="Element2">
<a href="contents.htm">Contents</a> | <a href="idx.html">Index</a> | <a href="04300.html">Home</a></div>
</td><td width="25%">
<div class="Element90">
<a href="18024.html">Previous</a> | <a href="18024.html">Up</a> | <a href="18005.html">Next</a></div>
</td><td width="25%">
<div class="Element96">
<a href="mailto:docerrors@microchip.com&subject=MPLAB Harmony Documentation Feedback (Topic ID: PLIB SPI Hardware Abstraction Model Topic Title: Hardware Abstraction Model)&body=Thank you for your feedback! Please include a description of your feedback, and indicate whether you are reporting an an error in the documentation or an enhancement.">Documentation Feedback</a><br> <a href="http://support.microchip.com">Microchip Support</a></div>
</td></tr></table><div class="Element5">
Hardware Abstraction Model</div>
</div>
</div>

<!-- End Page Header -->

<!-- Begin Client Area -->
<div class="Element720" id="areascroll">
<div class="Element721">

<!-- Begin Page Content -->
<div class="Element58">
<a name="4465736372697074696F6E"></a><div class="Element11">
<div class="Element10">
<p class="Element10">
The SPI Peripheral Library provides interface routines to interact with the blocks shown in the following diagram. </p><p class="Element10" style="text-align: center;">
<strong>Hardware Abstraction Model</strong>&nbsp;</p>
<p class="Element10" style="text-align: center;">
<img src="SPIHardwareBlock.png" border="0" alt="" title=""></p><p class="Element10">
The Serial Peripheral Interface (API) module is a synchronous serial interface useful for communicating with external peripherals and other microcontroller devices.&nbsp;</p>
<p class="Element10">
The SPI bus specifies four logic signals:
<ul class="Element630">
<li class="Element600"> SCLK: serial clock (output from master)</li>
<li class="Element600"> MOSI: master output, slave input (output from master)</li>
<li class="Element600"> MISO: master input, slave output (output from slave)</li>
<li class="Element600"> /SS: slave select (active low, output from master); on certain devices, this pin is implemented using general purpose I/O (GPIO)</li>
</ul>The SPI bus can operate with a single master device and with one or more slave devices. To begin a communication, the master first configures the clock, using a frequency less than or equal to the maximum frequency the slave device supports. In addition to setting the clock frequency, the master must also configure the clock polarity and phase with respect to the data.&nbsp;</p>
<p class="Element10">
The master then transmits the appropriate chip select bit for the desired chip to a logic '0'. A logic '0' is transmitted because the Chip Select line (/SS) is active low, meaning its off state is a logic '1'; the on state is asserted with a logic 0. The master issues the clock cycles.&nbsp;</p>
<p class="Element10">
During each SPI clock cycle, a full duplex data transmission occurs:
<ul class="Element630">
<li class="Element600">The master sends a bit on the MOSI line; the slave reads it from that same line</li>
<li class="Element600">The slave sends a bit on the MISO line; the master reads it from that same line</li>
</ul>Transmissions may involve any number of clock cycles. When there are no more data to be transmitted, the master stops toggling its clock. Normally, it then deselects the slave.&nbsp;</p>
<p class="Element10">
The <strong>Baud Rate Generator/Prescaler </strong>controls the timing, the desired baud rate can be programmed in the baud rate controller.&nbsp;</p>
<p class="Element10">
In the Master mode, the<strong> clock</strong> becomes the serial clock and is provided to external devices via the SCK pin (the clock can be prescaled by the primary prescaler and the secondary prescaler if device supports).&nbsp;</p>
<p class="Element10">
The<strong> Buffers</strong> are for data transmitted or received by the SPI module over the MISO and MOSI line synchronized with the SCK line by the clock control logic.&nbsp;</p>
<p class="Element10">
The<strong> Status and Control logic</strong>, provide the capability to control different ways of enabling or disabling the master and slave. It also can provides status about the transmitter and receiver.&nbsp;</p>
<p class="Element10">
Active-Low <strong>Slave Select</strong> or Frame Synchronization I/O Pulse allows for a Synchronous Slave mode.&nbsp;</p>
<p class="Element10">
The SPI module supports the following four SPI modes.
<ul class="Element630">
<li class="Element600"><strong>Standard Mode: </strong>In this mode<strong> </strong>of operation, data can be thought of as taking a direct path between the Most Significant bit (MSb) of one moduleâ€™s shift register and the Least Significant bit (LSb) of the other, and then into the appropriate Transmit or Receive Buffer. The master provides the serial clock and synchronization signals required to the slave device.</li>
<li class="Element600"><strong>Enhanced Buffer Mode:</strong> The operation of<strong> </strong>this<strong> </strong>mode is very similar to that of Standard mode. The difference is that data can be thought of as moving from the Shift register to a receive FIFO buffer and moving from the transmit FIFO buffer to the Shift register.</li>
<li class="Element600"><strong>Framed Mode:</strong> In<strong> </strong>this mode of operation, the Frame Master controls the generation of the frame synchronization pulse and provides this pulse to other devices at the Slave Select (/SS) pin. The SPI clock is generated by the SPI Master and is continuously running. The SPI slave module uses a frame synchronization pulse received at the SS pin.</li>
<li class="Element600"><strong>Audio Protocol Mode:</strong> The SPI module provides support to the audio protocol modes; with this mode, the SPI module can be interfaced to most codec devices available today to provide PIC microcontroller-based audio solution</li>
</ul></p><div class="Element63">
<div class="TableDiv">
<table cellspacing="0" class="Table0">
<tr>
<td class="Element67" valign="top" width="10%" style="border:none;">
<div class="Element68">
<img src="Note Icon.png" border="0" alt="" title=""> <strong>Note:</strong>&nbsp;</div></td><td class="Element67" valign="top" width="90%" style="border:none;">
<div class="Element68">
Not all features are available on all devices. Refer to the <strong>&quot;Serial Peripheral Interface (SPI)&quot;</strong> chapter in the specific device data sheet for availability.&nbsp;</div></td></tr></table></div></div>
</div>
</div>
</div>
<!-- End Page Content -->

<!-- Begin Page Footer -->
<div class="Element95">
<a href="16811.html">Volume V: MPLAB Harmony Framework Reference</a> &gt; <a href="17367.html">Peripheral Libraries Help</a> &gt; <a href="23143.html">SPI Peripheral Library</a> &gt; <a href="18024.html">Using the Library</a> &gt; <a href="18001.html">Hardware Abstraction Model</a></div>
<div class="Element93">
<table width="100%" cellspacing="0" cellpadding="0">
<tr><td width="100%">
<div class="Element3">
 MPLAB Harmony Help</div>
</td></tr><tr><td width="100%">
<div class="Element4">
<a href="contents.htm">Contents</a> | <a href="idx.html">Index</a> | <a href="04300.html">Home</a></div>
</td></tr><tr><td width="100%">
<div class="Element97">
<a href="mailto:docerrors@microchip.com&subject=MPLAB Harmony Documentation Feedback (Topic ID: PLIB SPI Hardware Abstraction Model Topic Title: Hardware Abstraction Model)&body=Thank you for your feedback! Please include a description of your feedback, and indicate whether you are reporting an an error in the documentation or an enhancement.">Documentation Feedback</a><br> <a href="http://support.microchip.com">Microchip Support</a></div>
</td></tr></table></div>

<!-- End Page Footer -->
</div>
</div>

<!-- End Client Area -->
</body></html>