<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
<head>
<title>Operating as a Slave</title>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <meta name="generator" content="Doc-O-Matic" />
    <meta name="save" content="history" />
    <meta http-equiv="Content-Style-Type" content="text/css" />
    <link rel="STYLESHEET" href="default.css" type="text/css" />

<script type="text/javascript" src="scripts.js"></script>
</head>
<body class="Element700" onload="onBodyLoad();" onmousedown="onBodyMouseDown();">
<div id="persistenceDiv" style="display:none; behavior:url(#default#userData);"></div>

<!-- Begin Popups -->

<!-- End Popups -->

<!-- Begin Page Header -->
<div class="Element710" id="areafixed">
<div class="Element94">
<a href="16811.html">Volume V: MPLAB Harmony Framework Reference</a> &gt; <a href="17367.html">Peripheral Libraries Help</a> &gt; <a href="21490.html">PMP Peripheral Library</a> &gt; <a href="17902.html">Using the Library</a> &gt; <a href="17891.html">How the Library Works</a> &gt; <a href="17897.html">Operating as a Slave</a></div>
<div class="Element92">
<table width="100%" cellspacing="0" cellpadding="0">
<tr><td width="25%">
<div class="Element1">
MPLAB Harmony Help</div>
</td><td width="25%">
<div class="Element2">
<a href="contents.htm">Contents</a> | <a href="idx.html">Index</a> | <a href="04300.html">Home</a></div>
</td><td width="25%">
<div class="Element90">
<a href="17896.html">Previous</a> | <a href="17891.html">Up</a> | <a href="17901.html">Next</a></div>
</td><td width="25%">
<div class="Element96">
<a href="mailto:docerrors@microchip.com&subject=MPLAB Harmony Documentation Feedback (Topic ID: PLIB PMP Operating as a Slave Topic Title: Operating as a Slave)&body=Thank you for your feedback! Please include a description of your feedback, and indicate whether you are reporting an an error in the documentation or an enhancement.">Documentation Feedback</a><br> <a href="http://support.microchip.com">Microchip Support</a></div>
</td></tr></table><div class="Element5">
Operating as a Slave</div>
</div>
</div>

<!-- End Page Header -->

<!-- Begin Client Area -->
<div class="Element720" id="areascroll">
<div class="Element721">

<!-- Begin Page Content -->
<div class="Element58">
<a name="4465736372697074696F6E"></a><div class="Element11">
<div class="Element10">
<p class="Element10">
The PMP module while acting as a slave, waits for read or write strobes to occur. Once the buffers have been manipulated, the appropriate action takes place.&nbsp;</p>
<p class="Element10">
<strong>Summary of Steps</strong>
<ul class="Element630">
<li class="Element600">Check to see if data is available to be read</li>
<li class="Element600">Prepare output buffer for slave read</li>
</ul>Each of these steps making up a transfer will take some time to complete. By monitoring the busy bit of the PMP module, the user application can determine whether the transfer is complete. The completion of each step can cause a PMP interrupt.&nbsp;</p><div class="Element15">
Reading Available Data</div>
<p class="Element10">
The following sequence can be used to receive a data byte and repeated to receive an arbitrary number of data bytes.&nbsp;</p>
<p class="Element10">
<strong>Preconditions:</strong>
<ul class="Element630">
<li class="Element600">The address of the destination must be set in the PMP module</li>
<li class="Element600">The proper control signals are initialized for PMP operation</li>
</ul><strong>Process:</strong>
<ol class="Element630">
<li value="1" class="Element600">Check to see if data is available using <a href="20274.html">PLIB_PMP_InputBufferXIsFull</a>.</li>
<li value="2" class="Element600">Read the available data using <a href="20273.html">PLIB_PMP_InputBufferXByteReceive</a>.</li>
</ol><strong>Example:</strong> &nbsp;</p><div class="Element170">
<a href="#" onclick="CopyElementToClipboard('code02919');">Copy Code</a></div>
<div class="Element13"><div class="Element12" id="code02919"><pre class="Element12">uint8_t data;
<i><span style="color: #008000">// Check to see if data is available, and then receive the byte</span></i>
<strong><span style="color: #000080">if</span></strong>(PLIB_PMP_InputBufferXIsFull( PMP_ID_0, 1))
  {
    <i><span style="color: #008000">// Receive the data from buffer one.</span></i>
    data = PLIB_PMP_InputBufferXByteReceive( PMP_ID_0, 1 );
  }</pre></div></div>
<div class="Element15">
Preparing Output Buffer for Slave Write</div>
<p class="Element10">
The following sequence can be used to send a data byte and repeated to send an arbitrary number of data bytes.&nbsp;</p>
<p class="Element10">
<strong>Preconditions:</strong>&nbsp;</p>
<p class="Element10">
The proper control signals are initialized for PMP operation.&nbsp;</p>
<p class="Element10">
<strong>Process:</strong>
<ol class="Element630">
<li value="1" class="Element600">Ensure that the output buffer to be written is empty by using <a href="20290.html">PLIB_PMP_OutputBufferXIsEmpty</a>.</li>
<li value="2" class="Element600">Write the output data buffer using <a href="20289.html">PLIB_PMP_OutputBufferXByteSend</a>.</li>
</ol><strong>Example:</strong> &nbsp;</p><div class="Element170">
<a href="#" onclick="CopyElementToClipboard('code02920');">Copy Code</a></div>
<div class="Element13"><div class="Element12" id="code02920"><pre class="Element12"> uint8_t data;
<i><span style="color: #008000">// Check to see if output buffer is available, and then send the byte</span></i>
<strong><span style="color: #000080">if</span></strong>(PLIB_PMP_OutputBufferXIsEmpty( PMP_ID_0, 1))
  {
    <i><span style="color: #008000">// Fill the output buffer-1 with the data to be sent</span></i>
    PLIB_PMP_OutputBufferXByteSend( PMP_ID_0, 1, value);
  }</pre></div></div>
</div>
</div>
</div>
<!-- End Page Content -->

<!-- Begin Page Footer -->
<div class="Element95">
<a href="16811.html">Volume V: MPLAB Harmony Framework Reference</a> &gt; <a href="17367.html">Peripheral Libraries Help</a> &gt; <a href="21490.html">PMP Peripheral Library</a> &gt; <a href="17902.html">Using the Library</a> &gt; <a href="17891.html">How the Library Works</a> &gt; <a href="17897.html">Operating as a Slave</a></div>
<div class="Element93">
<table width="100%" cellspacing="0" cellpadding="0">
<tr><td width="100%">
<div class="Element3">
 MPLAB Harmony Help</div>
</td></tr><tr><td width="100%">
<div class="Element4">
<a href="contents.htm">Contents</a> | <a href="idx.html">Index</a> | <a href="04300.html">Home</a></div>
</td></tr><tr><td width="100%">
<div class="Element97">
<a href="mailto:docerrors@microchip.com&subject=MPLAB Harmony Documentation Feedback (Topic ID: PLIB PMP Operating as a Slave Topic Title: Operating as a Slave)&body=Thank you for your feedback! Please include a description of your feedback, and indicate whether you are reporting an an error in the documentation or an enhancement.">Documentation Feedback</a><br> <a href="http://support.microchip.com">Microchip Support</a></div>
</td></tr></table></div>

<!-- End Page Footer -->
</div>
</div>

<!-- End Client Area -->
</body></html>