<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
<head>
<title>aria_coffee_maker</title>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <meta name="generator" content="Doc-O-Matic" />
    <meta name="save" content="history" />
    <meta http-equiv="Content-Style-Type" content="text/css" />
    <link rel="STYLESHEET" href="default.css" type="text/css" />

<script type="text/javascript" src="scripts.js"></script>
</head>
<body class="Element700" onload="onBodyLoad();" onmousedown="onBodyMouseDown();">
<div id="persistenceDiv" style="display:none; behavior:url(#default#userData);"></div>

<!-- Begin Popups -->

<!-- End Popups -->

<!-- Begin Page Header -->
<div class="Element710" id="areafixed">
<div class="Element94">
<a href="04300.html">Volume I: Getting Started With MPLAB Harmony Libraries and Applications</a> &gt; <a href="03342.html">Applications Help</a> &gt; <a href="13038.html">Graphics Demonstrations</a> &gt; <a href="03738.html">Demonstrations</a> &gt; <a href="03674.html">aria_coffee_maker</a></div>
<div class="Element92">
<table width="100%" cellspacing="0" cellpadding="0">
<tr><td width="25%">
<div class="Element1">
MPLAB Harmony Help</div>
</td><td width="25%">
<div class="Element2">
<a href="contents.htm">Contents</a> | <a href="idx.html">Index</a> | <a href="04300.html">Home</a></div>
</td><td width="25%">
<div class="Element90">
<a href="03673.html">Previous</a> | <a href="03738.html">Up</a> | <a href="03675.html">Next</a></div>
</td><td width="25%">
<div class="Element96">
<a href="mailto:docerrors@microchip.com&subject=MPLAB Harmony Documentation Feedback (Topic ID: APPS GFX aria_coffee_maker Topic Title: aria_coffee_maker)&body=Thank you for your feedback! Please include a description of your feedback, and indicate whether you are reporting an an error in the documentation or an enhancement.">Documentation Feedback</a><br> <a href="http://support.microchip.com">Microchip Support</a></div>
</td></tr></table><div class="Element5">
aria_coffee_maker</div>
</div>
</div>

<!-- End Page Header -->

<!-- Begin Client Area -->
<div class="Element720" id="areascroll">
<div class="Element721">

<!-- Begin Page Content -->
<div class="Element58">
<a name="4465736372697074696F6E"></a><div class="Element11">
<div class="Element10">
<p class="Element10">
This application showcases an example of how a graphics controller with multiple graphical layer support can be achieved using the <a href="12771.html">Aria User Interface Library</a>. The demonstration also highlights how tightly integrated the <a href="07412.html">MPLAB Harmony Graphics Composer Suite</a> can be in supporting a rich feature set in an application.&nbsp;</p>
<p class="Element10">
Various Aria Graphics Library features such as turning on/off the GPU at run-time, adjusting the GLCD’s per-layer alpha-blending, cycling through multi-language localization support is embedded within the demo disguised as a user-interface for a coffee maker appliance.&nbsp;</p>
<p class="Element10">
The demonstration launches with a splash screen highlighting basic motion capability supported by Aria Graphics Library. When running the application, the user can interface with it via capacitive single-fingered touch and swiping gestures.&nbsp;</p>
<p class="Element10">
Images used with the demonstration are preprocessed in the DDR at start. The purpose of the preprocessing is to highlight the GPU's block transfer capability. The text in the information screen is also handled as a preprocessed image to leverage this same capability.&nbsp;</p>
<p class="Element10">
As a showcase application, it also features ‘demo mode’, where it autonomously runs the demonstrations after a specified period of idle time.</p><div class="Element15">
Architecture</div>
<p class="Element10">
The following diagrams show the various software and hardware components for each MPLAB X IDE project configuration.&nbsp;</p>
<p class="Element10">
<strong>pic32mz_da_sk_extddr_meb2, and pic32mz_da_sk_extddr_meb2_wvga</strong>&nbsp;</p>
<p class="Element10">
For these configurations, the application uses the Graphics library to render graphics to the display. The Graphics library passes draw commands into the GPU Library, which then draws the widgets and images to the three individual write frame buffers (one for each layer) that are stored on the external DDR2 Memory. The Graphics library Draw commands going into the GPU Library can be dynamically enabled/disabled at run-time and redirected to the write frame buffer directly. The intent is to contrast draw performance of one versus the other. Via the DDR2 Memory Controller, the GLCD display controller peripheral continuously transfers frame data from the all three read buffers onto to the LCD display. The write and read frame buffer pairs are swapped independently as required when the Graphics Library is done rendering to the write frame buffer and GLCD driver signals the GLCD peripheral to change its read location.&nbsp;</p>
<p class="Element10">
The application also features user touch input through the integrated touch screen on the display panel. Touch input from the touch controller goes thru the I2C port, and the Input System Service acquires the touch input information from the touch and I2C drivers. The Input System Service sends touch events to the Graphics library which processes these events and updates the frame data accordingly.&nbsp;</p>
<p class="Element10">
The application also uses the Timer System Service and driver to send timer events for Demo Mode.&nbsp;</p>
<p class="Element10">
The core timer is used by the application and the Graphics library to manage the movement of the splash screen and the momentum decay of the list wheel tumbler. </p><p class="Element10" style="text-align: center;">
<img src="APPS GFX aria_coffee_maker pic32mz_da_sk_extddr_meb2 and pic32mz_da_sk_extddr_meb2_wvga Double Buffered, with GPU, 3 Layers, Double Buffered.png" border="0" alt="" title=""></p><p class="Element10">
&nbsp;</p>
<p class="Element10">
<strong>pic32mz_da_sk_intddr_meb2, and pic32mz_da_sk_intddr_meb2_wvga</strong>&nbsp;</p>
<p class="Element10">
For these configurations, the application uses the Graphics library to render graphics to the display. The Graphics library passes draw commands into the GPU Library, which in-turn draws the widgets and images to the three individual write frame buffers (one for each layer) that are stored on the internal DDR2 memory. The Graphics Library Draw commands going into the GPU Library can be dynamically enabled or disabled at run-time and redirected to the write frame buffer directly. The intent is to contrast draw performance of one or the other. Via the DDR2 Memory Controller, the GLCD display controller peripheral continuously transfers frame data from the all three read buffers onto to the LCD display. The write and read frame buffer pairs are swapped independently as required when the Graphics Library is done rendering to the write frame buffer and GLCD driver signals the GLCD peripheral to change its read location.&nbsp;</p>
<p class="Element10">
The application also features user touch input through the integrated touch screen on the display panel. Touch input from the touch controller goes thru the I2C port, and the Input System Service acquires the touch input information from the touch and I2C drivers. The Input System Service sends touch events to the Graphics library which processes these events and updates the frame data accordingly.&nbsp;</p>
<p class="Element10">
The application also uses the Timer System Service and driver to send timer events for Demo Mode.&nbsp;</p>
<p class="Element10">
The core timer is used by the application and the Graphics library to manage the movement of the splash screen and the momentum decay of the list wheel tumbler. </p><p class="Element10" style="text-align: center;">
<img src="APPS GFX aria_coffee_maker pic32mz_da_sk_intddr_meb2 and pic32mz_da_sk_intddr_meb2_wvga, with GPU, 3 Layers, Double Buffered.png" border="0" alt="" title="">&nbsp;</p>
<p class="Element10" style="text-align: center;">
&nbsp;</p>
<p class="Element10" style="text-align: center;">
&nbsp;</p><p class="Element10">
<strong>pic32mz_da_sk_intddr_meb2_freertos</strong>&nbsp;</p>
<p class="Element10">
This configuration runs in a run-time operating system (FreeRTOS) environment. The tasks are managed and scheduled for execution by the FreeRTOS Task Scheduler. The Aria User Interface Library runs as a high priority, blocking task that waits for events from other tasks like the Application or the Input System Service. When an event is received, say a touch event from the Input System Service, the Aria User Interface Library unblocks and processes this event. If an event requires that the screen be updated, the graphics library uses the GPU to draw to the layer frame buffers in internal DDR. The contents of the frame buffers are continuously delivered to the display panel using the Graphics LCD (GLCD) controller. </p><p class="Element10" style="text-align: center;">
<img src="APPS GFX aria_coffee_maker pic32mz_da_sk_intddr_meb2_freertos, 3 layers, double buffered.png" border="0" alt="" title="">&nbsp;</p>
<p class="Element10" style="text-align: center;">
&nbsp;</p>
<p class="Element10" style="text-align: center;">
&nbsp;</p><p class="Element10">
<strong>pic32mz_da_sk_extddr_meb2_freertos</strong>&nbsp;</p>
<p class="Element10">
This configuration runs in a run-time operating (FreeRTOS) environment, the pic32mz_da_sk_intddr_meb2_freertos configuration. The main difference in this configuration is the frame buffers are stored in external DDR. </p><p class="Element10" style="text-align: center;">
<img src="APPS GFX aria_coffee_maker pic32mz_da_sk_extddr_meb2_freertos, 3 layers, double buffered.png" border="0" alt="" title="">&nbsp;</p>
<p class="Element10" style="text-align: center;">
&nbsp;</p>
<p class="Element10" style="text-align: center;">
&nbsp;</p><div class="Element15">
Demonstration Features</div>

<ul class="Element630">
<li class="Element600">Integrated PCAP Touch Input</li>
<li class="Element600">Three graphics layer supported via the GLCD peripheral on the PIC32MZ DA device</li>
<li class="Element600">GPU peripheral supported, can be enabled/disabled at run-time</li>
<li class="Element600">Support of RTOS by the entire Graphics Stack</li>
<li class="Element600">32-bit RGBA8888 color depth support (16.7 million unique colors) (see <a href="16661.html">Options</a>)</li>
<li class="Element600">Per-layer runtime adjustable global alpha-blending</li>
<li class="Element600">Per-layer frame double-buffering</li>
<li class="Element600">Language localization in English, French, German, and Italian (see <a href="16673.html">Widget Tool Box Panel</a>)</li>
<li class="Element600">Image compression techniques using Run-Length Encoding and JPEG (see <a href="22359.html">Enabling Demo Mode in a MPLAB Harmony Graphics Application</a>)</li>
<li class="Element600">Run-time JPEG decoding</li>
<li class="Element600">UTF-16 character font support (see <a href="16634.html">Font Assets</a>)</li>
<li class="Element600">Software-based single-touched gestured movement detection</li>
<li class="Element600">Run-time graphic widget motion</li>
<li class="Element600">Button and List Wheel Widgets</li>
<li class="Element600">Trigger external event via button press (see <a href="16644.html">Event Manager</a>)</li>
<li class="Element600">Time-delayed self-demonstration mode (see <a href="22359.html">Enabling Demo Mode in a MPLAB Harmony Graphics Application</a>)</li>
</ul><div class="Element15">
Tools Setup Differences</div>

<ul class="Element630">
<li class="Element600">“Use Graphics Stack” is selected in MHC. This enables the graphics and touch libraries and drivers for the BSP.</li>
<li class="Element600">In the Clock Diagram, the Memory PLL is configured to output at 220 MHz (MPLLIDV = 1, MPLLMULT = 55, MPLLODIV1 = 6, MPLLODIV2 = 1)</li>
<li class="Element600">Graphics Processor NANO 2D has been enabled</li>
<li class="Element600">Demo Mode has been enabled, records up to 1000 input events, the idle timeout is set to 60 seconds</li>
</ul><p class="Element10">
There are custom code blocks identified by <span class="Element146">// CUSTOM CODE – DO NOT DELETE … // END OF CUSTOM CODE</span> comments that represent modifications to the code outside of MHC. These code blocks are necessary for correct operation of the demonstration under these configurations. </p><div class="Element63">
<div class="TableDiv">
<table cellspacing="0" class="Table0">
<tr>
<td class="Element67" valign="top" width="10%" style="border:none;">
<div class="Element68">
<img src="Important Star.png" border="0" alt="" title=""><br><strong>Important!</strong>&nbsp;</div></td><td class="Element67" valign="top" width="90%" style="border:none;">
<div class="Element68">
When regenerating the project from within MHC use the &quot;Prompt Merge For All Differences&quot; merging strategy and do not change these custom code blocks.&nbsp;</div></td></tr></table></div></div>
</div>
</div>
<a name="546F70696373"></a><div class="Element14">
Topics</div>
<div class="Element11">
<div class="Element10">
<div class="Element212">
<div class="TableDiv">
<table cellspacing="0" class="Table1">
<tr>
<td class="Element200" valign="top" width="35%">
<div class="Element201">
Name&nbsp;</div></td><td class="Element204" valign="top" width="65%">
<div class="Element205">
Description&nbsp;</div></td></tr><tr>
<td class="Element202" valign="top" width="35%">
<div class="Element203">
<a href="03675.html">Building the Application</a>&nbsp;</div></td><td class="Element206" valign="top" width="65%">
<div class="Element207">
This section identifies the MPLAB X IDE project name and location and lists and describes the available configurations for the Aria Coffee Maker demonstration.&nbsp;</div></td></tr><tr>
<td class="Element202" valign="top" width="35%">
<div class="Element203">
<a href="03676.html">Configuring the Hardware</a>&nbsp;</div></td><td class="Element206" valign="top" width="65%">
<div class="Element207">
This section describes how to configure the supported hardware.&nbsp;</div></td></tr><tr>
<td class="Element202" valign="top" width="35%">
<div class="Element203">
<a href="03677.html">Running the Demonstration</a>&nbsp;</div></td><td class="Element206" valign="top" width="65%">
<div class="Element207">
This section provides a brief description of what to expect once the demonstration is running.&nbsp;</div></td></tr></table></div></div>
</div>
</div>
</div>
<!-- End Page Content -->

<!-- Begin Page Footer -->
<div class="Element95">
<a href="04300.html">Volume I: Getting Started With MPLAB Harmony Libraries and Applications</a> &gt; <a href="03342.html">Applications Help</a> &gt; <a href="13038.html">Graphics Demonstrations</a> &gt; <a href="03738.html">Demonstrations</a> &gt; <a href="03674.html">aria_coffee_maker</a></div>
<div class="Element93">
<table width="100%" cellspacing="0" cellpadding="0">
<tr><td width="100%">
<div class="Element3">
 MPLAB Harmony Help</div>
</td></tr><tr><td width="100%">
<div class="Element4">
<a href="contents.htm">Contents</a> | <a href="idx.html">Index</a> | <a href="04300.html">Home</a></div>
</td></tr><tr><td width="100%">
<div class="Element97">
<a href="mailto:docerrors@microchip.com&subject=MPLAB Harmony Documentation Feedback (Topic ID: APPS GFX aria_coffee_maker Topic Title: aria_coffee_maker)&body=Thank you for your feedback! Please include a description of your feedback, and indicate whether you are reporting an an error in the documentation or an enhancement.">Documentation Feedback</a><br> <a href="http://support.microchip.com">Microchip Support</a></div>
</td></tr></table></div>

<!-- End Page Footer -->
</div>
</div>

<!-- End Client Area -->
</body></html>