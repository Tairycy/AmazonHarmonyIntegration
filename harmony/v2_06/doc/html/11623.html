<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
<head>
<title>DRV_USBHS_DEVICE_EndpointEnable Function</title>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <meta name="generator" content="Doc-O-Matic" />
    <meta name="save" content="history" />
    <meta http-equiv="Content-Style-Type" content="text/css" />
    <link rel="STYLESHEET" href="default.css" type="text/css" />

<script type="text/javascript" src="scripts.js"></script>
</head>
<body class="Element700" onload="onBodyLoad();" onmousedown="onBodyMouseDown();">
<div id="persistenceDiv" style="display:none; behavior:url(#default#userData);"></div>

<!-- Begin Popups -->

<!-- End Popups -->

<!-- Begin Page Header -->
<div class="Element710" id="areafixed">
<div class="Element94">
<a href="16811.html">Volume V: MPLAB Harmony Framework Reference</a> &gt; <a href="13069.html">Driver Libraries Help</a> &gt; <a href="28590.html">USB Driver Libraries</a> &gt; <a href="08950.html">PIC32MZ USB Driver</a> &gt; <a href="08946.html">Library Interface</a> &gt; c) Device Mode Operation Functions &gt; <a href="11623.html">DRV_USBHS_DEVICE_EndpointEnable Function</a></div>
<div class="Element92">
<table width="100%" cellspacing="0" cellpadding="0">
<tr><td width="25%">
<div class="Element1">
MPLAB Harmony Help</div>
</td><td width="25%">
<div class="Element2">
<a href="contents.htm">Contents</a> | <a href="idx.html">Index</a> | <a href="04300.html">Home</a></div>
</td><td width="25%">
<div class="Element90">
<a href="11622.html">Previous</a> | <a href="08946.html">Up</a> | <a href="11624.html">Next</a></div>
</td><td width="25%">
<div class="Element96">
<a href="mailto:docerrors@microchip.com&subject=MPLAB Harmony Documentation Feedback (Topic ID: DRV_USBHS_DEVICE_EndpointEnable@DRV_HANDLE@USB_ENDPOINT@USB_TRANSFER_TYPE@uint16_t Topic Title: DRV_USBHS_DEVICE_EndpointEnable Function)&body=Thank you for your feedback! Please include a description of your feedback, and indicate whether you are reporting an an error in the documentation or an enhancement.">Documentation Feedback</a><br> <a href="http://support.microchip.com">Microchip Support</a></div>
</td></tr></table><div class="Element5">
DRV_USBHS_DEVICE_EndpointEnable Function</div>
</div>
</div>

<!-- End Page Header -->

<!-- Begin Client Area -->
<div class="Element720" id="areascroll">
<div class="Element721">

<!-- Begin Page Content -->
<div class="Element58">
<a name="43"></a><div class="Element99">
C</div>
<div class="Element101"><div class="Element100"><pre class="Element100"><a href="27941.html">USB_ERROR</a> <strong><span style="color: #000000">DRV_USBHS_DEVICE_EndpointEnable</span></strong>(
    <a href="10088.html">DRV_HANDLE</a> <strong><span style="color: #000000">handle</span></strong>, 
    <a href="27934.html">USB_ENDPOINT</a> <strong><span style="color: #000000">endpointAndDirection</span></strong>, 
    USB_TRANSFER_TYPE <strong><span style="color: #000000">transferType</span></strong>, 
    uint16_t <strong><span style="color: #000000">endpointSize</span></strong>
);</pre></div></div>
<a name="4465736372697074696F6E"></a><div class="Element14">
Description</div>
<div class="Element11">
<div class="Element10">
<p class="Element10">
This function enables an endpoint for the specified direction and endpoint size. The function will enable the endpoint for communication in one direction at a time. It must be called twice if the endpoint is required to communicate in both the directions, with the exception of control endpoints. If the endpoint type is a control endpoint, the endpoint is always bidirectional and the function needs to be called only once.&nbsp;</p>
<p class="Element10">
The size of the endpoint must match the wMaxPacketSize reported in the endpoint descriptor for this endpoint. A transfer that is scheduled over this endpoint will be scheduled in wMaxPacketSize transactions. The function does not check if the endpoint is already in use. It is the client's responsibility to make sure that a endpoint is not accidentally reused.</p></div>
</div>
<a name="507265636F6E646974696F6E73"></a><div class="Element14">
Preconditions</div>
<div class="Element11">
<div class="Element10">
<p class="Element10">
The Client handle should be valid.</p></div>
</div>
<a name="506172616D6574657273"></a><div class="Element14">
Parameters</div>
<div class="Element11">
<div class="Element10">
<div class="Element312">
<div class="TableDiv">
<table cellspacing="0" class="Table4">
<tr>
<td class="Element300" valign="top" width="35%">
<div class="Element301">
Parameters&nbsp;</div></td><td class="Element304" valign="top" width="65%">
<div class="Element305">
Description&nbsp;</div></td></tr><tr>
<td class="Element302" valign="top" width="35%">
<div class="Element303">
handle&nbsp;</div></td><td class="Element306" valign="top" width="65%">
<div class="Element307">
Client's driver handle (returned from <a href="11692.html">DRV_USBHS_Open</a> function).<br>&nbsp;</div></td></tr><tr>
<td class="Element302" valign="top" width="35%">
<div class="Element303">
endpointAndDirection&nbsp;</div></td><td class="Element306" valign="top" width="65%">
<div class="Element307">
Specifies the endpoint and direction.<br>&nbsp;</div></td></tr><tr>
<td class="Element302" valign="top" width="35%">
<div class="Element303">
transferType&nbsp;</div></td><td class="Element306" valign="top" width="65%">
<div class="Element307">
Should be USB_TRANSFER_TYPE_CONTROL for control endpoint, USB_TRANSFER_TYPE_BULK for bulk endpoint, USB_TRANSFER_TYPE_INTERRUPT for interrupt endpoint and USB_TRANSFER_TYPE_ISOCHRONOUS for isochronous endpoint.<br>&nbsp;</div></td></tr><tr>
<td class="Element302" valign="top" width="35%">
<div class="Element303">
endpointSize&nbsp;</div></td><td class="Element306" valign="top" width="65%">
<div class="Element307">
Maximum size (in bytes) of the endpoint as reported in the endpoint descriptor.&nbsp;</div></td></tr></table></div></div>
</div>
</div>
<a name="52657475726E73"></a><div class="Element14">
Returns</div>
<div class="Element11">
<div class="Element10">
<p class="Element10">

<ul class="Element636">
<li class="Element606">USB_ERROR_NONE - The endpoint was successfully enabled.</li>
<li class="Element606">USB_ERROR_DEVICE_ENDPOINT_INVALID - If the endpoint that is being accessed is not a valid endpoint defined for this driver instance. The value of <a href="11638.html">DRV_USBHS_ENDPOINTS_NUMBER</a> configuration constant should be adjusted.</li>
<li class="Element606">USB_ERROR_PARAMETER_INVALID - The driver handle is invalid.</li>
</ul></p></div>
</div>
<a name="52656D61726B73"></a><div class="Element14">
Remarks</div>
<div class="Element11">
<div class="Element10">
<p class="Element10">
None.</p></div>
</div>
<a name="4578616D706C65"></a><div class="Element14">
Example</div>
<div class="Element11">
<div class="Element10">
<div class="Element170">
<a href="#" onclick="CopyElementToClipboard('code01151');">Copy Code</a></div>
<div class="Element13"><div class="Element12" id="code01151"><pre class="Element12"><i><span style="color: #008000">// This code shows an example of how to enable Endpoint</span></i>
<i><span style="color: #008000">// 0 for control transfers. Note that for a control endpoint, the</span></i>
<i><span style="color: #008000">// direction parameter is ignored. A control endpoint is always</span></i>
<i><span style="color: #008000">// bidirectional. Endpoint size is 64 bytes.</span></i>

uint8_t ep;

ep = <a href="27935.html">USB_ENDPOINT_AND_DIRECTION</a>(USB_DATA_DIRECTION_DEVICE_TO_HOST, 0);

DRV_USBHS_DEVICE_EndpointEnable(handle, ep, USB_TRANSFER_TYPE_CONTROL, 64);

<i><span style="color: #008000">// This code shows an example of how to set up a endpoint</span></i>
<i><span style="color: #008000">// for BULK IN transfer. For an IN transfer, data moves from device</span></i>
<i><span style="color: #008000">// to Host. In this example, Endpoint 1 is enabled. The maximum</span></i>
<i><span style="color: #008000">// packet size is 64.</span></i>

uint8_t ep;

ep = <a href="27935.html">USB_ENDPOINT_AND_DIRECTION</a>(USB_DATA_DIRECTION_DEVICE_TO_HOST, 1);

DRV_USBHS_DEVICE_EndpointEnable(handle, ep, USB_TRANSFER_TYPE_BULK, 64);

<i><span style="color: #008000">// If Endpoint 1 must also be set up for BULK OUT, the</span></i>
<i><span style="color: #008000">// DRV_USBHS_DEVICE_EndpointEnable function must be called again, as shown</span></i>
<i><span style="color: #008000">// here.</span></i>

ep = <a href="27935.html">USB_ENDPOINT_AND_DIRECTION</a>(USB_DATA_DIRECTION_HOST_TO_DEVICE, 1);

DRV_USBHS_DEVICE_EndpointEnable(handle, ep, USB_TRANSFER_TYPE_BULK, 64);</pre></div></div>
</div>
</div>
</div>
<!-- End Page Content -->

<!-- Begin Page Footer -->
<div class="Element95">
<a href="16811.html">Volume V: MPLAB Harmony Framework Reference</a> &gt; <a href="13069.html">Driver Libraries Help</a> &gt; <a href="28590.html">USB Driver Libraries</a> &gt; <a href="08950.html">PIC32MZ USB Driver</a> &gt; <a href="08946.html">Library Interface</a> &gt; c) Device Mode Operation Functions &gt; <a href="11623.html">DRV_USBHS_DEVICE_EndpointEnable Function</a></div>
<div class="Element93">
<table width="100%" cellspacing="0" cellpadding="0">
<tr><td width="100%">
<div class="Element3">
 MPLAB Harmony Help</div>
</td></tr><tr><td width="100%">
<div class="Element4">
<a href="contents.htm">Contents</a> | <a href="idx.html">Index</a> | <a href="04300.html">Home</a></div>
</td></tr><tr><td width="100%">
<div class="Element97">
<a href="mailto:docerrors@microchip.com&subject=MPLAB Harmony Documentation Feedback (Topic ID: DRV_USBHS_DEVICE_EndpointEnable@DRV_HANDLE@USB_ENDPOINT@USB_TRANSFER_TYPE@uint16_t Topic Title: DRV_USBHS_DEVICE_EndpointEnable Function)&body=Thank you for your feedback! Please include a description of your feedback, and indicate whether you are reporting an an error in the documentation or an enhancement.">Documentation Feedback</a><br> <a href="http://support.microchip.com">Microchip Support</a></div>
</td></tr></table></div>

<!-- End Page Footer -->
</div>
</div>

<!-- End Client Area -->
</body></html>