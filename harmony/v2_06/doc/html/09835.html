<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
<head>
<title>DRV_EEPROM_Read Function</title>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <meta name="generator" content="Doc-O-Matic" />
    <meta name="save" content="history" />
    <meta http-equiv="Content-Style-Type" content="text/css" />
    <link rel="STYLESHEET" href="default.css" type="text/css" />

<script type="text/javascript" src="scripts.js"></script>
</head>
<body class="Element700" onload="onBodyLoad();" onmousedown="onBodyMouseDown();">
<div id="persistenceDiv" style="display:none; behavior:url(#default#userData);"></div>

<!-- Begin Popups -->

<!-- End Popups -->

<!-- Begin Page Header -->
<div class="Element710" id="areafixed">
<div class="Element94">
<a href="16811.html">Volume V: MPLAB Harmony Framework Reference</a> &gt; <a href="13069.html">Driver Libraries Help</a> &gt; <a href="11980.html">Data EEPROM Driver Library</a> &gt; <a href="08487.html">Library Interface</a> &gt; c) Block Operation Functions &gt; <a href="09835.html">DRV_EEPROM_Read Function</a></div>
<div class="Element92">
<table width="100%" cellspacing="0" cellpadding="0">
<tr><td width="25%">
<div class="Element1">
MPLAB Harmony Help</div>
</td><td width="25%">
<div class="Element2">
<a href="contents.htm">Contents</a> | <a href="idx.html">Index</a> | <a href="04300.html">Home</a></div>
</td><td width="25%">
<div class="Element90">
<a href="09817.html">Previous</a> | <a href="08487.html">Up</a> | <a href="09839.html">Next</a></div>
</td><td width="25%">
<div class="Element96">
<a href="mailto:docerrors@microchip.com&subject=MPLAB Harmony Documentation Feedback (Topic ID: DRV_EEPROM_Read@DRV_HANDLE@DRV_EEPROM_COMMAND_HANDLE *@void *@uint32_t@uint32_t Topic Title: DRV_EEPROM_Read Function)&body=Thank you for your feedback! Please include a description of your feedback, and indicate whether you are reporting an an error in the documentation or an enhancement.">Documentation Feedback</a><br> <a href="http://support.microchip.com">Microchip Support</a></div>
</td></tr></table><div class="Element5">
DRV_EEPROM_Read Function</div>
</div>
</div>

<!-- End Page Header -->

<!-- Begin Client Area -->
<div class="Element720" id="areascroll">
<div class="Element721">

<!-- Begin Page Content -->
<div class="Element58">
<a name="43"></a><div class="Element99">
C</div>
<div class="Element101"><div class="Element100"><pre class="Element100"><strong><span style="color: #000080">void</span></strong> <strong><span style="color: #000000">DRV_EEPROM_Read</span></strong>(
    <strong><span style="color: #000080">const</span></strong> <a href="10088.html">DRV_HANDLE</a> <strong><span style="color: #000000">handle</span></strong>, 
    <a href="09807.html">DRV_EEPROM_COMMAND_HANDLE</a> * <strong><span style="color: #000000">commandHandle</span></strong>, 
    <strong><span style="color: #000080">void</span></strong> * <strong><span style="color: #000000">buffer</span></strong>, 
    uint32_t <strong><span style="color: #000000">blockStart</span></strong>, 
    uint32_t <strong><span style="color: #000000">nBlock</span></strong>
);</pre></div></div>
<a name="4465736372697074696F6E"></a><div class="Element14">
Description</div>
<div class="Element11">
<div class="Element10">
<p class="Element10">
This function schedules a non-blocking read operation for reading blocks of data from the EEPROM memory. The function returns with a valid handle in the commandHandle argument if the read request was scheduled successfully. The function adds the request to the driver instance queue and returns immediately. While the request is in the queue, the application buffer is owned by the driver and should not be modified. The function returns <a href="09808.html">DRV_EEPROM_COMMAND_HANDLE_INVALID</a> in the commandHandle argument under the following circumstances:
<ul class="Element635">
<li class="Element605">if a buffer object could not be allocated to the request</li>
<li class="Element605">if the buffer pointer is NULL</li>
<li class="Element605">if the queue size is full or queue depth is insufficient</li>
<li class="Element605">if the driver handle is invalid</li>
<li class="Element605">if the number of blocks to be read is zero or more than the actual number of blocks available</li>
<li class="Element605">if the client opened the driver in write only mode</li>
</ul>&nbsp;</p>
<p class="Element10">
If the requesting client registered an event callback with the driver, the driver will issue a DRV_EEPROM_EVENT_COMMAND_COMPLETE event if the command was processed successfully or DRV_EEPROM_EVENT_COMMAND_ERROR event if the command was not processed successfully.</p></div>
</div>
<a name="507265636F6E646974696F6E73"></a><div class="Element14">
Preconditions</div>
<div class="Element11">
<div class="Element10">
<p class="Element10">
The <a href="09829.html">DRV_EEPROM_Initialize</a> routine must have been called for the specified EEPROM driver instance.&nbsp;</p>
<p class="Element10">
<a href="09834.html">DRV_EEPROM_Open</a> must have been called with DRV_IO_INTENT_READ or DRV_IO_INTENT_READWRITE as the ioIntent to obtain a valid opened device handle.&nbsp;</p></div>
</div>
<a name="506172616D6574657273"></a><div class="Element14">
Parameters</div>
<div class="Element11">
<div class="Element10">
<div class="Element312">
<div class="TableDiv">
<table cellspacing="0" class="Table4">
<tr>
<td class="Element300" valign="top" width="35%">
<div class="Element301">
Parameters&nbsp;</div></td><td class="Element304" valign="top" width="65%">
<div class="Element305">
Description&nbsp;</div></td></tr><tr>
<td class="Element302" valign="top" width="35%">
<div class="Element303">
handle&nbsp;</div></td><td class="Element306" valign="top" width="65%">
<div class="Element307">
A valid open-instance handle, returned from the driver's open function<br>&nbsp;</div></td></tr><tr>
<td class="Element302" valign="top" width="35%">
<div class="Element303">
commandHandle&nbsp;</div></td><td class="Element306" valign="top" width="65%">
<div class="Element307">
Pointer to an argument that will contain the return buffer handle<br>&nbsp;</div></td></tr><tr>
<td class="Element302" valign="top" width="35%">
<div class="Element303">
buffer&nbsp;</div></td><td class="Element306" valign="top" width="65%">
<div class="Element307">
Buffer into which the data read from the EEPROM memory will be placed<br>&nbsp;</div></td></tr><tr>
<td class="Element302" valign="top" width="35%">
<div class="Element303">
blockStart&nbsp;</div></td><td class="Element306" valign="top" width="65%">
<div class="Element307">
Start block address in EEPROM memory from where the read should begin.<br>&nbsp;</div></td></tr><tr>
<td class="Element302" valign="top" width="35%">
<div class="Element303">
nBlock&nbsp;</div></td><td class="Element306" valign="top" width="65%">
<div class="Element307">
Total number of blocks to be read.&nbsp;</div></td></tr></table></div></div>
</div>
</div>
<a name="52657475726E73"></a><div class="Element14">
Returns</div>
<div class="Element11">
<div class="Element10">
<p class="Element10">
If the request was queued successfully then a valid command handle is returned in the commandHandle argument. Otherwise <a href="09808.html">DRV_EEPROM_COMMAND_HANDLE_INVALID</a> is returned if the request was not successful.</p></div>
</div>
<a name="52656D61726B73"></a><div class="Element14">
Remarks</div>
<div class="Element11">
<div class="Element10">
<p class="Element10">
None.</p></div>
</div>
<a name="4578616D706C65"></a><div class="Element14">
Example</div>
<div class="Element11">
<div class="Element10">
<div class="Element170">
<a href="#" onclick="CopyElementToClipboard('code00560');">Copy Code</a></div>
<div class="Element13"><div class="Element12" id="code00560"><pre class="Element12">
uint8_t myBuffer[MY_BUFFER_SIZE];
<i><span style="color: #008000">// address should be block aligned.</span></i>
uint32_t blockStart = EEPROM_BASE_ADDRESS_TO_READ_FROM;
uint32_t nBlock = 2;
<a href="09807.html">DRV_EEPROM_COMMAND_HANDLE</a> commandHandle;
MY_APP_OBJ myAppObj;    

<i><span style="color: #008000">// myEEPROMHandle is the handle returned by the DRV_EEPROM_Open function.</span></i>
<a href="09822.html">DRV_EEPROM_EventHandlerSet</a>(myEEPROMHandle, APP_EEPROMEventHandler, (uintptr_t)&amp;myAppObj);
DRV_EEPROM_Read(myEEPROMHandle, &amp;commandHandle, &amp;myBuffer, blockStart, nBlock);

<strong><span style="color: #000080">if</span></strong>(<a href="09808.html">DRV_EEPROM_COMMAND_HANDLE_INVALID</a> == commandHandle)
{
    <i><span style="color: #008000">// Error handling here</span></i>
}
<strong><span style="color: #000080">else</span></strong>
{
    <i><span style="color: #008000">// Read queued successfully.</span></i>
}

<i><span style="color: #008000">// Event is received when the buffer is processed.</span></i>

<strong><span style="color: #000080">void</span></strong> APP_EEPROMEventHandler
(
    <a href="09818.html">DRV_EEPROM_EVENT</a> event, 
    <a href="09807.html">DRV_EEPROM_COMMAND_HANDLE</a> commandHandle, 
    uintptr_t context
)
{
    <i><span style="color: #008000">// context points to myAppObj.</span></i>

    <strong><span style="color: #000080">switch</span></strong>(event)
    {
        <strong><span style="color: #000080">case</span></strong> DRV_EEPROM_EVENT_COMMAND_COMPLETE:

            <i><span style="color: #008000">// This means the data was transferred. </span></i>
            <strong><span style="color: #000080">break</span></strong>;
        
        <strong><span style="color: #000080">case</span></strong> DRV_EEPROM_EVENT_COMMAND_ERROR:

            <i><span style="color: #008000">// Error handling here.</span></i>
            <strong><span style="color: #000080">break</span></strong>;

        <strong><span style="color: #000080">default</span></strong>:
            <strong><span style="color: #000080">break</span></strong>;
    }
}
</pre></div></div>
</div>
</div>
</div>
<!-- End Page Content -->

<!-- Begin Page Footer -->
<div class="Element95">
<a href="16811.html">Volume V: MPLAB Harmony Framework Reference</a> &gt; <a href="13069.html">Driver Libraries Help</a> &gt; <a href="11980.html">Data EEPROM Driver Library</a> &gt; <a href="08487.html">Library Interface</a> &gt; c) Block Operation Functions &gt; <a href="09835.html">DRV_EEPROM_Read Function</a></div>
<div class="Element93">
<table width="100%" cellspacing="0" cellpadding="0">
<tr><td width="100%">
<div class="Element3">
 MPLAB Harmony Help</div>
</td></tr><tr><td width="100%">
<div class="Element4">
<a href="contents.htm">Contents</a> | <a href="idx.html">Index</a> | <a href="04300.html">Home</a></div>
</td></tr><tr><td width="100%">
<div class="Element97">
<a href="mailto:docerrors@microchip.com&subject=MPLAB Harmony Documentation Feedback (Topic ID: DRV_EEPROM_Read@DRV_HANDLE@DRV_EEPROM_COMMAND_HANDLE *@void *@uint32_t@uint32_t Topic Title: DRV_EEPROM_Read Function)&body=Thank you for your feedback! Please include a description of your feedback, and indicate whether you are reporting an an error in the documentation or an enhancement.">Documentation Feedback</a><br> <a href="http://support.microchip.com">Microchip Support</a></div>
</td></tr></table></div>

<!-- End Page Footer -->
</div>
</div>

<!-- End Client Area -->
</body></html>