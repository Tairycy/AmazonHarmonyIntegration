<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
<head>
<title>Bootloader Placement in Memory</title>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <meta name="generator" content="Doc-O-Matic" />
    <meta name="save" content="history" />
    <meta http-equiv="Content-Style-Type" content="text/css" />
    <link rel="STYLESHEET" href="default.css" type="text/css" />

<script type="text/javascript" src="scripts.js"></script>
</head>
<body class="Element700" onload="onBodyLoad();" onmousedown="onBodyMouseDown();">
<div id="persistenceDiv" style="display:none; behavior:url(#default#userData);"></div>

<!-- Begin Popups -->

<!-- End Popups -->

<!-- Begin Page Header -->
<div class="Element710" id="areafixed">
<div class="Element94">
<a href="16811.html">Volume V: MPLAB Harmony Framework Reference</a> &gt; <a href="04884.html">Bootloader Library Help</a> &gt; <a href="04889.html">Using the Library</a> &gt; <a href="04882.html">How the Library Works</a> &gt; <a href="04870.html">Bootloader Placement in Memory</a></div>
<div class="Element92">
<table width="100%" cellspacing="0" cellpadding="0">
<tr><td width="25%">
<div class="Element1">
MPLAB Harmony Help</div>
</td><td width="25%">
<div class="Element2">
<a href="contents.htm">Contents</a> | <a href="idx.html">Index</a> | <a href="04300.html">Home</a></div>
</td><td width="25%">
<div class="Element90">
<a href="04869.html">Previous</a> | <a href="04882.html">Up</a> | <a href="04881.html">Next</a></div>
</td><td width="25%">
<div class="Element96">
<a href="mailto:docerrors@microchip.com&subject=MPLAB Harmony Documentation Feedback (Topic ID: BOOTLOADER Bootloader Placement in Memory Topic Title: Bootloader Placement in Memory)&body=Thank you for your feedback! Please include a description of your feedback, and indicate whether you are reporting an an error in the documentation or an enhancement.">Documentation Feedback</a><br> <a href="http://support.microchip.com">Microchip Support</a></div>
</td></tr></table><div class="Element5">
Bootloader Placement in Memory</div>
</div>
</div>

<!-- End Page Header -->

<!-- Begin Client Area -->
<div class="Element720" id="areascroll">
<div class="Element721">

<!-- Begin Page Content -->
<div class="Element58">
<a name="4465736372697074696F6E"></a><div class="Element11">
<div class="Element10">
<div class="Element15">
Basic Memory Layout</div>
<p class="Element10">
The placement of the Bootloader in Flash memory controls several elements of the application and Bootloader interaction. Both have to be placed such that the application will not overwrite the Bootloader, and the Bootloader can properly program the application when it is downloaded.</p><div class="Element15">
PIC32M Layout</div>
<p class="Element10">
Figure 1 illustrates two schemes for the Bootloader placement based on the size of the Bootloader. Devices with a large enough Boot Flash memory can place all of the Bootloader within Boot Flash. Fitting the Bootloader within the Boot Flash memory provides the complete program Flash memory for the user application.&nbsp;</p>
<p class="Element10">
In the case of Bootloaders that exceed the size of PIC32 boot Flash, the Bootloader is split into two parts:
<ul class="Element635">
<li class="Element605">For devices with 3 KB of Boot Flash, only the reset vector is placed in Boot Flash, with the Interrupt Vector Table (IVT) and C start-up code placed in Program Flash.</li>
<li class="Element605">For devices with 12 KB of Boot Flash, the Interrupt Vector Table (IVT) and the C start-up code are placed in Boot Flash, and the remaining portion of the Bootloader is placed inside the Program Flash.</li>
</ul>The portion of the Bootloader that resides in Program Flash may be placed at either the beginning or the end of the Program Flash, depending on the needs of the application. The linker scripts generated by Harmony place the Bootloader code at the beginning of Program Flash (0x9D000000).&nbsp;</p>
<p class="Element10">
For PIC32MZ devices, with two 80 KB Boot Flash panels, the Bootloader may or may not fit entirely in one Boot Flash panel. In order to fit some of the Bootloaders, the linker script makes the two Boot Flash panels look like one contiguous Boot Flash memory. Unimplemented areas are blocked using a fill command to the linker.&nbsp;</p>
<p class="Element10">
<strong>Figure 1: Bootloader Memory Layout</strong>&nbsp;</p>
<p class="Element10">
<img src="BOOTLOADER Bootloader Placement.png" border="0" alt="" title="">&nbsp;</p><div class="Element15">
LiveUpdate Memory Layout (PIC32MZ Devices)</div>
<p class="Element10">
The following figure shows the Flash ID structure. </p><p class="Element10" style="text-align: center;">
<img src="Bootloader Flash ID Structure.png" border="0" alt="" title=""></p></div>
</div>
</div>
<!-- End Page Content -->

<!-- Begin Page Footer -->
<div class="Element95">
<a href="16811.html">Volume V: MPLAB Harmony Framework Reference</a> &gt; <a href="04884.html">Bootloader Library Help</a> &gt; <a href="04889.html">Using the Library</a> &gt; <a href="04882.html">How the Library Works</a> &gt; <a href="04870.html">Bootloader Placement in Memory</a></div>
<div class="Element93">
<table width="100%" cellspacing="0" cellpadding="0">
<tr><td width="100%">
<div class="Element3">
 MPLAB Harmony Help</div>
</td></tr><tr><td width="100%">
<div class="Element4">
<a href="contents.htm">Contents</a> | <a href="idx.html">Index</a> | <a href="04300.html">Home</a></div>
</td></tr><tr><td width="100%">
<div class="Element97">
<a href="mailto:docerrors@microchip.com&subject=MPLAB Harmony Documentation Feedback (Topic ID: BOOTLOADER Bootloader Placement in Memory Topic Title: Bootloader Placement in Memory)&body=Thank you for your feedback! Please include a description of your feedback, and indicate whether you are reporting an an error in the documentation or an enhancement.">Documentation Feedback</a><br> <a href="http://support.microchip.com">Microchip Support</a></div>
</td></tr></table></div>

<!-- End Page Footer -->
</div>
</div>

<!-- End Client Area -->
</body></html>