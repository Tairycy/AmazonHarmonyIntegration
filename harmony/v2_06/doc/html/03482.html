<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
<head>
<title>Running the Demonstration</title>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <meta name="generator" content="Doc-O-Matic" />
    <meta name="save" content="history" />
    <meta http-equiv="Content-Style-Type" content="text/css" />
    <link rel="STYLESHEET" href="default.css" type="text/css" />

<script type="text/javascript" src="scripts.js"></script>
</head>
<body class="Element700" onload="onBodyLoad();" onmousedown="onBodyMouseDown();">
<div id="persistenceDiv" style="display:none; behavior:url(#default#userData);"></div>

<!-- Begin Popups -->

<!-- End Popups -->

<!-- Begin Page Header -->
<div class="Element710" id="areafixed">
<div class="Element94">
<a href="04300.html">Volume I: Getting Started With MPLAB Harmony Libraries and Applications</a> &gt; <a href="03342.html">Applications Help</a> &gt; <a href="04855.html">Bluetooth Demonstrations</a> &gt; <a href="03484.html">Demonstrations</a> &gt; <a href="03474.html">Data Demonstrations</a> &gt; <a href="03479.html">data_temp_sens_rgb</a> &gt; <a href="03482.html">Running the Demonstration</a></div>
<div class="Element92">
<table width="100%" cellspacing="0" cellpadding="0">
<tr><td width="25%">
<div class="Element1">
MPLAB Harmony Help</div>
</td><td width="25%">
<div class="Element2">
<a href="contents.htm">Contents</a> | <a href="idx.html">Index</a> | <a href="04300.html">Home</a></div>
</td><td width="25%">
<div class="Element90">
<a href="03481.html">Previous</a> | <a href="03479.html">Up</a> | <a href="03470.html">Next</a></div>
</td><td width="25%">
<div class="Element96">
<a href="mailto:docerrors@microchip.com&subject=MPLAB Harmony Documentation Feedback (Topic ID: APPS BLUETOOTH data_temp_sens_rgb_run Topic Title: Running the Demonstration)&body=Thank you for your feedback! Please include a description of your feedback, and indicate whether you are reporting an an error in the documentation or an enhancement.">Documentation Feedback</a><br> <a href="http://support.microchip.com">Microchip Support</a></div>
</td></tr></table><div class="Element5">
Running the Demonstration</div>
</div>
</div>

<!-- End Page Header -->

<!-- Begin Client Area -->
<div class="Element720" id="areascroll">
<div class="Element721">

<!-- Begin Page Content -->
<div class="Element58">
<a name="4465736372697074696F6E"></a><div class="Element11">
<div class="Element10">
<p class="Element10">
This demonstration allows the SPP data transfer/receive of temperature sensor and RGB data. </p><div class="Element63">
<div class="TableDiv">
<table cellspacing="0" class="Table0">
<tr>
<td class="Element67" valign="top" width="10%" style="border:none;">
<div class="Element68">
<img src="Note Icon.png" border="0" alt="" title=""> <strong>Note:</strong>&nbsp;</div></td><td class="Element67" valign="top" width="90%" style="border:none;">
<div class="Element68">
Before running the demonstration, it is necessary to install the PIC32 Bluetooth Starter Kit Android application to your Android v4.0 or later smartphone.&nbsp;</div></td></tr></table></div></div>
<div class="Element15">
Installing the PIC32 Bluetooth Starter Kit Android Application</div>

<ol class="Element630">
<li value="1" class="Element600">Install the Android application, <span class="Element146">BTSK_Android_App.apk</span>, to your Android 4.0 or later smartphone. This file is available in the following MPLAB Harmony installation folder: <span class="Element146">&lt;install-dir&gt;/apps/bluetooth/data_temp_sens_rgb/android_app</span>.</li>
<li value="2" class="Element600">Connect the Android device to a computer using a mini-B USB connector.</li>
<li value="3" class="Element600">It is suggested to copy the Android application into the <span class="Element146">Download</span> folder of the Android device.</li>
<li value="4" class="Element600">On the Android device, select <i>My Files&gt;All Files&gt;Download</i>&gt;<i>BTSK_Android_App.apk</i>.</li>
</ol><p class="Element10">
<img src="APPS BLUETOOTH installapp figure 1.png" border="0" alt="" title=""></p>
<ol class="Element630">
<li value="5" class="Element600">After selecting the <span class="Element146">.apk</span> file, the warning message, &quot;blocking installation&quot;, will appear.</li>
</ol><p class="Element10">
<img src="APPS BLUETOOTH installapp figure 2.png" border="0" alt="" title=""></p>
<ol class="Element630">
<li value="6" class="Element600">Select <strong>Settings</strong> and the security window will appear.</li>
<li value="7" class="Element600">Choose the option to install applications from unknown sources.</li>
</ol><p class="Element10">
<img src="APPS BLUETOOTH installapp figure 3.png" border="0" alt="" title=""></p>
<ol class="Element630">
<li value="8" class="Element600">Once the option is selected, a warning will appear, as shown in the following figure.</li>
</ol><p class="Element10">
<img src="APPS BLUETOOTH installapp figure 4.png" border="0" alt="" title=""></p>
<ol class="Element630">
<li value="9" class="Element600">After selecting <strong>OK</strong> a window will appear requesting confirmation for installing the application.</li>
<li value="10" class="Element600">Once the installation is complete, select <strong>Open</strong> to run the application, as shown in the following figure.</li>
</ol><p class="Element10">
<img src="APPS BLUETOOTH installapp figure 5.png" border="0" alt="" title=""></p><div class="Element15">
Running the Temperature Sensor and RGB Demonstration</div>

<ol class="Element630">
<li value="1" class="Element600">Compile and program the target device with the hex file, <span class="Element146">data_temp_sens_rgb.X.production.hex</span>.</li>
<li value="2" class="Element600">Select the PIC32 Bluetooth Starter Kit on the Android device and a window will appear, as shown in the following figure.</li>
</ol><p class="Element10">
<img src="APPS BLUETOOTH data_temp_sens_rgb figure 1.png" border="0" alt="" title=""></p>
<ol class="Element630">
<li value="3" class="Element600">Select the Bluetooth Starter Kit icon in the application window.</li>
<li value="4" class="Element600">If prompted, turn on Bluetooth by selecting <strong>Yes</strong>.</li>
</ol><p class="Element10">
<img src="APPS BLUETOOTH data_temp_sens_rgb figure 2.png" border="0" alt="" title=""></p>
<ol class="Element630">
<li value="5" class="Element600">There are three methods for performing the next steps depending on the phone and Android version you are using. <strong>[A]</strong> Pressing the Microchip logo and the words &quot;Bluetooth Starter Kit&quot;, [B] pressing the on-screen Menu button <strong>[B]</strong> (if supported), or<strong> [C]</strong> Pressing the Menu button (hardware). In general, if you have a hardware button you will not have an on-screen button and vice versa. After opening the menu, select <strong>Connect a device - Insecure</strong>.</li>
</ol><p class="Element10">
<img src="APPS BLUETOOTH data_temp_sens_rgb figure 3.png" border="0" alt="" title=""></p>
<ol class="Element630">
<li value="6" class="Element600">Select the option &quot;Connect a device â€“ Insecure&quot; and a window will appear showing a list of paired device and option to scan for devices, as shown in the following figure.</li>
</ol><p class="Element10">
<img src="APPS BLUETOOTH data_temp_sens_rgb figure 4.png" border="0" alt="" title=""></p>
<ol class="Element630">
<li value="7" class="Element600">A list of paired devices will appear. If this is the first time connecting with the PIC32 Bluetooth Starter Kit, select <strong>Scan for Devices</strong>. It should be noted that sometimes the name is not resolved and will appear as &quot;null&quot;. After some time the name will change from &quot;null&quot; to &quot;BTSK&quot;. The MAC Address will be fixed for the first eight digits and the last four will vary (12:34:45:78: XX: XX) when the device is programmed with code. If the name of the Bluetooth device is not found during the application scan, try pairing it using the <i>Settings &gt; Bluetooth</i> menu.</li>
</ol><p class="Element10">
<img src="APPS BLUETOOTH data_temp_sens_rgb figure 5.png" border="0" alt="" title=""></p>
<ol class="Element630">
<li value="8" class="Element600">When selected, the Android application will pair and<span style="color: #FFFFFF">_</span>connect<span style="color: #FFFFFF">_</span>with the PIC32 Bluetooth Starter Kit. Accept any pair requests, as follows.</li>
</ol><p class="Element10">
<img src="APPS BLUETOOTH data_temp_sens_rgb figure 6.png" border="0" alt="" title=""></p>
<ol class="Element630">
<li value="9" class="Element600">Status indicators will confirm that the connection was successful, as shown in the following figure.</li>
</ol><p class="Element10">
<img src="APPS BLUETOOTH data_temp_sens_rgb figure 7.png" border="0" alt="" title=""> </p><div class="Element63">
<div class="TableDiv">
<table cellspacing="0" class="Table0">
<tr>
<td class="Element67" valign="top" width="10%" style="border:none;">
<div class="Element68">
<img src="Note Icon.png" border="0" alt="" title=""> <strong>Note:</strong>&nbsp;</div></td><td class="Element67" valign="top" width="90%" style="border:none;">
<div class="Element68">
If the application was unable to<span style="color: #FFFFFF">_</span>connect, verify that the PIC32 Bluetooth Starter Kit is powered on, within range, and is not connected to another Bluetooth device.&nbsp;</div></td></tr></table></div></div>
<div class="Element15">
LED Color Control</div>
<p class="Element10">
The application consists of three color sliders for Red (R), Green (G), and Blue (B), respectively. The color of the LED is programmed as the slider <strong>(1)</strong> is modified. The color of the LED can also be modified using the increment button or the decrement button <strong>(2)</strong>. Similarly, the color can be modified by selecting the color based on hue and saturation on the color palette <strong>(3)</strong>. The slider and the increment/decrement buttons send commands to the PIC32 Bluetooth Starter Kit via SPP to program the LED color. The colors of R, G, and B can vary from 0 to 254, respectively. The color bar <strong>(4)</strong> indicates the resulting modified color of the RGB combination. The LED changes in real-time to approximate the color in the color bar. The LED color will be of an uncalibrated nature of the integrated three color diodes.&nbsp;</p>
<p class="Element10">
This is a demonstration of full-duplex data transmission from and to the Android device to the development board. Each time the color is modified, a command is sent in a string format via SPP to the development board. The command sent can be viewed in the Text menu.&nbsp;</p>
<p class="Element10">
<img src="APPS BLUETOOTH appcontrol figure 1.png" border="0" alt="" title="">&nbsp;</p><div class="Element15">
Temperature Sensor</div>
<p class="Element10">
Select the Temperature menu on the Android application and the window will appear as shown in the next figure. Fahrenheit temperature readings are shown in a graph, which updates automatically as new readings are received. The graph is zoomable and scrollable in the X direction. The last received reading is also displayed as large text.&nbsp;</p>
<p class="Element10">
The PIC32 Bluetooth Starter Kit has a temperature sensor and once Start is selected, the temperature will be updated for every second by default in a periodic mode. The update rate can be modified from 250 milliseconds to 8 seconds by using the increment or the decrement button <strong>(1)</strong>. The time duration can also be modified by the slider provided in the application <strong>(2)</strong>. Once the time duration is set, select <strong>Set Timer</strong> to initiate periodic update for the modified duration. The temperature update can be halted by selecting <strong>Stop</strong>. Start/Stop and Set Timer sends/receives commands to/from the PIC32 Bluetooth Starter Kit through SPP full-duplex transmission. The commands sent and received can be viewed in the Text menu.&nbsp;</p>
<p class="Element10">
<img src="APPS BLUETOOTH appcontrol figure 2.png" border="0" alt="" title="">&nbsp;</p><div class="Element15">
Text Control</div>
<p class="Element10">
<i>LED Control</i>&nbsp;</p>
<p class="Element10">
The LED color can be modified by sending command via Terminal emulator of the app. Select the Text menu to view the terminal window of the application. To modify the LED color the following command is sent in the format, <span class="Element146">255, 03, R, G, B</span>, where:</p>
<ul class="Element630">
<li class="Element600"><span class="Element146">255</span> is the command to modify the LED color.</li>
<li class="Element600"><span class="Element146">03</span> determines the number of Bytes to be sent, currently it is 3 (R, G, B)</li>
<li class="Element600"><span class="Element146">R</span> specifies the value for Red color from 0-254</li>
<li class="Element600"><span class="Element146">G</span> specifies the value for Green color from 0-254</li>
<li class="Element600"><span class="Element146">B</span> specifies the value for Blue from 0-254</li>
</ul><p class="Element10">
For example, <span class="Element146">255, 03, 127, 60, 128</span> (R = 127, G = 60, B = 128)&nbsp;</p>
<p class="Element10">
The commands â€˜r' or â€˜g' or â€˜b' set the LED to 50% of Red, Green, or Blue, respectively. Similarly, the commands â€˜R' or â€˜G' or â€˜B' set the LED to 100% of Red, Green, or Blue, respectively. Refer to <strong>Table 1: Text Commands</strong> for details.&nbsp;</p>
<p class="Element10">
<i>Temperature Control</i>&nbsp;</p>
<p class="Element10">
The command 254 is sent to the PIC32 Bluetooth Starter Kit via SPP data transmission. This command transmits the current temperature to the Android device terminal emulator once on request. Similarly, command 253 is sent to the PIC32 Bluetooth Starter Kit to receive the current temperature on a periodic time period for every one second by default. The rate of the update can be modified by the following command 252, with the time in milliseconds.&nbsp;</p>
<p class="Element10">
252 - Command the update timer rate change. The periodic temperature update can be stopped by sending command 253.&nbsp;</p>
<p class="Element10">
Refer to <strong>Table 1: Text Commands</strong> for details.&nbsp;</p>
<p class="Element10">
<strong>Table 1: Text Commands</strong> &nbsp;</p><div class="Element63">
<div class="TableDiv">
<table cellspacing="0" class="Table2">
<tr>
<td class="Element65" valign="top" width="7%">
<div class="Element66">
Feature&nbsp;</div></td><td class="Element65" valign="top" width="3%">
<div class="Element66">
Command&nbsp;</div></td><td class="Element65" valign="top" width="6%">
<div class="Element66">
TX Format&nbsp;</div></td><td class="Element65" valign="top" width="11%">
<div class="Element66">
RX Format&nbsp;</div></td><td class="Element65" valign="top" width="64%">
<div class="Element66">
Description&nbsp;</div></td><td class="Element65" valign="top" width="9%">
<div class="Element66">
Example&nbsp;</div></td></tr><tr>
<td class="Element67" valign="top" width="7%">
<div class="Element68">
LED&nbsp;</div></td><td class="Element67" valign="top" width="3%">
<div class="Element68">
255&nbsp;</div></td><td class="Element67" valign="top" width="6%">
<div class="Element68">
255,03,R,G,B&nbsp;</div></td><td class="Element67" valign="top" width="11%">
<div class="Element68">
N/A&nbsp;</div></td><td class="Element67" valign="top" width="64%">
<div class="Element68">
The led color is modified depending on the value of R, G and B varying from 0-254 respectively.&nbsp;</div></td><td class="Element67" valign="top" width="9%">
<div class="Element68">
255,03,127,127,127&nbsp;</div></td></tr><tr>
<td class="Element67" valign="top" width="7%">
<div class="Element68">
LED&nbsp;</div></td><td class="Element67" valign="top" width="3%">
<div class="Element68">
R&nbsp;</div></td><td class="Element67" valign="top" width="6%">
<div class="Element68">
R&nbsp;</div></td><td class="Element67" valign="top" width="11%">
<div class="Element68">
N/A&nbsp;</div></td><td class="Element67" valign="top" width="64%">
<div class="Element68">
Programs LED for 100% of Red&nbsp;</div></td><td class="Element67" valign="top" width="9%">
<div class="Element68">
R&nbsp;</div></td></tr><tr>
<td class="Element67" valign="top" width="7%">
<div class="Element68">
LED&nbsp;</div></td><td class="Element67" valign="top" width="3%">
<div class="Element68">
G&nbsp;</div></td><td class="Element67" valign="top" width="6%">
<div class="Element68">
G&nbsp;</div></td><td class="Element67" valign="top" width="11%">
<div class="Element68">
N/A&nbsp;</div></td><td class="Element67" valign="top" width="64%">
<div class="Element68">
Programs LED for 100% of Green&nbsp;</div></td><td class="Element67" valign="top" width="9%">
<div class="Element68">
G&nbsp;</div></td></tr><tr>
<td class="Element67" valign="top" width="7%">
<div class="Element68">
LED&nbsp;</div></td><td class="Element67" valign="top" width="3%">
<div class="Element68">
B&nbsp;</div></td><td class="Element67" valign="top" width="6%">
<div class="Element68">
B&nbsp;</div></td><td class="Element67" valign="top" width="11%">
<div class="Element68">
N/A&nbsp;</div></td><td class="Element67" valign="top" width="64%">
<div class="Element68">
Programs LED for 100% of Blue&nbsp;</div></td><td class="Element67" valign="top" width="9%">
<div class="Element68">
B&nbsp;</div></td></tr><tr>
<td class="Element67" valign="top" width="7%">
<div class="Element68">
LED&nbsp;</div></td><td class="Element67" valign="top" width="3%">
<div class="Element68">
r&nbsp;</div></td><td class="Element67" valign="top" width="6%">
<div class="Element68">
r&nbsp;</div></td><td class="Element67" valign="top" width="11%">
<div class="Element68">
N/A&nbsp;</div></td><td class="Element67" valign="top" width="64%">
<div class="Element68">
Programs LED for 50% of Red&nbsp;</div></td><td class="Element67" valign="top" width="9%">
<div class="Element68">
r&nbsp;</div></td></tr><tr>
<td class="Element67" valign="top" width="7%">
<div class="Element68">
LED&nbsp;</div></td><td class="Element67" valign="top" width="3%">
<div class="Element68">
g&nbsp;</div></td><td class="Element67" valign="top" width="6%">
<div class="Element68">
g&nbsp;</div></td><td class="Element67" valign="top" width="11%">
<div class="Element68">
N/A&nbsp;</div></td><td class="Element67" valign="top" width="64%">
<div class="Element68">
Programs LED for 50% of Green&nbsp;</div></td><td class="Element67" valign="top" width="9%">
<div class="Element68">
g&nbsp;</div></td></tr><tr>
<td class="Element67" valign="top" width="7%">
<div class="Element68">
LED&nbsp;</div></td><td class="Element67" valign="top" width="3%">
<div class="Element68">
b&nbsp;</div></td><td class="Element67" valign="top" width="6%">
<div class="Element68">
b&nbsp;</div></td><td class="Element67" valign="top" width="11%">
<div class="Element68">
N/A&nbsp;</div></td><td class="Element67" valign="top" width="64%">
<div class="Element68">
Programs LED for 50% of Blue&nbsp;</div></td><td class="Element67" valign="top" width="9%">
<div class="Element68">
b&nbsp;</div></td></tr><tr>
<td class="Element67" valign="top" width="7%">
<div class="Element68">
Temperature&nbsp;</div></td><td class="Element67" valign="top" width="3%">
<div class="Element68">
254&nbsp;</div></td><td class="Element67" valign="top" width="6%">
<div class="Element68">
254&nbsp;</div></td><td class="Element67" valign="top" width="11%">
<div class="Element68">
Temperature in Fahrenheit&nbsp;</div></td><td class="Element67" valign="top" width="64%">
<div class="Element68">
On transmitting 254 command, the PIC32 Bluetooth Starter Kit sends the current temperature once per request&nbsp;</div></td><td class="Element67" valign="top" width="9%">
<div class="Element68">
254&nbsp;</div></td></tr><tr>
<td class="Element67" valign="top" width="7%">
<div class="Element68">
Temperature&nbsp;</div></td><td class="Element67" valign="top" width="3%">
<div class="Element68">
253&nbsp;</div></td><td class="Element67" valign="top" width="6%">
<div class="Element68">
253&nbsp;</div></td><td class="Element67" valign="top" width="11%">
<div class="Element68">
253, temperature in Fahrenheit&nbsp;</div></td><td class="Element67" valign="top" width="64%">
<div class="Element68">
On transmitting 253, the PIC32 Bluetooth Starter Kit updates the temperature for every one second&nbsp;</div></td><td class="Element67" valign="top" width="9%">
<div class="Element68">
TX: 253<br>RX:253,80&nbsp;</div></td></tr><tr>
<td class="Element67" valign="top" width="7%">
<div class="Element68">
Temperature&nbsp;</div></td><td class="Element67" valign="top" width="3%">
<div class="Element68">
252&nbsp;</div></td><td class="Element67" valign="top" width="6%">
<div class="Element68">
252, rate in milliseconds&nbsp;</div></td><td class="Element67" valign="top" width="11%">
<div class="Element68">
253, temperature&nbsp;</div></td><td class="Element67" valign="top" width="64%">
<div class="Element68">
On transmitting 252, the PIC32 Bluetooth Starter Kit updates the temperature every 'n' milliseconds&nbsp;</div></td><td class="Element67" valign="top" width="9%">
<div class="Element68">
TX: 253,399<br>RX: 253,80&nbsp;</div></td></tr><tr>
<td class="Element67" valign="top" width="7%">
<div class="Element68">
Temperature&nbsp;</div></td><td class="Element67" valign="top" width="3%">
<div class="Element68">
253&nbsp;</div></td><td class="Element67" valign="top" width="6%">
<div class="Element68">
253&nbsp;</div></td><td class="Element67" valign="top" width="11%">
<div class="Element68">
N/A&nbsp;</div></td><td class="Element67" valign="top" width="64%">
<div class="Element68">
The periodic display can be halted by resending 253&nbsp;</div></td><td class="Element67" valign="top" width="9%">
<div class="Element68">
N/A&nbsp;</div></td></tr></table></div></div>
<p class="Element10">
<img src="APPS BLUETOOTH appcontrol figure 3.png" border="0" alt="" title=""></p></div>
</div>
</div>
<!-- End Page Content -->

<!-- Begin Page Footer -->
<div class="Element95">
<a href="04300.html">Volume I: Getting Started With MPLAB Harmony Libraries and Applications</a> &gt; <a href="03342.html">Applications Help</a> &gt; <a href="04855.html">Bluetooth Demonstrations</a> &gt; <a href="03484.html">Demonstrations</a> &gt; <a href="03474.html">Data Demonstrations</a> &gt; <a href="03479.html">data_temp_sens_rgb</a> &gt; <a href="03482.html">Running the Demonstration</a></div>
<div class="Element93">
<table width="100%" cellspacing="0" cellpadding="0">
<tr><td width="100%">
<div class="Element3">
 MPLAB Harmony Help</div>
</td></tr><tr><td width="100%">
<div class="Element4">
<a href="contents.htm">Contents</a> | <a href="idx.html">Index</a> | <a href="04300.html">Home</a></div>
</td></tr><tr><td width="100%">
<div class="Element97">
<a href="mailto:docerrors@microchip.com&subject=MPLAB Harmony Documentation Feedback (Topic ID: APPS BLUETOOTH data_temp_sens_rgb_run Topic Title: Running the Demonstration)&body=Thank you for your feedback! Please include a description of your feedback, and indicate whether you are reporting an an error in the documentation or an enhancement.">Documentation Feedback</a><br> <a href="http://support.microchip.com">Microchip Support</a></div>
</td></tr></table></div>

<!-- End Page Footer -->
</div>
</div>

<!-- End Client Area -->
</body></html>