<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
<head>
<title>Controlling the Conversion Process</title>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <meta name="generator" content="Doc-O-Matic" />
    <meta name="save" content="history" />
    <meta http-equiv="Content-Style-Type" content="text/css" />
    <link rel="STYLESHEET" href="default.css" type="text/css" />

<script type="text/javascript" src="scripts.js"></script>
</head>
<body class="Element700" onload="onBodyLoad();" onmousedown="onBodyMouseDown();">
<div id="persistenceDiv" style="display:none; behavior:url(#default#userData);"></div>

<!-- Begin Popups -->

<!-- End Popups -->

<!-- Begin Page Header -->
<div class="Element710" id="areafixed">
<div class="Element94">
<a href="16811.html">Volume V: MPLAB Harmony Framework Reference</a> &gt; <a href="17367.html">Peripheral Libraries Help</a> &gt; <a href="02681.html">ADC Peripheral Library</a> &gt; <a href="17403.html">Using the Library</a> &gt; <a href="17395.html">How the Library Works</a> &gt; <a href="17384.html">Controlling the Conversion Process</a></div>
<div class="Element92">
<table width="100%" cellspacing="0" cellpadding="0">
<tr><td width="25%">
<div class="Element1">
MPLAB Harmony Help</div>
</td><td width="25%">
<div class="Element2">
<a href="contents.htm">Contents</a> | <a href="idx.html">Index</a> | <a href="04300.html">Home</a></div>
</td><td width="25%">
<div class="Element90">
<a href="17385.html">Previous</a> | <a href="17395.html">Up</a> | <a href="17381.html">Next</a></div>
</td><td width="25%">
<div class="Element96">
<a href="mailto:docerrors@microchip.com&subject=MPLAB Harmony Documentation Feedback (Topic ID: PLIB ADC Controlling the Conversion Process Topic Title: Controlling the Conversion Process)&body=Thank you for your feedback! Please include a description of your feedback, and indicate whether you are reporting an an error in the documentation or an enhancement.">Documentation Feedback</a><br> <a href="http://support.microchip.com">Microchip Support</a></div>
</td></tr></table><div class="Element5">
Controlling the Conversion Process</div>
</div>
</div>

<!-- End Page Header -->

<!-- Begin Client Area -->
<div class="Element720" id="areascroll">
<div class="Element721">

<!-- Begin Page Content -->
<div class="Element58">
<a name="4465736372697074696F6E"></a><div class="Element11">
<div class="Element10">
<p class="Element10">
Conversion can be started in one of the following three ways:</p><div class="Element15">
Manual Conversion Sequence</div>
<p class="Element10">
<strong>Manual Sample Start, Manual Conversion Start</strong>&nbsp;</p>
<p class="Element10">
When ADC_CONVERSION_TRIGGER_SAMP_CLEAR is selected using <a href="18156.html">PLIB_ADC_ConversionTriggerSourceSelect</a>, the conversion trigger is under software control. Calls to <a href="18203.html">PLIB_ADC_SamplingStop</a> will stop the sampling and start the conversion sequence. The user must call <a href="18202.html">PLIB_ADC_SamplingStart</a> and <a href="18203.html">PLIB_ADC_SamplingStop</a> in a timed manner, to ensure adequate sampling time. </p><p class="Element10" style="text-align: center;">
<strong>Converting One Channel, Manual Sample Start, Manual Conversion Start</strong>&nbsp;</p>
<p class="Element10" style="text-align: center;">
<img src="Manual Sample Start and Manual Conversion Start.png" border="0" alt="" title="">&nbsp;</p><p class="Element10">
<strong>Automatic Sample Start, Manual Conversion Start</strong>&nbsp;</p>
<p class="Element10">
Automatic sampling is initiated using <a href="18198.html">PLIB_ADC_SampleAutoStartEnable</a>, calling <a href="18203.html">PLIB_ADC_SamplingStop</a> will terminate sampling and start conversion. After the conversion, the sampling starts again automatically. The user must call <a href="18203.html">PLIB_ADC_SamplingStop</a> in a timed manner, to ensure adequate sampling time. Wait for required acquisition/auto sample time (minimum of 1 TAD), and then call <a href="18203.html">PLIB_ADC_SamplingStop</a> to start the conversion process. </p><p class="Element10" style="text-align: center;">
<strong>Converting One Channel, Automatic Sample Start, Manual Conversion Start</strong>&nbsp;</p>
<p class="Element10" style="text-align: center;">
<img src="Auto Sample Start and Manual COnversion Start.png" border="0" alt="" title="">&nbsp;</p>
<p class="Element10" style="text-align: center;">
&nbsp;</p>
<p class="Element10" style="text-align: center;">
&nbsp;</p><div class="Element15">
Clocked Conversion Sequence</div>
<p class="Element10">
<strong>Manual Sample Start and TAD based Conversion Start</strong>&nbsp;</p>
<p class="Element10">
When ADC_CONVERSION_TRIGGER_INTERNAL_COUNT is selected using <a href="18156.html">PLIB_ADC_ConversionTriggerSourceSelect</a>, the conversion trigger is under analog-to-digital clock control. <a href="18196.html">PLIB_ADC_SampleAcquisitionTimeSet</a> selects the TAD clock cycles between the start of sampling and the start of conversion. [Minimum 1 clock cycle has to be selected to ensure the sampling requirements are met]. <a href="18202.html">PLIB_ADC_SamplingStart</a> starts the sampling for the configured acquisition time, and then <a href="18203.html">PLIB_ADC_SamplingStop</a> starts the conversion process. </p><p class="Element10" style="text-align: center;">
<strong>Converting One Channel, Manual Sample Start, TAD-Based Conversion Start</strong>&nbsp;</p>
<p class="Element10" style="text-align: center;">
<img src="Manual Sample Start and TAD based Conversion  Start.png" border="0" alt="" title="">&nbsp;</p><p class="Element10">
<strong>Auto Sample Start and TAD based Conversion Start or Free Running Sample Conversion</strong>&nbsp;</p>
<p class="Element10">
With the selection of ADC_CONVERSION_TRIGGER_INTERNAL_COUNT using <a href="18156.html">PLIB_ADC_ConversionTriggerSourceSelect</a> and Automatic sampling initiation using <a href="18198.html">PLIB_ADC_SampleAutoStartEnable</a> allows the ADC module to schedule sample/conversion sequences with no intervention by the user or other device resources. </p><p class="Element10" style="text-align: center;">
<strong>Converting One Channel, Auto-Sample Start, TAD-Based Conversion Start</strong>&nbsp;</p>
<p class="Element10" style="text-align: center;">
<img src="Auto Sample Start and TAD based Conversion Start.png" border="0" alt="" title="">&nbsp;</p><div class="Element15">
Event Trigger Conversion Start</div>
<p class="Element10">
It may be necessary to synchronize the end of sampling and the start of conversion with some other time event. The ADC module may use one of following as conversion trigger sequences:
<ul class="Element636">
<li class="Element606"><strong>External Pin Trigger: </strong>When ADC_CONVERSION_TRIGGER_INT0_TRANSITION is selected using <a href="18156.html">PLIB_ADC_ConversionTriggerSourceSelect</a></li>
<li class="Element606"><strong>General Purpose Timer Compare Match: </strong>When ADC_CONVERSION_TRIGGER_TMR3_COMPARE_MATCH or ADC_CONVERSION_TRIGGER_TMR5_COMPARE_MATCH is selected using <a href="18156.html">PLIB_ADC_ConversionTriggerSourceSelect</a></li>
</ul>Both of the event trigger conversion modes previously described can be used in combination with auto-sampling (<a href="18198.html">PLIB_ADC_SampleAutoStartEnable</a>) to cause the ADC to synchronize the sample conversion events to the trigger pulse source.&nbsp;</p>
<p class="Element10">
Users should note that some devices have additional conversion trigger sources as part of the enumeration <a href="02693.html">ADC_CONVERSION_TRIGGER_SOURCE</a>.</p><div class="Element15">
Other Operations During Conversion Process</div>
<p class="Element10">

<ul class="Element636">
<li class="Element606"><strong>Monitoring Conversion process: </strong>The status of the conversion can be obtained using <a href="18152.html">PLIB_ADC_ConversionHasCompleted</a></li>
<li class="Element606"><strong>Generating ADC Interrupt: </strong><a href="18199.html">PLIB_ADC_SamplesPerInterruptSelect</a> controls the generation of the ADC interrupt. To enable the interrupt it is also essential to enable the ADC interrupt.</li>
<li class="Element606"><strong>Aborting the Conversion: </strong>Calling <a href="18157.html">PLIB_ADC_Disable</a> will abort the current conversion. The result buffer is not updated with the partially completed ADC conversion sequence.</li>
</ul></p><div class="Element15">
Timing Details</div>
<p class="Element10">
TAD - The ADC module has a maximum rate at which conversions may be completed. An analog module clock, TAD, controls the conversion timing.&nbsp;</p>
<p class="Element10">
TSAMP - The time required to sample and hold the sampled analog signal, configured through <a href="18196.html">PLIB_ADC_SampleAcquisitionTimeSet</a>.&nbsp;</p>
<p class="Element10">
TCONV - The time required to convert the sampled analog signal, configured through <a href="18150.html">PLIB_ADC_ConversionClockSet</a>. The conversion clock can be verified using <a href="18149.html">PLIB_ADC_ConversionClockGet</a>. </p><div class="Element63">
<div class="TableDiv">
<table cellspacing="0" class="Table0">
<tr>
<td class="Element67" valign="top" width="10%" style="border:none;">
<div class="Element68">
<img src="Note Icon.png" border="0" alt="" title=""> <strong>Note:</strong>&nbsp;</div></td><td class="Element67" valign="top" width="90%" style="border:none;">
<div class="Element68">
Not all functionality is available on all devices. Refer to the <strong>&quot;Analog-to-Digital Converter (ADC)&quot;</strong> chapter in the specific device data sheet for availability.&nbsp;</div></td></tr></table></div></div>
</div>
</div>
</div>
<!-- End Page Content -->

<!-- Begin Page Footer -->
<div class="Element95">
<a href="16811.html">Volume V: MPLAB Harmony Framework Reference</a> &gt; <a href="17367.html">Peripheral Libraries Help</a> &gt; <a href="02681.html">ADC Peripheral Library</a> &gt; <a href="17403.html">Using the Library</a> &gt; <a href="17395.html">How the Library Works</a> &gt; <a href="17384.html">Controlling the Conversion Process</a></div>
<div class="Element93">
<table width="100%" cellspacing="0" cellpadding="0">
<tr><td width="100%">
<div class="Element3">
 MPLAB Harmony Help</div>
</td></tr><tr><td width="100%">
<div class="Element4">
<a href="contents.htm">Contents</a> | <a href="idx.html">Index</a> | <a href="04300.html">Home</a></div>
</td></tr><tr><td width="100%">
<div class="Element97">
<a href="mailto:docerrors@microchip.com&subject=MPLAB Harmony Documentation Feedback (Topic ID: PLIB ADC Controlling the Conversion Process Topic Title: Controlling the Conversion Process)&body=Thank you for your feedback! Please include a description of your feedback, and indicate whether you are reporting an an error in the documentation or an enhancement.">Documentation Feedback</a><br> <a href="http://support.microchip.com">Microchip Support</a></div>
</td></tr></table></div>

<!-- End Page Footer -->
</div>
</div>

<!-- End Client Area -->
</body></html>