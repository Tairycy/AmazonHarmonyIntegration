<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
<head>
<title>Module Deinitialize</title>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <meta name="generator" content="Doc-O-Matic" />
    <meta name="save" content="history" />
    <meta http-equiv="Content-Style-Type" content="text/css" />
    <link rel="STYLESHEET" href="default.css" type="text/css" />

<script type="text/javascript" src="scripts.js"></script>
</head>
<body class="Element700" onload="onBodyLoad();" onmousedown="onBodyMouseDown();">
<div id="persistenceDiv" style="display:none; behavior:url(#default#userData);"></div>

<!-- Begin Popups -->

<!-- End Popups -->

<!-- Begin Page Header -->
<div class="Element710" id="areafixed">
<div class="Element94">
<a href="13064.html">Volume IV: MPLAB Harmony Development</a> &gt; <a href="16810.html">MPLAB Harmony Driver Development Guide</a> &gt; <a href="11804.html">System Interface</a> &gt; <a href="11789.html">Module Deinitialize</a></div>
<div class="Element92">
<table width="100%" cellspacing="0" cellpadding="0">
<tr><td width="25%">
<div class="Element1">
MPLAB Harmony Help</div>
</td><td width="25%">
<div class="Element2">
<a href="contents.htm">Contents</a> | <a href="idx.html">Index</a> | <a href="04300.html">Home</a></div>
</td><td width="25%">
<div class="Element90">
<a href="11791.html">Previous</a> | <a href="11804.html">Up</a> | <a href="16690.html">Next</a></div>
</td><td width="25%">
<div class="Element96">
<a href="mailto:docerrors@microchip.com&subject=MPLAB Harmony Documentation Feedback (Topic ID: DRVDEVGUIDE Module Deinitialize Topic Title: Module Deinitialize)&body=Thank you for your feedback! Please include a description of your feedback, and indicate whether you are reporting an an error in the documentation or an enhancement.">Documentation Feedback</a><br> <a href="http://support.microchip.com">Microchip Support</a></div>
</td></tr></table><div class="Element5">
Module Deinitialize</div>
</div>
</div>

<!-- End Page Header -->

<!-- Begin Client Area -->
<div class="Element720" id="areascroll">
<div class="Element721">

<!-- Begin Page Content -->
<div class="Element58">
<a name="4465736372697074696F6E"></a><div class="Element11">
<div class="Element10">
<p class="Element10">
The function signature of a module’s deinitialize function is defined by a pointer data type that is defined by the system module interface header, in the <span class="Element146">&lt;install-dir&gt;/framework/system/common/<a href="23966.html">sys_module.h</a></span> file, as shown in the following example.&nbsp;</p>
<p class="Element10">
<strong>Example: Module Deinitialize Function Signature</strong> &nbsp;</p><div class="Element170">
<a href="#" onclick="CopyElementToClipboard('code00130');">Copy Code</a></div>
<div class="Element13"><div class="Element12" id="code00130"><pre class="Element12"><i><span style="color: #008000">/*************************************************************************
  Function:
    void (* SYS_MODULE_DEINITIALIZE_ROUTINE) (  SYS_MODULE_OBJ object )

  Summary:
    Pointer to a routine that deinitializes a system module.

  Description:
    This data type is a pointer to a routine that deinitializes a system
    module (driver, library, or application).

  Preconditions:
    The low-level board initialization must have (and will be) completed
    and the module's initialization function will have been called before
    the system will call the deinitialization function for any module.

  Parameters:
    object -  Handle to the module instance

  Returns:
    None.

  Remarks:
    If the module instance has to be used again, the module's &quot;initialize&quot;
    function must first be called.
*/</span></i>

<strong><span style="color: #000080">typedef</span></strong> <strong><span style="color: #000080">void</span></strong> (* SYS_MODULE_DEINITIALIZE_ROUTINE) (  SYS_MODULE_OBJ object );</pre></div></div>
<p class="Element10">
An implementation of a module’s deinitialize function might look like the following example.&nbsp;</p>
<p class="Element10">
<strong>Example: Sample Module Deinitialize Function</strong> &nbsp;</p><div class="Element170">
<a href="#" onclick="CopyElementToClipboard('code00131');">Copy Code</a></div>
<div class="Element13"><div class="Element12" id="code00131"><pre class="Element12"><strong><span style="color: #000080">void</span></strong> SAMPLE_Deinitialize ( SYS_MODULE_OBJ object )
{
    SAMPLE_MODULE_DATA *pObj  = (SAMPLE_MODULE_DATA *)object;

    pObj-&gt;dataNewIsValid        = <strong><span style="color: #000080">false</span></strong>;
    pObj-&gt;dataProcessedIsValid  = <strong><span style="color: #000080">false</span></strong>;
    pObj-&gt;status                = SYS_STATUS_UNINITIALIZED;

    <strong><span style="color: #000080">return</span></strong>;
}</pre></div></div>
<p class="Element10">
In the previous example, the deinitialize function for the sample module simply clears a few key flags and returns. For a simple module, where its other system and client interface routines take no action and return appropriate values when uninitialized, this may be all that is necessary. Other, more complex modules may need their state machines to go through a deinitialize sequence before the modules can be safely considered deinitialized. Such modules must return SYS_STATUS_BUSY from their status functions until the sequence has completed to signal to the system that it must continue calling the module’s tasks function(s). Once the system has called a module’s deinitialize function and received a SYS_STATUS_UNINITIALIZED status from its status function, it may stop calling the module’s state machine. However, it is safer to not make that assumption and place the module in an uninitialized state in which its state machine does nothing. See the <a href="11792.html">Module Tasks</a> section for details. </p><div class="Element63">
<div class="TableDiv">
<table cellspacing="0" class="Table0">
<tr>
<td class="Element67" valign="top" width="10%" style="border:none;">
<div class="Element68">
<img src="Note Icon.png" border="0" alt="" title=""> <strong>Note:</strong>&nbsp;</div></td><td class="Element67" valign="top" width="90%" style="border:none;">
<div class="Element68">
This function is optional. If a module is not intended to be deinitialized in normal operation (i.e., only initialized after a reset and always running thereafter) it does not need to implement the deinitialize function.&nbsp;</div></td></tr></table></div></div>
</div>
</div>
</div>
<!-- End Page Content -->

<!-- Begin Page Footer -->
<div class="Element95">
<a href="13064.html">Volume IV: MPLAB Harmony Development</a> &gt; <a href="16810.html">MPLAB Harmony Driver Development Guide</a> &gt; <a href="11804.html">System Interface</a> &gt; <a href="11789.html">Module Deinitialize</a></div>
<div class="Element93">
<table width="100%" cellspacing="0" cellpadding="0">
<tr><td width="100%">
<div class="Element3">
 MPLAB Harmony Help</div>
</td></tr><tr><td width="100%">
<div class="Element4">
<a href="contents.htm">Contents</a> | <a href="idx.html">Index</a> | <a href="04300.html">Home</a></div>
</td></tr><tr><td width="100%">
<div class="Element97">
<a href="mailto:docerrors@microchip.com&subject=MPLAB Harmony Documentation Feedback (Topic ID: DRVDEVGUIDE Module Deinitialize Topic Title: Module Deinitialize)&body=Thank you for your feedback! Please include a description of your feedback, and indicate whether you are reporting an an error in the documentation or an enhancement.">Documentation Feedback</a><br> <a href="http://support.microchip.com">Microchip Support</a></div>
</td></tr></table></div>

<!-- End Page Footer -->
</div>
</div>

<!-- End Client Area -->
</body></html>