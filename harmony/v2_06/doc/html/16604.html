<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
<head>
<title>hconfig Development Guidelines</title>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <meta name="generator" content="Doc-O-Matic" />
    <meta name="save" content="history" />
    <meta http-equiv="Content-Style-Type" content="text/css" />
    <link rel="STYLESHEET" href="default.css" type="text/css" />

<script type="text/javascript" src="scripts.js"></script>
</head>
<body class="Element700" onload="onBodyLoad();" onmousedown="onBodyMouseDown();">
<div id="persistenceDiv" style="display:none; behavior:url(#default#userData);"></div>

<!-- Begin Popups -->

<!-- End Popups -->

<!-- Begin Page Header -->
<div class="Element710" id="areafixed">
<div class="Element94">
<a href="16809.html">Volume III: MPLAB Harmony Configurator (MHC)</a> &gt; <a href="07406.html">MPLAB Harmony Configurator Developer's Guide</a> &gt; <a href="16593.html">Adding New Libraries</a> &gt; <a href="16604.html">hconfig Development Guidelines</a></div>
<div class="Element92">
<table width="100%" cellspacing="0" cellpadding="0">
<tr><td width="25%">
<div class="Element1">
MPLAB Harmony Help</div>
</td><td width="25%">
<div class="Element2">
<a href="contents.htm">Contents</a> | <a href="idx.html">Index</a> | <a href="04300.html">Home</a></div>
</td><td width="25%">
<div class="Element90">
<a href="16632.html">Previous</a> | <a href="16593.html">Up</a> | <a href="16598.html">Next</a></div>
</td><td width="25%">
<div class="Element96">
<a href="mailto:docerrors@microchip.com&subject=MPLAB Harmony Documentation Feedback (Topic ID: MHC DEV GUIDE hconfig Development Guidelines Topic Title: hconfig Development Guidelines)&body=Thank you for your feedback! Please include a description of your feedback, and indicate whether you are reporting an an error in the documentation or an enhancement.">Documentation Feedback</a><br> <a href="http://support.microchip.com">Microchip Support</a></div>
</td></tr></table><div class="Element5">
hconfig Development Guidelines</div>
</div>
</div>

<!-- End Page Header -->

<!-- Begin Client Area -->
<div class="Element720" id="areascroll">
<div class="Element721">

<!-- Begin Page Content -->
<div class="Element58">
<a name="4465736372697074696F6E"></a><div class="Element11">
<div class="Element10">
<p class="Element10">
The following conventions need to be followed when developing MPLAB Harmony hconfig files:</p>
<ul class="Element630">
<li class="Element600">HAVE_&lt;peripheral&gt; configuration options are used to indicate whether or not a specific peripheral is supported on the device. These options are non-visible, Boolean, and primarily located in <span class="Element146">framework.hconfig</span>. They are set to ‘y’ using the &quot;select&quot; keyword in the processor-specific peripheral hconfig files. The processor-specific peripheral hconfig files are generated automatically from processor-specific PLIB header files.</li>
<li class="Element600">All hconfig files shall be placed in a &quot;config&quot; folder in the MPLAB Harmony framework tree. The hconfig files shall &quot;source&quot; other hconfig files lower in the framework hierarchy. For example the framework hconfig file sources an hconfig file for each folder in the framework directory. The driver hconfig file sources an hconfig file for every driver in the framework/driver directory, and so on.</li>
<li class="Element600">The keyword &quot;select&quot; shall not be used with visible config options. Once something is selected using the &quot;select&quot; keyword, it is always selected, regardless of whether or not it is checked in the MHC menu.</li>
<li class="Element600">When sourcing an hconfig file within an ifblock, the file is always sourced, and the ifblock dependencies are applied to all items within the sourced file</li>
<li class="Element600">Adding the keyword &quot;exclusive&quot; to an enum definition prevents the same element from being assigned to more than one config option</li>
<li class="Element600">There can be only one &quot;mainmenu&quot;. The top-level hconfig file containing the mainmenu is generated by MHC and placed in the application firmware directory. The template for the top-level hconfig file is located in <span class="Element146">utilities/mhc/config</span>.</li>
<li class="Element600">It is often useful to have modules enable each other. The mechanism for this is to use the &quot;select&quot; keyword within one module to select a non-visible config option within another module. The non-visible config option is then used as a dependency for the first module. By convention, the non-visible option is named <span class="Element146">USE_&lt;module&gt;_NEEDED</span>. For example, the Timer System Service requires a Timer Driver instance. The Timer Driver hconfig contains:</li>
</ul><div class="Element170">
<a href="#" onclick="CopyElementToClipboard('code00054');">Copy Code</a></div>
<div class="Element13"><div class="Element12" id="code00054"><pre class="Element12">  config USE_DRV_TMR_NEEDED
      <strong><span style="color: #000080">bool</span></strong>
  config USE_DRV_TMR
      depends on HAVE_TMR
      <strong><span style="color: #000080">bool</span></strong> &quot;Use Timer Driver?&quot;
      <strong><span style="color: #000080">default</span></strong> y <strong><span style="color: #000080">if</span></strong> USE_DRV_TMR_NEEDED
      <strong><span style="color: #000080">default</span></strong> n</pre></div></div>
<p class="Element10">
and the timer system service hconfig contains: </p><div class="Element170">
<a href="#" onclick="CopyElementToClipboard('code00055');">Copy Code</a></div>
<div class="Element13"><div class="Element12" id="code00055"><pre class="Element12">  config USE_SYS_TMR
      <strong><span style="color: #000080">bool</span></strong> &quot;Use Timer System Service?&quot;
      select USE_DRV_TMR_NEEDED
      <strong><span style="color: #000080">default</span></strong> y <strong><span style="color: #000080">if</span></strong> USE_SYS_TMR_NEEDED
      <strong><span style="color: #000080">default</span></strong> n</pre></div></div>
<p class="Element10">
Selecting the Timer System Service automatically selects the Timer Driver, by selecting <span class="Element146">USE_DRV_TMR_NEEDED</span>, which (if selected) sets the <span class="Element146">USE_DRV_TMR</span> default to 'y'.</p>
<ul class="Element630">
<li class="Element600">When multiple default values are given to a config option, the first one that evaluates to <i>true</i> becomes the config option value</li>
<li class="Element600">By convention, the selection of a module is made in the menu with the menu text &quot;Use &lt;module&gt;?&quot; (e.g., &quot;Use Timer Driver?&quot;)</li>
<li class="Element600">Modules should default to not-used unless selected by another module</li>
<li class="Element600">Visible config options should follow MPLAB Harmony naming conventions</li>
<li class="Element600">When selecting module features, menu entries should include a feature rather than exclude, and enable rather than disable. Default for all visible config options should be excluded or disabled, unless needed by another module or enabled by dependencies.</li>
<li class="Element600">All visible config options must have an associated help tag, and must be documented in the Help documentation</li>
<li class="Element600">Visible config options and comments must capitalize each word in menu text</li>
<li class="Element600">Integer config options should have a range whenever possible</li>
</ul></div>
</div>
</div>
<!-- End Page Content -->

<!-- Begin Page Footer -->
<div class="Element95">
<a href="16809.html">Volume III: MPLAB Harmony Configurator (MHC)</a> &gt; <a href="07406.html">MPLAB Harmony Configurator Developer's Guide</a> &gt; <a href="16593.html">Adding New Libraries</a> &gt; <a href="16604.html">hconfig Development Guidelines</a></div>
<div class="Element93">
<table width="100%" cellspacing="0" cellpadding="0">
<tr><td width="100%">
<div class="Element3">
 MPLAB Harmony Help</div>
</td></tr><tr><td width="100%">
<div class="Element4">
<a href="contents.htm">Contents</a> | <a href="idx.html">Index</a> | <a href="04300.html">Home</a></div>
</td></tr><tr><td width="100%">
<div class="Element97">
<a href="mailto:docerrors@microchip.com&subject=MPLAB Harmony Documentation Feedback (Topic ID: MHC DEV GUIDE hconfig Development Guidelines Topic Title: hconfig Development Guidelines)&body=Thank you for your feedback! Please include a description of your feedback, and indicate whether you are reporting an an error in the documentation or an enhancement.">Documentation Feedback</a><br> <a href="http://support.microchip.com">Microchip Support</a></div>
</td></tr></table></div>

<!-- End Page Footer -->
</div>
</div>

<!-- End Client Area -->
</body></html>