<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
<head>
<title>SYS_CLK_ReferenceClockSetup Function</title>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <meta name="generator" content="Doc-O-Matic" />
    <meta name="save" content="history" />
    <meta http-equiv="Content-Style-Type" content="text/css" />
    <link rel="STYLESHEET" href="default.css" type="text/css" />

<script type="text/javascript" src="scripts.js"></script>
</head>
<body class="Element700" onload="onBodyLoad();" onmousedown="onBodyMouseDown();">
<div id="persistenceDiv" style="display:none; behavior:url(#default#userData);"></div>

<!-- Begin Popups -->

<!-- End Popups -->

<!-- Begin Page Header -->
<div class="Element710" id="areafixed">
<div class="Element94">
<a href="16811.html">Volume V: MPLAB Harmony Framework Reference</a> &gt; <a href="24419.html">System Service Libraries Help</a> &gt; <a href="17337.html">Clock System Service Library</a> &gt; <a href="24230.html">Library Interface</a> &gt; c) Reference Clock Functions &gt; <a href="23519.html">SYS_CLK_ReferenceClockSetup Function</a></div>
<div class="Element92">
<table width="100%" cellspacing="0" cellpadding="0">
<tr><td width="25%">
<div class="Element1">
MPLAB Harmony Help</div>
</td><td width="25%">
<div class="Element2">
<a href="contents.htm">Contents</a> | <a href="idx.html">Index</a> | <a href="04300.html">Home</a></div>
</td><td width="25%">
<div class="Element90">
<a href="23515.html">Previous</a> | <a href="24230.html">Up</a> | <a href="23521.html">Next</a></div>
</td><td width="25%">
<div class="Element96">
<a href="mailto:docerrors@microchip.com&subject=MPLAB Harmony Documentation Feedback (Topic ID: SYS_CLK_ReferenceClockSetup@CLK_BUSES_REFERENCE@SYS_CLK_REFERENCE_SETUP * Topic Title: SYS_CLK_ReferenceClockSetup Function)&body=Thank you for your feedback! Please include a description of your feedback, and indicate whether you are reporting an an error in the documentation or an enhancement.">Documentation Feedback</a><br> <a href="http://support.microchip.com">Microchip Support</a></div>
</td></tr></table><div class="Element5">
SYS_CLK_ReferenceClockSetup Function</div>
</div>
</div>

<!-- End Page Header -->

<!-- Begin Client Area -->
<div class="Element720" id="areascroll">
<div class="Element721">

<!-- Begin Page Content -->
<div class="Element58">
<a name="43"></a><div class="Element99">
C</div>
<div class="Element101"><div class="Element100"><pre class="Element100"><strong><span style="color: #000080">void</span></strong> <strong><span style="color: #000000">SYS_CLK_ReferenceClockSetup</span></strong>(
    <a href="06840.html">CLK_BUSES_REFERENCE</a> <strong><span style="color: #000000">referenceBus</span></strong>, 
    <a href="23516.html">SYS_CLK_REFERENCE_SETUP</a> * <strong><span style="color: #000000">refSetup</span></strong>
);</pre></div></div>
<a name="4465736372697074696F6E"></a><div class="Element14">
Description</div>
<div class="Element11">
<div class="Element10">
<p class="Element10">
This function sets up the clock multipliers and divisors to achieve requested Reference clock frequency. Initially it checks the difference between the requested value and possible value. If it is not within '<a href="23494.html">SYS_CLK_CONFIG_FREQ_ERROR_LIMIT</a>', the registers values will not be changed and a value '0' will be returned to let user know that the operation was unsuccessful. If the value requested is acceptable, then it writes to the oscillator registers and return with the newly set frequency. If the operation is a failure, SYS_CLK_ReferenceClosestFrequencyGet function will give the closest possible frequency. If the closest possible value is acceptable, user can reconfigure with that value.</p></div>
</div>
<a name="507265636F6E646974696F6E73"></a><div class="Element14">
Preconditions</div>
<div class="Element11">
<div class="Element10">
<p class="Element10">
The <a href="23513.html">SYS_CLK_Initialize</a> function should be called before calling this API.</p></div>
</div>
<a name="506172616D6574657273"></a><div class="Element14">
Parameters</div>
<div class="Element11">
<div class="Element10">
<div class="Element312">
<div class="TableDiv">
<table cellspacing="0" class="Table4">
<tr>
<td class="Element300" valign="top" width="35%">
<div class="Element301">
Parameters&nbsp;</div></td><td class="Element304" valign="top" width="65%">
<div class="Element305">
Description&nbsp;</div></td></tr><tr>
<td class="Element302" valign="top" width="35%">
<div class="Element303">
referenceBus&nbsp;</div></td><td class="Element306" valign="top" width="65%">
<div class="Element307">
Reference clock bus selection. One of the possible value from <a href="06840.html">CLK_BUSES_REFERENCE</a> enum. For devices that do not have multiple clock channels for Reference clock, CLK_BUS_REFERENCE_1 should be the selection.&nbsp;</div></td></tr><tr>
<td class="Element302" valign="top" width="35%">
<div class="Element303">
refSetup&nbsp;</div></td><td class="Element306" valign="top" width="65%">
<div class="Element307">
A structure which holds the reference oscillator configuration.&nbsp;</div></td></tr></table></div></div>
</div>
</div>
<a name="52657475726E73"></a><div class="Element14">
Returns</div>
<div class="Element11">
<div class="Element10">
<p class="Element10">
None.</p></div>
</div>
<a name="52656D61726B73"></a><div class="Element14">
Remarks</div>
<div class="Element11">
<div class="Element10">
<p class="Element10">
This function is supported on the following Microchip device families:
<ul class="Element630">
<li class="Element600">PIC32M</li>
</ul>&nbsp;</p>
<p class="Element10">
Most devices do not have multiple reference clock buses. In those instances, pass CLK_BUS_REFERENCE_1 as the bus number.</p></div>
</div>
<a name="4578616D706C65"></a><div class="Element14">
Example</div>
<div class="Element11">
<div class="Element10">
<div class="Element170">
<a href="#" onclick="CopyElementToClipboard('code03823');">Copy Code</a></div>
<div class="Element13"><div class="Element12" id="code03823"><pre class="Element12"><a href="23516.html">SYS_CLK_REFERENCE_SETUP</a> refSetup;

refSetup.suspendInSleep = <strong><span style="color: #000080">true</span></strong>;
refSetup.stopInIdle = <strong><span style="color: #000080">true</span></strong>;

SYS_CLK_ReferenceClockSetup ( CLK_BUS_REFERENCE_3, &amp;refSetup );</pre></div></div>
</div>
</div>
</div>
<!-- End Page Content -->

<!-- Begin Page Footer -->
<div class="Element95">
<a href="16811.html">Volume V: MPLAB Harmony Framework Reference</a> &gt; <a href="24419.html">System Service Libraries Help</a> &gt; <a href="17337.html">Clock System Service Library</a> &gt; <a href="24230.html">Library Interface</a> &gt; c) Reference Clock Functions &gt; <a href="23519.html">SYS_CLK_ReferenceClockSetup Function</a></div>
<div class="Element93">
<table width="100%" cellspacing="0" cellpadding="0">
<tr><td width="100%">
<div class="Element3">
 MPLAB Harmony Help</div>
</td></tr><tr><td width="100%">
<div class="Element4">
<a href="contents.htm">Contents</a> | <a href="idx.html">Index</a> | <a href="04300.html">Home</a></div>
</td></tr><tr><td width="100%">
<div class="Element97">
<a href="mailto:docerrors@microchip.com&subject=MPLAB Harmony Documentation Feedback (Topic ID: SYS_CLK_ReferenceClockSetup@CLK_BUSES_REFERENCE@SYS_CLK_REFERENCE_SETUP * Topic Title: SYS_CLK_ReferenceClockSetup Function)&body=Thank you for your feedback! Please include a description of your feedback, and indicate whether you are reporting an an error in the documentation or an enhancement.">Documentation Feedback</a><br> <a href="http://support.microchip.com">Microchip Support</a></div>
</td></tr></table></div>

<!-- End Page Footer -->
</div>
</div>

<!-- End Client Area -->
</body></html>