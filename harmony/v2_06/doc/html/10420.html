<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
<head>
<title>DRV_MTCH6303_TOUCH_AddMessageCommandWrite Function</title>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <meta name="generator" content="Doc-O-Matic" />
    <meta name="save" content="history" />
    <meta http-equiv="Content-Style-Type" content="text/css" />
    <link rel="STYLESHEET" href="default.css" type="text/css" />

<script type="text/javascript" src="scripts.js"></script>
</head>
<body class="Element700" onload="onBodyLoad();" onmousedown="onBodyMouseDown();">
<div id="persistenceDiv" style="display:none; behavior:url(#default#userData);"></div>

<!-- Begin Popups -->

<!-- End Popups -->

<!-- Begin Page Header -->
<div class="Element710" id="areafixed">
<div class="Element94">
<a href="16811.html">Volume V: MPLAB Harmony Framework Reference</a> &gt; <a href="13069.html">Driver Libraries Help</a> &gt; <a href="13090.html">Touch Driver Libraries Help</a> &gt; <a href="16819.html">MTCH6303 Touch Driver Library</a> &gt; <a href="08667.html">Library Interface</a> &gt; c) Read and Write Functions &gt; <a href="10420.html">DRV_MTCH6303_TOUCH_AddMessageCommandWrite Function</a></div>
<div class="Element92">
<table width="100%" cellspacing="0" cellpadding="0">
<tr><td width="25%">
<div class="Element1">
MPLAB Harmony Help</div>
</td><td width="25%">
<div class="Element2">
<a href="contents.htm">Contents</a> | <a href="idx.html">Index</a> | <a href="04300.html">Home</a></div>
</td><td width="25%">
<div class="Element90">
<a href="10398.html">Previous</a> | <a href="08667.html">Up</a> | <a href="10421.html">Next</a></div>
</td><td width="25%">
<div class="Element96">
<a href="mailto:docerrors@microchip.com&subject=MPLAB Harmony Documentation Feedback (Topic ID: DRV_MTCH6303_TOUCH_AddMessageCommandWrite@DRV_MTCH6303_TOUCH_BUFFER_HANDLE *@DRV_MTCH6303_TOUCH_MESSAGE *@size_t Topic Title: DRV_MTCH6303_TOUCH_AddMessageCommandWrite Function)&body=Thank you for your feedback! Please include a description of your feedback, and indicate whether you are reporting an an error in the documentation or an enhancement.">Documentation Feedback</a><br> <a href="http://support.microchip.com">Microchip Support</a></div>
</td></tr></table><div class="Element5">
DRV_MTCH6303_TOUCH_AddMessageCommandWrite Function</div>
</div>
</div>

<!-- End Page Header -->

<!-- Begin Client Area -->
<div class="Element720" id="areascroll">
<div class="Element721">

<!-- Begin Page Content -->
<div class="Element58">
<a name="43"></a><div class="Element99">
C</div>
<div class="Element101"><div class="Element100"><pre class="Element100"><strong><span style="color: #000080">void</span></strong> <strong><span style="color: #000000">DRV_MTCH6303_TOUCH_AddMessageCommandWrite</span></strong>(
    <a href="10428.html">DRV_MTCH6303_TOUCH_BUFFER_HANDLE</a> * <strong><span style="color: #000000">bufferHandle</span></strong>, 
    <a href="10440.html">DRV_MTCH6303_TOUCH_MESSAGE</a> * <strong><span style="color: #000000">messageCmd</span></strong>, 
    size_t <strong><span style="color: #000000">messageSize</span></strong>
);</pre></div></div>
<a name="4465736372697074696F6E"></a><div class="Element14">
Description</div>
<div class="Element11">
<div class="Element10">
<p class="Element10">
This function schedules a non-blocking command message write request to write command message to MTCH6303. The function returns with a valid buffer handle in the bufferHandle argument if the register command message write request was scheduled successfully. The function adds the request to the hardware instance queue and returns immediately. While the request is in the queue, the application message buffer is owned by the driver and should not be modified. The function returns <a href="10429.html">DRV_MTCH6303_TOUCH_BUFFER_HANDLE_INVALID</a> in the bufferHandle argument:
<ul class="Element636">
<li class="Element606">if a buffer could not be allocated to the request</li>
<li class="Element606">if the input buffer pointer is NULL</li>
<li class="Element606">if the buffer size is 0 </li>
<li class="Element606">if the message write queue size is full or queue depth is insufficient.</li>
<li class="Element606">if the driver handle is invalid </li>
</ul>&nbsp;</p>
<p class="Element10">
If the requesting client registered an event callback with the driver, the driver will issue a DRV_MTCH6303_TOUCH_BUFFER_EVENT_COMPLETE event if the buffer was processed successfully or DRV_MTCH6303_TOUCH_BUFFER_EVENT_ERROR event if the buffer was not processed successfully. A event handler is called on buffer event complete where the application command message is written to MTCH6303.</p></div>
</div>
<a name="507265636F6E646974696F6E73"></a><div class="Element14">
Preconditions</div>
<div class="Element11">
<div class="Element10">
<p class="Element10">
The <a href="10416.html">DRV_MTCH6303_Initialize</a> routine must have been called and the <a href="10418.html">DRV_MTCH6303_Status</a> must have returned SYS_STATUS_READY.&nbsp;</p>
<p class="Element10">
<a href="10417.html">DRV_MTCH6303_Open</a> must have been called to obtain a valid opened device handle.&nbsp;</p></div>
</div>
<a name="506172616D6574657273"></a><div class="Element14">
Parameters</div>
<div class="Element11">
<div class="Element10">
<div class="Element312">
<div class="TableDiv">
<table cellspacing="0" class="Table4">
<tr>
<td class="Element300" valign="top" width="35%">
<div class="Element301">
Parameters&nbsp;</div></td><td class="Element304" valign="top" width="65%">
<div class="Element305">
Description&nbsp;</div></td></tr><tr>
<td class="Element302" valign="top" width="35%">
<div class="Element303">
bufferHandle&nbsp;</div></td><td class="Element306" valign="top" width="65%">
<div class="Element307">
Pointer to an argument that will contain the return buffer handle.<br>&nbsp;</div></td></tr><tr>
<td class="Element302" valign="top" width="35%">
<div class="Element303">
messageCmd&nbsp;</div></td><td class="Element306" valign="top" width="65%">
<div class="Element307">
command message to write to MTCH6303.<br>&nbsp;</div></td></tr><tr>
<td class="Element302" valign="top" width="35%">
<div class="Element303">
messageSize&nbsp;</div></td><td class="Element306" valign="top" width="65%">
<div class="Element307">
command message size. It includes message header and payload size.&nbsp;</div></td></tr></table></div></div>
</div>
</div>
<a name="52657475726E73"></a><div class="Element14">
Returns</div>
<div class="Element11">
<div class="Element10">
<p class="Element10">
None.</p></div>
</div>
<a name="52656D61726B73"></a><div class="Element14">
Remarks</div>
<div class="Element11">
<div class="Element10">
<p class="Element10">
None.</p></div>
</div>
<a name="4578616D706C65"></a><div class="Element14">
Example</div>
<div class="Element11">
<div class="Element10">
<div class="Element170">
<a href="#" onclick="CopyElementToClipboard('code00988');">Copy Code</a></div>
<div class="Element13"><div class="Element12" id="code00988"><pre class="Element12">
MY_APP_OBJ myAppObj;    
<a href="10440.html">DRV_MTCH6303_TOUCH_MESSAGE</a> messageCommand;
<a href="10428.html">DRV_MTCH6303_TOUCH_BUFFER_HANDLE</a> bufferHandle;

<i><span style="color: #008000">// Client registers an event handler with driver</span></i>

<a href="10430.html">DRV_MTCH6303_TOUCH_BufferEventHandlerSet</a>( APP_MTCH6303BufferEventHandler, 
                                          (uintptr_t)&amp;myAppObj);

DRV_MTCH6303_TOUCH_AddMessageCommandWrite( &amp;bufferHandle, 
                                           &amp;messageCommand,
                                           MY_MESSAGE_SIZE );

<strong><span style="color: #000080">if</span></strong>(<a href="10429.html">DRV_MTCH6303_TOUCH_BUFFER_HANDLE_INVALID</a> == bufferHandle)
{
    <i><span style="color: #008000">// Error handling here</span></i>
}

<i><span style="color: #008000">// Event is received when</span></i>
<i><span style="color: #008000">// the buffer is processed.</span></i>

<strong><span style="color: #000080">void</span></strong> APP_MTCH6303BufferEventHandler( <a href="10423.html">DRV_MTCH6303_TOUCH_BUFFER_EVENT</a> event, 
                                     <a href="10428.html">DRV_MTCH6303_TOUCH_BUFFER_HANDLE</a> bufferHandle,
                                     uintptr_t contextHandle )
{
    <i><span style="color: #008000">// contextHandle points to myAppObj.</span></i>

    <strong><span style="color: #000080">switch</span></strong>(event)
    {
        <strong><span style="color: #000080">case</span></strong> DRV_MTCH6303_TOUCH_BUFFER_EVENT_COMPLETE:

            <i><span style="color: #008000">// This means the data was transferred. </span></i>
            <strong><span style="color: #000080">break</span></strong>;
        
        <strong><span style="color: #000080">case</span></strong> DRV_MTCH6303_TOUCH_BUFFER_EVENT_ERROR:

            <i><span style="color: #008000">// Error handling here.</span></i>

            <strong><span style="color: #000080">break</span></strong>;

        <strong><span style="color: #000080">default</span></strong>:
            <strong><span style="color: #000080">break</span></strong>;
    }
}
</pre></div></div>
</div>
</div>
</div>
<!-- End Page Content -->

<!-- Begin Page Footer -->
<div class="Element95">
<a href="16811.html">Volume V: MPLAB Harmony Framework Reference</a> &gt; <a href="13069.html">Driver Libraries Help</a> &gt; <a href="13090.html">Touch Driver Libraries Help</a> &gt; <a href="16819.html">MTCH6303 Touch Driver Library</a> &gt; <a href="08667.html">Library Interface</a> &gt; c) Read and Write Functions &gt; <a href="10420.html">DRV_MTCH6303_TOUCH_AddMessageCommandWrite Function</a></div>
<div class="Element93">
<table width="100%" cellspacing="0" cellpadding="0">
<tr><td width="100%">
<div class="Element3">
 MPLAB Harmony Help</div>
</td></tr><tr><td width="100%">
<div class="Element4">
<a href="contents.htm">Contents</a> | <a href="idx.html">Index</a> | <a href="04300.html">Home</a></div>
</td></tr><tr><td width="100%">
<div class="Element97">
<a href="mailto:docerrors@microchip.com&subject=MPLAB Harmony Documentation Feedback (Topic ID: DRV_MTCH6303_TOUCH_AddMessageCommandWrite@DRV_MTCH6303_TOUCH_BUFFER_HANDLE *@DRV_MTCH6303_TOUCH_MESSAGE *@size_t Topic Title: DRV_MTCH6303_TOUCH_AddMessageCommandWrite Function)&body=Thank you for your feedback! Please include a description of your feedback, and indicate whether you are reporting an an error in the documentation or an enhancement.">Documentation Feedback</a><br> <a href="http://support.microchip.com">Microchip Support</a></div>
</td></tr></table></div>

<!-- End Page Footer -->
</div>
</div>

<!-- End Client Area -->
</body></html>