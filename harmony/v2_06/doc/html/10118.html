<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
<head>
<title>DRV_I2C_SlaveCallbackSet Function</title>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <meta name="generator" content="Doc-O-Matic" />
    <meta name="save" content="history" />
    <meta http-equiv="Content-Style-Type" content="text/css" />
    <link rel="STYLESHEET" href="default.css" type="text/css" />

<script type="text/javascript" src="scripts.js"></script>
</head>
<body class="Element700" onload="onBodyLoad();" onmousedown="onBodyMouseDown();">
<div id="persistenceDiv" style="display:none; behavior:url(#default#userData);"></div>

<!-- Begin Popups -->

<!-- End Popups -->

<!-- Begin Page Header -->
<div class="Element710" id="areafixed">
<div class="Element94">
<a href="16811.html">Volume V: MPLAB Harmony Framework Reference</a> &gt; <a href="13069.html">Driver Libraries Help</a> &gt; <a href="13729.html">I2C Driver Library Help</a> &gt; <a href="08587.html">Library Interface</a> &gt; e) Miscellaneous Functions &gt; <a href="10118.html">DRV_I2C_SlaveCallbackSet Function</a></div>
<div class="Element92">
<table width="100%" cellspacing="0" cellpadding="0">
<tr><td width="25%">
<div class="Element1">
MPLAB Harmony Help</div>
</td><td width="25%">
<div class="Element2">
<a href="contents.htm">Contents</a> | <a href="idx.html">Index</a> | <a href="04300.html">Home</a></div>
</td><td width="25%">
<div class="Element90">
<a href="10116.html">Previous</a> | <a href="08587.html">Up</a> | <a href="10093.html">Next</a></div>
</td><td width="25%">
<div class="Element96">
<a href="mailto:docerrors@microchip.com&subject=MPLAB Harmony Documentation Feedback (Topic ID: DRV_I2C_SlaveCallbackSet@DRV_HANDLE@DRV_I2C_CallBack@uintptr_t Topic Title: DRV_I2C_SlaveCallbackSet Function)&body=Thank you for your feedback! Please include a description of your feedback, and indicate whether you are reporting an an error in the documentation or an enhancement.">Documentation Feedback</a><br> <a href="http://support.microchip.com">Microchip Support</a></div>
</td></tr></table><div class="Element5">
DRV_I2C_SlaveCallbackSet Function</div>
</div>
</div>

<!-- End Page Header -->

<!-- Begin Client Area -->
<div class="Element720" id="areascroll">
<div class="Element721">

<!-- Begin Page Content -->
<div class="Element58">
<a name="43"></a><div class="Element99">
C</div>
<div class="Element101"><div class="Element100"><pre class="Element100"><strong><span style="color: #000080">void</span></strong> <strong><span style="color: #000000">DRV_I2C_SlaveCallbackSet</span></strong>(
    <strong><span style="color: #000080">const</span></strong> <a href="10088.html">DRV_HANDLE</a> <strong><span style="color: #000000">handle</span></strong>, 
    <strong><span style="color: #000080">const</span></strong> DRV_I2C_CallBack <strong><span style="color: #000000">callback</span></strong>, 
    <strong><span style="color: #000080">const</span></strong> uintptr_t <strong><span style="color: #000000">context</span></strong>
);</pre></div></div>
<a name="4465736372697074696F6E"></a><div class="Element14">
Description</div>
<div class="Element11">
<div class="Element10">
<p class="Element10">
This function allows a client to identify a Slave Callback function for the driver to call back when drivers needs to initiate a read or write operation. When the I2C Slave driver receives a read or write event from master the callback is called to initiate the user defined action. The callback should be set before the master requests for read or write operations. The event handler once set, persists until the client closes the driver or sets another event handler.&nbsp;</p>
<p class="Element10">
In Slave mode, a callback event is registered to let the application know that master has requested for either read or write operation. DRV_I2C_BUFFER_SLAVE_READ_REQUESTED is set when the master sends data and wants slave to read. DRV_I2C_BUFFER_SLAVE_WRITE_REQUESTED is set when the master tries to read data from slave and wants slave to send the data.</p></div>
</div>
<a name="506172616D6574657273"></a><div class="Element14">
Parameters</div>
<div class="Element11">
<div class="Element10">
<div class="Element312">
<div class="TableDiv">
<table cellspacing="0" class="Table4">
<tr>
<td class="Element300" valign="top" width="35%">
<div class="Element301">
Parameters&nbsp;</div></td><td class="Element304" valign="top" width="65%">
<div class="Element305">
Description&nbsp;</div></td></tr><tr>
<td class="Element302" valign="top" width="35%">
<div class="Element303">
handle&nbsp;</div></td><td class="Element306" valign="top" width="65%">
<div class="Element307">
A valid open-instance handle, returned from the driver's open routine<br>&nbsp;</div></td></tr><tr>
<td class="Element302" valign="top" width="35%">
<div class="Element303">
callback&nbsp;</div></td><td class="Element306" valign="top" width="65%">
<div class="Element307">
pointer to the callback function.<br>&nbsp;</div></td></tr><tr>
<td class="Element302" valign="top" width="35%">
<div class="Element303">
context&nbsp;</div></td><td class="Element306" valign="top" width="65%">
<div class="Element307">
The value of parameter will be passed back to the client unchanged, when the callback function is called. It can be used to identify any client specific data&nbsp;</div></td></tr></table></div></div>
</div>
</div>
<a name="52657475726E73"></a><div class="Element14">
Returns</div>
<div class="Element11">
<div class="Element10">
<p class="Element10">
None&nbsp;</p>
<p class="Element10">
&nbsp;</p><div class="Element170">
<a href="#" onclick="CopyElementToClipboard('code00642');">Copy Code</a></div>
<div class="Element13"><div class="Element12" id="code00642"><pre class="Element12">
 <strong><span style="color: #000080">#define</span></strong> APP_I2C_BUFFER_SIZE      10

 <strong><span style="color: #000080">void</span></strong> APP_I2C_SlaveTransferCallback( DRV_I2C_BUFFER_EVENT event, <strong><span style="color: #000080">void</span></strong> * context );

 uint8_t slaveBuffer[ APP_I2C_BUFFER_SIZE ];

 <a href="10088.html">DRV_HANDLE</a> drvI2CHandle;

 <strong><span style="color: #000080">void</span></strong> APP_I2C_SlaveTransferCallback( DRV_I2C_BUFFER_EVENT event, <strong><span style="color: #000080">void</span></strong> * context )
 {
     <strong><span style="color: #000080">switch</span></strong> (event)
     {
         <strong><span style="color: #000080">case</span></strong> DRV_I2C_BUFFER_SLAVE_READ_REQUESTED:
         {
             appData.bufferReceive = <a href="10117.html">DRV_I2C_Receive</a>( drvI2CHandle,
                                                      0,
                                                      &amp;slaveBuffer[0],
                                                      APP_I2C_BUFFER_SIZE,
                                                      NULL );
             <strong><span style="color: #000080">break</span></strong>;
         }

         <strong><span style="color: #000080">case</span></strong> DRV_I2C_BUFFER_SLAVE_WRITE_REQUESTED:
         {
             appData.bufferTransmit = <a href="10122.html">DRV_I2C_Transmit</a> ( drvI2CHandle,
                                                         0,
                                                         &amp;slaveBuffer[0],
                                                         APP_I2C_BUFFER_SIZE,
                                                         NULL );
             <strong><span style="color: #000080">break</span></strong>;
         }

         <strong><span style="color: #000080">default</span></strong>:
         {
             <strong><span style="color: #000080">break</span></strong>;
         }
     }

     <strong><span style="color: #000080">return</span></strong>;
 }

 <i><span style="color: #008000">// Opens an instance of I2C driver</span></i>
 drvI2Chandle = <a href="10114.html">DRV_I2C_Open</a>( DRV_I2C_INDEX_0, DRV_IO_INTENT_READWRITE );

 <i><span style="color: #008000">// Set the operation callback</span></i>
 DRV_I2C_SlaveCallbackSet( drvI2Chandle, APP_I2C_SlaveTransferCallback, 0);
</pre></div></div>
</div>
</div>
</div>
<!-- End Page Content -->

<!-- Begin Page Footer -->
<div class="Element95">
<a href="16811.html">Volume V: MPLAB Harmony Framework Reference</a> &gt; <a href="13069.html">Driver Libraries Help</a> &gt; <a href="13729.html">I2C Driver Library Help</a> &gt; <a href="08587.html">Library Interface</a> &gt; e) Miscellaneous Functions &gt; <a href="10118.html">DRV_I2C_SlaveCallbackSet Function</a></div>
<div class="Element93">
<table width="100%" cellspacing="0" cellpadding="0">
<tr><td width="100%">
<div class="Element3">
 MPLAB Harmony Help</div>
</td></tr><tr><td width="100%">
<div class="Element4">
<a href="contents.htm">Contents</a> | <a href="idx.html">Index</a> | <a href="04300.html">Home</a></div>
</td></tr><tr><td width="100%">
<div class="Element97">
<a href="mailto:docerrors@microchip.com&subject=MPLAB Harmony Documentation Feedback (Topic ID: DRV_I2C_SlaveCallbackSet@DRV_HANDLE@DRV_I2C_CallBack@uintptr_t Topic Title: DRV_I2C_SlaveCallbackSet Function)&body=Thank you for your feedback! Please include a description of your feedback, and indicate whether you are reporting an an error in the documentation or an enhancement.">Documentation Feedback</a><br> <a href="http://support.microchip.com">Microchip Support</a></div>
</td></tr></table></div>

<!-- End Page Footer -->
</div>
</div>

<!-- End Client Area -->
</body></html>