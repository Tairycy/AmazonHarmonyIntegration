<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
<head>
<title>Developing a Test</title>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <meta name="generator" content="Doc-O-Matic" />
    <meta name="save" content="history" />
    <meta http-equiv="Content-Style-Type" content="text/css" />
    <link rel="STYLESHEET" href="default.css" type="text/css" />

<script type="text/javascript" src="scripts.js"></script>
</head>
<body class="Element700" onload="onBodyLoad();" onmousedown="onBodyMouseDown();">
<div id="persistenceDiv" style="display:none; behavior:url(#default#userData);"></div>

<!-- Begin Popups -->

<!-- End Popups -->

<!-- Begin Page Header -->
<div class="Element710" id="areafixed">
<div class="Element94">
<a href="13064.html">Volume IV: MPLAB Harmony Development</a> &gt; <a href="16814.html">MPLAB Harmony Test Harness User's Guide</a> &gt; <a href="27034.html">Developing a Test</a></div>
<div class="Element92">
<table width="100%" cellspacing="0" cellpadding="0">
<tr><td width="25%">
<div class="Element1">
MPLAB Harmony Help</div>
</td><td width="25%">
<div class="Element2">
<a href="contents.htm">Contents</a> | <a href="idx.html">Index</a> | <a href="04300.html">Home</a></div>
</td><td width="25%">
<div class="Element90">
<a href="27033.html">Previous</a> | <a href="16814.html">Up</a> | <a href="27039.html">Next</a></div>
</td><td width="25%">
<div class="Element96">
<a href="mailto:docerrors@microchip.com&subject=MPLAB Harmony Documentation Feedback (Topic ID: TEST_HARNESS_UG Developing a Test Topic Title: Developing a Test)&body=Thank you for your feedback! Please include a description of your feedback, and indicate whether you are reporting an an error in the documentation or an enhancement.">Documentation Feedback</a><br> <a href="http://support.microchip.com">Microchip Support</a></div>
</td></tr></table><div class="Element5">
Developing a Test</div>
</div>
</div>

<!-- End Page Header -->

<!-- Begin Client Area -->
<div class="Element720" id="areascroll">
<div class="Element721">

<!-- Begin Page Content -->
<div class="Element58">
<a name="4465736372697074696F6E"></a><div class="Element11">
<div class="Element10">
<p class="Element10">
A test should exercise the API of the library under test and verify that the expected results occur. Doing so may require significant development effort. It may also require development of specific supporting hardware. Each test can have any number of sub-tests. A sub-test is counted any time a sub-test result is reported to the test harness by calling the <a href="27045.html">TEST_HasPassedSubtest</a> function with a true or false parameter value. The test harness keeps a count of every time this function is called and a count of how many times it was called with a true parameter. If these two numbers are equal, then the harness counts that the test has passed once it has completed. To indicate that the test has completed, the test application can either call the <a href="27044.html">TEST_HasCompleted</a> function or report a SYS_STATUS_TEST_COMPLETED status and enter its idle state. Once either of these conditions is true, the harness will no longer call the test’s tasks function and the test effectively stops running.&nbsp;</p>
<p class="Element10">
A test consists of the following primary functions and any supporting code to exercise and verify the operation of the Library Under Test (LUT).</p>
<ul class="Element630">
<li class="Element600">Test_&lt;test-short-name&gt;Initialize</li>
<li class="Element600">Test_&lt;test-short-name&gt;Tasks</li>
<li class="Element600">Test_&lt;test-short-name&gt;Start</li>
<li class="Element600">Test_&lt;test-short-name&gt;Status</li>
</ul><p class="Element10">
The Initialize function places the test in its initial state and initializes any internal data, but it does not interact with the LUT. The Tasks function maintains the test’s state machine and performs the actual test. And, the Start function tells the test when the LUT has been initialized and it is safe to interact with it.&nbsp;</p>
<p class="Element10">
It is easiest to develop a test by starting from an existing sample test and modifying it to suit your needs. Sample test files are in the MPLAB Harmony installation in the following locations.</p>
<ul class="Element630">
<li class="Element600"><span class="Element146">&lt;install-dir&gt;/framework/test/test_sample_functional.h</span></li>
<li class="Element600"><span class="Element146">&lt;install-dir&gt;/framework/test/src/test_sample_functional.c</span></li>
</ul><div class="Element15">
Test Development Process</div>
<p class="Element10">
To get started developing a test application perform the following steps.</p>
<ol class="Element630">
<li value="1" class="Element600">Copy the <span class="Element146">test_sample_functional.c</span> and <span class="Element146">test_sample_functional.h</span> files from the locations listed previously.</li>
<li value="2" class="Element600">Rename these files to reflect the short name of your test and add them to your project.</li>
<li value="3" class="Element600">Edit the test’s <span class="Element146">.c</span> file, as follows:
<ul class="Element631">
<li class="Element601">Rename any references to the sample module with references to the library under test</li>
<li class="Element601">Be sure to change the name of the test’s header file in the <span class="Element146">#include</span> statement</li>
<li class="Element601">Be sure to change the state enumeration names and local data type names</li>
<li class="Element601">Delete the *GIVE_DATA&quot; and *GET_DATA&quot; states and the functions that implement them. They are not needed and will be replaced by states that you will define. (Keep the *INIT, *INIT_WAIT, *INITIAL_DATA, *COMPLETED, and *IDLE states. Normally you will reuse these.)</li>
<li class="Element601">Delete all members of the *LIB_DATA structure, except the state and <a href="13976.html">initData</a> member. You will reuse them.</li>
<li class="Element601">Rename the testSampleFunc static global to variable to represent the short name of your test</li>
<li class="Element601">In the VerifyInitialData function, replace the internal logic of this function with a single call to <a href="27045.html">TEST_HasPassedSubtest</a>(false) and return the new &lt;test_STATE_COMPLETED state. You will need to implement this function appropriately later.</li>
<li class="Element601">Delete the AbleToSendNewData and AbleToReadSentData functions. You will not need them.</li>
<li class="Element601">Rename the TestSampleFuncionalInitialize function to reflect the short name of your test and delete unneeded initialization coded</li>
<li class="Element601">Rename the TEST_SampleFunctionStart function to reflect the short name of your test</li>
<li class="Element601">Rename the TEST_SampleFunctionTasks function to reflect the short name of your test and delete code for unneeded states transitions</li>
</ul></li>
<li value="4" class="Element600">Edit the test’s <span class="Element146">.h</span> file.
<ul class="Element631">
<li class="Element601">Rename any references to the sample library with references to the library under test</li>
<li class="Element601">Be sure to change the name of the _TEST_SAMPLE_FUNCTIONAL_H macro</li>
<li class="Element601">Delete the inclusion of the <span class="Element146"><a href="22647.html">sample_module.h</a></span> file, including the API header for the library under test instead</li>
<li class="Element601">Rename the test application’s interface functions (both the prototype and the comment block) to match the new names given in the <span class="Element146">.c</span> file</li>
</ul></li>
<li value="5" class="Element600">Rebuild the project and fix any build errors.
<ul class="Element631">
<li class="Element601">The sample function test was designed to test multiple instances of the sample library. If your test is also designed to test multiple instances of the LUT, then you can rename and use the &lt;test&gt;_LIB_INSTANCES_NUMBER configuration option. But, be sure to define it in the <span class="Element146">system_config.h</span> file to set internal array sizes.</li>
<li class="Element601">Fix any editing errors and change any references to the sample library to refer to the desired library under test</li>
</ul></li>
<li value="6" class="Element600">Once you have a clean build of a test application skeleton, you need to add it to the test application list as described in <a href="27036.html">Initializing the Test Harness</a> and begin developing the test to exercise and validate the module under test.</li>
</ol></div>
</div>
</div>
<!-- End Page Content -->

<!-- Begin Page Footer -->
<div class="Element95">
<a href="13064.html">Volume IV: MPLAB Harmony Development</a> &gt; <a href="16814.html">MPLAB Harmony Test Harness User's Guide</a> &gt; <a href="27034.html">Developing a Test</a></div>
<div class="Element93">
<table width="100%" cellspacing="0" cellpadding="0">
<tr><td width="100%">
<div class="Element3">
 MPLAB Harmony Help</div>
</td></tr><tr><td width="100%">
<div class="Element4">
<a href="contents.htm">Contents</a> | <a href="idx.html">Index</a> | <a href="04300.html">Home</a></div>
</td></tr><tr><td width="100%">
<div class="Element97">
<a href="mailto:docerrors@microchip.com&subject=MPLAB Harmony Documentation Feedback (Topic ID: TEST_HARNESS_UG Developing a Test Topic Title: Developing a Test)&body=Thank you for your feedback! Please include a description of your feedback, and indicate whether you are reporting an an error in the documentation or an enhancement.">Documentation Feedback</a><br> <a href="http://support.microchip.com">Microchip Support</a></div>
</td></tr></table></div>

<!-- End Page Footer -->
</div>
</div>

<!-- End Client Area -->
</body></html>