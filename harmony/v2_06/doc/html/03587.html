<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
<head>
<title>devcon_cache_invalidate</title>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <meta name="generator" content="Doc-O-Matic" />
    <meta name="save" content="history" />
    <meta http-equiv="Content-Style-Type" content="text/css" />
    <link rel="STYLESHEET" href="default.css" type="text/css" />

<script type="text/javascript" src="scripts.js"></script>
</head>
<body class="Element700" onload="onBodyLoad();" onmousedown="onBodyMouseDown();">
<div id="persistenceDiv" style="display:none; behavior:url(#default#userData);"></div>

<!-- Begin Popups -->

<!-- End Popups -->

<!-- Begin Page Header -->
<div class="Element710" id="areafixed">
<div class="Element94">
<a href="04300.html">Volume I: Getting Started With MPLAB Harmony Libraries and Applications</a> &gt; <a href="03342.html">Applications Help</a> &gt; <a href="03341.html">Examples</a> &gt; <a href="03626.html">System Service Library Examples</a> &gt; <a href="07968.html">Device Control System Service Examples</a> &gt; <a href="03582.html">Demonstrations</a> &gt; <a href="03587.html">devcon_cache_invalidate</a></div>
<div class="Element92">
<table width="100%" cellspacing="0" cellpadding="0">
<tr><td width="25%">
<div class="Element1">
MPLAB Harmony Help</div>
</td><td width="25%">
<div class="Element2">
<a href="contents.htm">Contents</a> | <a href="idx.html">Index</a> | <a href="04300.html">Home</a></div>
</td><td width="25%">
<div class="Element90">
<a href="03586.html">Previous</a> | <a href="03582.html">Up</a> | <a href="03588.html">Next</a></div>
</td><td width="25%">
<div class="Element96">
<a href="mailto:docerrors@microchip.com&subject=MPLAB Harmony Documentation Feedback (Topic ID: APPS DEVCON devcon_cache_invalidate Topic Title: devcon_cache_invalidate)&body=Thank you for your feedback! Please include a description of your feedback, and indicate whether you are reporting an an error in the documentation or an enhancement.">Documentation Feedback</a><br> <a href="http://support.microchip.com">Microchip Support</a></div>
</td></tr></table><div class="Element5">
devcon_cache_invalidate</div>
</div>
</div>

<!-- End Page Header -->

<!-- Begin Client Area -->
<div class="Element720" id="areascroll">
<div class="Element721">

<!-- Begin Page Content -->
<div class="Element58">
<a name="4465736372697074696F6E"></a><div class="Element11">
<div class="Element10">
<p class="Element10">
This example application demonstrates how cache coherency issues arise when transferring data into memory using DMA. The MPLAB Harmony Device Control System Service contains various cache functions, which are used in this example to resolve the problem.&nbsp;</p>
<p class="Element10">
The application first allocates three buffers – two source buffers and one destination buffer. The two source buffers are filled with two different sets of data. The first buffer is copied to the destination buffer using DMA and the application checks to ensure they both contain the same data (which they do). The second source buffer is then copied to the destination buffer using DMA and once again the data is compared. This time the data does not match and once again, it is due to a cache coherency issue.&nbsp;</p>
<p class="Element10">
After the first DMA transfer and read of the destination buffer, the data is pulled into the cache. The second DMA transfer then updates the data contained in the destination buffer, but only the data contained in RAM. As far as the cache is aware, the stale data in the cache still matches the fresh data that is now in RAM. The cache simply sees that it is already storing a copy of the destination buffer, so it need not bother to pull the fresh data into itself when the CPU does the second set of reads. What we need is a way to tell the CPU to get rid of the stale cached data and pull in fresh data from main memory – this is known as an ‘invalidate'. The example application demonstrates the proper technique for taking care of this issue. After the second DMA transfer, the destination buffer must be invalidated with the use of the function <a href="23687.html">SYS_DEVCON_DataCacheInvalidate</a>. This marks the data of interest in the cache as invalid. Now when the CPU performs a read on the destination buffer, fresh data is pulled out of main memory and into the cache, before being presented to the CPU.&nbsp;</p>
<p class="Element10">
If the application runs as intended, the red and green LEDs will be lit. The yellow LED will only be lit if an error has occurred.</p></div>
</div>
<a name="546F70696373"></a><div class="Element14">
Topics</div>
<div class="Element11">
<div class="Element10">
<div class="Element212">
<div class="TableDiv">
<table cellspacing="0" class="Table1">
<tr>
<td class="Element200" valign="top" width="35%">
<div class="Element201">
Name&nbsp;</div></td><td class="Element204" valign="top" width="65%">
<div class="Element205">
Description&nbsp;</div></td></tr><tr>
<td class="Element202" valign="top" width="35%">
<div class="Element203">
<a href="03588.html">Building the Application</a>&nbsp;</div></td><td class="Element206" valign="top" width="65%">
<div class="Element207">
This section identifies the MPLAB X IDE project name and location and lists and describes the available configurations for the Device Control System Service Cache Invalidate Demonstration.&nbsp;</div></td></tr><tr>
<td class="Element202" valign="top" width="35%">
<div class="Element203">
<a href="03589.html">Configuring the Hardware</a>&nbsp;</div></td><td class="Element206" valign="top" width="65%">
<div class="Element207">
Describes how to configure the supported hardware.&nbsp;</div></td></tr><tr>
<td class="Element202" valign="top" width="35%">
<div class="Element203">
<a href="03590.html">Running the Demonstration</a>&nbsp;</div></td><td class="Element206" valign="top" width="65%">
<div class="Element207">
Provides instructions on how to build and run the demonstration.&nbsp;</div></td></tr></table></div></div>
</div>
</div>
</div>
<!-- End Page Content -->

<!-- Begin Page Footer -->
<div class="Element95">
<a href="04300.html">Volume I: Getting Started With MPLAB Harmony Libraries and Applications</a> &gt; <a href="03342.html">Applications Help</a> &gt; <a href="03341.html">Examples</a> &gt; <a href="03626.html">System Service Library Examples</a> &gt; <a href="07968.html">Device Control System Service Examples</a> &gt; <a href="03582.html">Demonstrations</a> &gt; <a href="03587.html">devcon_cache_invalidate</a></div>
<div class="Element93">
<table width="100%" cellspacing="0" cellpadding="0">
<tr><td width="100%">
<div class="Element3">
 MPLAB Harmony Help</div>
</td></tr><tr><td width="100%">
<div class="Element4">
<a href="contents.htm">Contents</a> | <a href="idx.html">Index</a> | <a href="04300.html">Home</a></div>
</td></tr><tr><td width="100%">
<div class="Element97">
<a href="mailto:docerrors@microchip.com&subject=MPLAB Harmony Documentation Feedback (Topic ID: APPS DEVCON devcon_cache_invalidate Topic Title: devcon_cache_invalidate)&body=Thank you for your feedback! Please include a description of your feedback, and indicate whether you are reporting an an error in the documentation or an enhancement.">Documentation Feedback</a><br> <a href="http://support.microchip.com">Microchip Support</a></div>
</td></tr></table></div>

<!-- End Page Footer -->
</div>
</div>

<!-- End Client Area -->
</body></html>