<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
<head>
<title>Peripheral Libraries</title>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <meta name="generator" content="Doc-O-Matic" />
    <meta name="save" content="history" />
    <meta http-equiv="Content-Style-Type" content="text/css" />
    <link rel="STYLESHEET" href="default.css" type="text/css" />

<script type="text/javascript" src="scripts.js"></script>
</head>
<body class="Element700" onload="onBodyLoad();" onmousedown="onBodyMouseDown();">
<div id="persistenceDiv" style="display:none; behavior:url(#default#userData);"></div>

<!-- Begin Popups -->

<!-- End Popups -->

<!-- Begin Page Header -->
<div class="Element710" id="areafixed">
<div class="Element94">
<a href="13064.html">Volume IV: MPLAB Harmony Development</a> &gt; <a href="06505.html">Prebuilt Libraries</a> &gt; <a href="06504.html">Supported Libraries</a> &gt; <a href="06501.html">Peripheral Libraries</a></div>
<div class="Element92">
<table width="100%" cellspacing="0" cellpadding="0">
<tr><td width="25%">
<div class="Element1">
MPLAB Harmony Help</div>
</td><td width="25%">
<div class="Element2">
<a href="contents.htm">Contents</a> | <a href="idx.html">Index</a> | <a href="04300.html">Home</a></div>
</td><td width="25%">
<div class="Element90">
<a href="06502.html">Previous</a> | <a href="06504.html">Up</a> | <a href="06503.html">Next</a></div>
</td><td width="25%">
<div class="Element96">
<a href="mailto:docerrors@microchip.com&subject=MPLAB Harmony Documentation Feedback (Topic ID: BUILD Peripheral Libraries Topic Title: Peripheral Libraries)&body=Thank you for your feedback! Please include a description of your feedback, and indicate whether you are reporting an an error in the documentation or an enhancement.">Documentation Feedback</a><br> <a href="http://support.microchip.com">Microchip Support</a></div>
</td></tr></table><div class="Element5">
Peripheral Libraries</div>
</div>
</div>

<!-- End Page Header -->

<!-- Begin Client Area -->
<div class="Element720" id="areascroll">
<div class="Element721">

<!-- Begin Page Content -->
<div class="Element58">
<a name="4465736372697074696F6E"></a><div class="Element11">
<div class="Element10">
<p class="Element10">
The MPLAB Harmony peripheral libraries are implemented almost entirely using C language inline functions. This is done for efficiency so that the compiler can generate a few simple instructions in place of multiple layers of function calls when function parameters are passed as constants. However, if the project that uses the peripheral library is built with low optimization settings, the compiler may generate a function call instead of &quot;inlining&quot; the function implementation. Unfortunately, this will cause an undefined symbol error at link time if the linker cannot find an actual implementation of the function to which it can link the call.&nbsp;</p>
<p class="Element10">
To satisfy the linker (and to provide optimized PLIB operation, even when low compiler optimization settings are used in your project), the MPLAB Harmony peripheral libraries must be prebuilt as <span class="Element146">.a</span> file, linkable libraries. The appropriate MPLAB X IDE peripheral library <span class="Element146">.a</span> file for the processor in use must be added to the MPLAB X IDE project so that the linker can use them. </p><div class="Element63">
<div class="TableDiv">
<table cellspacing="0" class="Table0">
<tr>
<td class="Element67" valign="top" width="10%" style="border:none;">
<div class="Element68">
<img src="Note Icon.png" border="0" alt="" title=""> <strong>Note:</strong>&nbsp;</div></td><td class="Element67" valign="top" width="90%" style="border:none;">
<div class="Element68">
Prebuilt binary <span class="Element146">.a</span> files are provided for all supported processors in the MPLAB Harmony installation in the following folder: <span class="Element146">&lt;install-dir&gt;/bin/framework/peripheral</span>.&nbsp;</div></td></tr></table></div></div>
<p class="Element10">
The MPLAB Harmony peripheral library <span class="Element146">.a</span> file build projects are provided so that you may rebuild the binary peripheral library <span class="Element146">.a</span> files using any desired optimization settings. However, if you do this, you must have the appropriate XC compiler and you must copy the resultant <span class="Element146">.a</span> file to your project folder and add it to your MPLAB X IDE project.</p><div class="Element15">
Build Configurations</div>
<p class="Element10">
There are two MPLAB X IDE configurations from which to choose when building peripheral libraries for MPLAB Harmony:</p>
<ul class="Element630">
<li class="Element600">device_with_ethernet - Select this configuration if the device for which the PLIB <span class="Element146">.a</span> file is to be created <i>has</i> an Ethernet module. The default device for this configuration is PIC32MX795F512L.</li>
<li class="Element600">device_without_ethernet - Select this configuration if the device for which the PLIB <span class="Element146">.a</span> file is to be created <i>does not</i> have an Ethernet module. The default device for this configuration is PIC32MX450F256L.</li>
</ul><p class="Element10">
The default Optimization level for both configurations is O3.</p><div class="Element15">
Key Configuration Options</div>
<p class="Element10">
To build the peripheral library binary <span class="Element146">.a</span> files, there are two key configuration options that must be defined, as follows: </p><div class="Element170">
<a href="#" onclick="CopyElementToClipboard('code00093');">Copy Code</a></div>
<div class="Element13"><div class="Element12" id="code00093"><pre class="Element12"><strong><span style="color: #000080">#define</span></strong> PLIB_INLINE_API <strong><span style="color: #000080">extern</span></strong>
<strong><span style="color: #000080">#define</span></strong> PLIB_INLINE <strong><span style="color: #000080">static</span></strong> <strong><span style="color: #000080">inline</span></strong></pre></div></div>
<p class="Element10">
These two configuration items are defined in the source file (<span class="Element146">peripheral.c</span>), which then directly includes the peripheral library implementation headers. </p><div class="Element63">
<div class="TableDiv">
<table cellspacing="0" class="Table0">
<tr>
<td class="Element67" valign="top" width="10%" style="border:none;">
<div class="Element68">
<img src="Note Icon.png" border="0" alt="" title=""> <strong>Note:</strong>&nbsp;</div></td><td class="Element67" valign="top" width="90%" style="border:none;">
<div class="Element68">
This has already been done for you. This information is provided strictly for reference.&nbsp;</div></td></tr></table></div></div>
<p class="Element10">
During normal peripheral library use, both of these options are defined as &quot;extern inline&quot; so that the compiler can choose between generating a function call or generating inline code, directly in the calling function (as described previously). However, to build the binary library <span class="Element146">.a</span> files the peripheral library Application Program Interface (API) functions must be exposed as global &quot;external&quot; symbols. The &quot;PLIB_INLINE_API&quot; attribute is placed as an attribute on all PLIB API function implementations. So, defining it as &quot;extern&quot; allows the compiler to expose these functions within the library <span class="Element146">.a</span> file so that the linker can find them. The VREG and other &quot;internal&quot; functions prefixed by the &quot;PLIB_INLINE&quot; attribute are then defined as &quot;static inline&quot; functions for efficiency.</p></div>
</div>
</div>
<!-- End Page Content -->

<!-- Begin Page Footer -->
<div class="Element95">
<a href="13064.html">Volume IV: MPLAB Harmony Development</a> &gt; <a href="06505.html">Prebuilt Libraries</a> &gt; <a href="06504.html">Supported Libraries</a> &gt; <a href="06501.html">Peripheral Libraries</a></div>
<div class="Element93">
<table width="100%" cellspacing="0" cellpadding="0">
<tr><td width="100%">
<div class="Element3">
 MPLAB Harmony Help</div>
</td></tr><tr><td width="100%">
<div class="Element4">
<a href="contents.htm">Contents</a> | <a href="idx.html">Index</a> | <a href="04300.html">Home</a></div>
</td></tr><tr><td width="100%">
<div class="Element97">
<a href="mailto:docerrors@microchip.com&subject=MPLAB Harmony Documentation Feedback (Topic ID: BUILD Peripheral Libraries Topic Title: Peripheral Libraries)&body=Thank you for your feedback! Please include a description of your feedback, and indicate whether you are reporting an an error in the documentation or an enhancement.">Documentation Feedback</a><br> <a href="http://support.microchip.com">Microchip Support</a></div>
</td></tr></table></div>

<!-- End Page Footer -->
</div>
</div>

<!-- End Client Area -->
</body></html>