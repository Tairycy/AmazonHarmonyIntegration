<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
<head>
<title>DRV_I2S_Initialize Function</title>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <meta name="generator" content="Doc-O-Matic" />
    <meta name="save" content="history" />
    <meta http-equiv="Content-Style-Type" content="text/css" />
    <link rel="STYLESHEET" href="default.css" type="text/css" />

<script type="text/javascript" src="scripts.js"></script>
</head>
<body class="Element700" onload="onBodyLoad();" onmousedown="onBodyMouseDown();">
<div id="persistenceDiv" style="display:none; behavior:url(#default#userData);"></div>

<!-- Begin Popups -->

<!-- End Popups -->

<!-- Begin Page Header -->
<div class="Element710" id="areafixed">
<div class="Element94">
<a href="16811.html">Volume V: MPLAB Harmony Framework Reference</a> &gt; <a href="13069.html">Driver Libraries Help</a> &gt; <a href="13740.html">I2S Driver Library Help</a> &gt; <a href="08607.html">Library Interface</a> &gt; a) System Interaction Functions &gt; <a href="10181.html">DRV_I2S_Initialize Function</a></div>
<div class="Element92">
<table width="100%" cellspacing="0" cellpadding="0">
<tr><td width="25%">
<div class="Element1">
MPLAB Harmony Help</div>
</td><td width="25%">
<div class="Element2">
<a href="contents.htm">Contents</a> | <a href="idx.html">Index</a> | <a href="04300.html">Home</a></div>
</td><td width="25%">
<div class="Element90">
<a href="10166.html">Previous</a> | <a href="08607.html">Up</a> | <a href="10220.html">Next</a></div>
</td><td width="25%">
<div class="Element96">
<a href="mailto:docerrors@microchip.com&subject=MPLAB Harmony Documentation Feedback (Topic ID: DRV_I2S_Initialize@SYS_MODULE_INDEX@SYS_MODULE_INIT *const Topic Title: DRV_I2S_Initialize Function)&body=Thank you for your feedback! Please include a description of your feedback, and indicate whether you are reporting an an error in the documentation or an enhancement.">Documentation Feedback</a><br> <a href="http://support.microchip.com">Microchip Support</a></div>
</td></tr></table><div class="Element5">
DRV_I2S_Initialize Function</div>
</div>
</div>

<!-- End Page Header -->

<!-- Begin Client Area -->
<div class="Element720" id="areascroll">
<div class="Element721">

<!-- Begin Page Content -->
<div class="Element58">
<a name="43"></a><div class="Element99">
C</div>
<div class="Element101"><div class="Element100"><pre class="Element100"><a href="23975.html">SYS_MODULE_OBJ</a> <strong><span style="color: #000000">DRV_I2S_Initialize</span></strong>(
    <strong><span style="color: #000080">const</span></strong> <a href="23968.html">SYS_MODULE_INDEX</a> <strong><span style="color: #000000">drvIndex</span></strong>, 
    <strong><span style="color: #000080">const</span></strong> <a href="23969.html">SYS_MODULE_INIT</a> *<strong><span style="color: #000080">const</span></strong> <strong><span style="color: #000000">init</span></strong>
);</pre></div></div>
<a name="4465736372697074696F6E"></a><div class="Element14">
Description</div>
<div class="Element11">
<div class="Element10">
<p class="Element10">
This routine initializes the I2S driver instance for the specified driver index, making it ready for clients to open and use it. The initialization data is specified by the init parameter. The initialization may fail if the number of driver objects allocated are insufficient or if the specified driver instance is already initialized. The driver instance index is independent of the I2S module ID. For example, driver instance 0 can be assigned to I2S2. If the driver is built statically, then some of the initialization parameters are overridden by configuration macros. Refer to the description of the DRV_I2S_INIT data structure for more details on which members on this data structure are overridden.</p></div>
</div>
<a name="507265636F6E646974696F6E73"></a><div class="Element14">
Preconditions</div>
<div class="Element11">
<div class="Element10">
<p class="Element10">
If DMA mode of operation is intended, <a href="23738.html">SYS_DMA_Initialize</a> should have been called before calling this function.</p></div>
</div>
<a name="506172616D6574657273"></a><div class="Element14">
Parameters</div>
<div class="Element11">
<div class="Element10">
<div class="Element312">
<div class="TableDiv">
<table cellspacing="0" class="Table4">
<tr>
<td class="Element300" valign="top" width="35%">
<div class="Element301">
Parameters&nbsp;</div></td><td class="Element304" valign="top" width="65%">
<div class="Element305">
Description&nbsp;</div></td></tr><tr>
<td class="Element302" valign="top" width="35%">
<div class="Element303">
drvIndex&nbsp;</div></td><td class="Element306" valign="top" width="65%">
<div class="Element307">
Identifier for the driver instance to be initialized&nbsp;</div></td></tr><tr>
<td class="Element302" valign="top" width="35%">
<div class="Element303">
init&nbsp;</div></td><td class="Element306" valign="top" width="65%">
<div class="Element307">
Pointer to the data structure containing any data necessary to initialize the hardware. This pointer may be null if no data is required and default initialization is to be used.&nbsp;</div></td></tr></table></div></div>
</div>
</div>
<a name="52657475726E73"></a><div class="Element14">
Returns</div>
<div class="Element11">
<div class="Element10">
<p class="Element10">
If successful, returns a valid handle to a driver instance object. Otherwise, it returns <a href="23976.html">SYS_MODULE_OBJ_INVALID</a>.</p></div>
</div>
<a name="52656D61726B73"></a><div class="Element14">
Remarks</div>
<div class="Element11">
<div class="Element10">
<p class="Element10">
This routine must be called before any other I2S routine is called.&nbsp;</p>
<p class="Element10">
This routine should only be called once during system initialization unless <a href="10166.html">DRV_I2S_Deinitialize</a> is called to deinitialize the driver instance. This routine will NEVER block for hardware access.&nbsp;</p>
<p class="Element10">
To Enable the DMA mode of operation the init parameters 'dmaChannelTransmit' /'dmaChannelReceive' must be set to valid DMA channel. When DMA mode of operation is enabled, the normal mode(Usual TX and RX) operation is inhibited. When 'dmaChannelTransmit'/'dmaChannelReceive' are set to valid channel numbers the related DMA interrupt source parameters 'dmaInterruptTransmitSource'/ 'dmaInterruptReceiveSource' must be set with appropriate DMA channel interrupt source.</p></div>
</div>
<a name="4578616D706C65"></a><div class="Element14">
Example</div>
<div class="Element11">
<div class="Element10">
<div class="Element170">
<a href="#" onclick="CopyElementToClipboard('code00651');">Copy Code</a></div>
<div class="Element13"><div class="Element12" id="code00651"><pre class="Element12">DRV_I2S_INIT                init;
<a href="23975.html">SYS_MODULE_OBJ</a>              objectHandle;

init.moduleInit.value           = <a href="23981.html">SYS_MODULE_POWER_RUN_FULL</a>;
init.spiID                      = SPI_ID_1;
init.usageMode                  = DRV_I2S_MODE_MASTER;
init.baudClock                  = SPI_BAUD_RATE_MCLK_CLOCK;
init.baud                       = 48000;
init.clockMode                  = DRV_I2S_CLOCK_MODE_IDLE_HIGH_EDGE_FALL;
init.audioCommWidth             = SPI_AUDIO_COMMUNICATION_24DATA_32FIFO_32CHANNEL;
init.audioTransmitMode          = SPI_AUDIO_TRANSMIT_STEREO;
init.inputSamplePhase           = SPI_INPUT_SAMPLING_PHASE_IN_MIDDLE;
init.protocolMode               = DRV_I2S_AUDIO_I2S;
init.txInterruptSource          = INT_SOURCE_SPI_1_TRANSMIT;
init.rxInterruptSource          = INT_SOURCE_SPI_1_RECEIVE;
init.errorInterruptSource       = INT_SOURCE_SPI_1_ERROR;
init.queueSizeTransmit          = 3;
init.queueSizeReceive           = 2;
init.dmaChannelTransmit         = DMA_CHANNEL_NONE;
init.dmaChannelReceive          = DMA_CHANNEL_NONE;

objectHandle = DRV_I2S_Initialize(<a href="10176.html">DRV_I2S_INDEX_1</a>, (<a href="23969.html">SYS_MODULE_INIT</a>*)init);
<strong><span style="color: #000080">if</span></strong> (<a href="23976.html">SYS_MODULE_OBJ_INVALID</a> == objectHandle)
{
    <i><span style="color: #008000">// Handle error</span></i>
}</pre></div></div>
</div>
</div>
</div>
<!-- End Page Content -->

<!-- Begin Page Footer -->
<div class="Element95">
<a href="16811.html">Volume V: MPLAB Harmony Framework Reference</a> &gt; <a href="13069.html">Driver Libraries Help</a> &gt; <a href="13740.html">I2S Driver Library Help</a> &gt; <a href="08607.html">Library Interface</a> &gt; a) System Interaction Functions &gt; <a href="10181.html">DRV_I2S_Initialize Function</a></div>
<div class="Element93">
<table width="100%" cellspacing="0" cellpadding="0">
<tr><td width="100%">
<div class="Element3">
 MPLAB Harmony Help</div>
</td></tr><tr><td width="100%">
<div class="Element4">
<a href="contents.htm">Contents</a> | <a href="idx.html">Index</a> | <a href="04300.html">Home</a></div>
</td></tr><tr><td width="100%">
<div class="Element97">
<a href="mailto:docerrors@microchip.com&subject=MPLAB Harmony Documentation Feedback (Topic ID: DRV_I2S_Initialize@SYS_MODULE_INDEX@SYS_MODULE_INIT *const Topic Title: DRV_I2S_Initialize Function)&body=Thank you for your feedback! Please include a description of your feedback, and indicate whether you are reporting an an error in the documentation or an enhancement.">Documentation Feedback</a><br> <a href="http://support.microchip.com">Microchip Support</a></div>
</td></tr></table></div>

<!-- End Page Footer -->
</div>
</div>

<!-- End Client Area -->
</body></html>