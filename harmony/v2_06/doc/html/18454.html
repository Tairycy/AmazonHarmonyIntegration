<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
<head>
<title>PLIB_CAN_ChannelUpdate Function</title>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <meta name="generator" content="Doc-O-Matic" />
    <meta name="save" content="history" />
    <meta http-equiv="Content-Style-Type" content="text/css" />
    <link rel="STYLESHEET" href="default.css" type="text/css" />

<script type="text/javascript" src="scripts.js"></script>
</head>
<body class="Element700" onload="onBodyLoad();" onmousedown="onBodyMouseDown();">
<div id="persistenceDiv" style="display:none; behavior:url(#default#userData);"></div>

<!-- Begin Popups -->

<!-- End Popups -->

<!-- Begin Page Header -->
<div class="Element710" id="areafixed">
<div class="Element94">
<a href="16811.html">Volume V: MPLAB Harmony Framework Reference</a> &gt; <a href="17367.html">Peripheral Libraries Help</a> &gt; <a href="06512.html">CAN Peripheral Library</a> &gt; <a href="17498.html">Library Interface</a> &gt; d) Channel Configuration Functions &gt; <a href="18454.html">PLIB_CAN_ChannelUpdate Function</a></div>
<div class="Element92">
<table width="100%" cellspacing="0" cellpadding="0">
<tr><td width="25%">
<div class="Element1">
MPLAB Harmony Help</div>
</td><td width="25%">
<div class="Element2">
<a href="contents.htm">Contents</a> | <a href="idx.html">Index</a> | <a href="04300.html">Home</a></div>
</td><td width="25%">
<div class="Element90">
<a href="18452.html">Previous</a> | <a href="17498.html">Up</a> | <a href="18447.html">Next</a></div>
</td><td width="25%">
<div class="Element96">
<a href="mailto:docerrors@microchip.com&subject=MPLAB Harmony Documentation Feedback (Topic ID: PLIB_CAN_ChannelUpdate@CAN_MODULE_ID@CAN_CHANNEL Topic Title: PLIB_CAN_ChannelUpdate Function)&body=Thank you for your feedback! Please include a description of your feedback, and indicate whether you are reporting an an error in the documentation or an enhancement.">Documentation Feedback</a><br> <a href="http://support.microchip.com">Microchip Support</a></div>
</td></tr></table><div class="Element5">
PLIB_CAN_ChannelUpdate Function</div>
</div>
</div>

<!-- End Page Header -->

<!-- Begin Client Area -->
<div class="Element720" id="areascroll">
<div class="Element721">

<!-- Begin Page Content -->
<div class="Element58">
<a name="43"></a><div class="Element99">
C</div>
<div class="Element101"><div class="Element100"><pre class="Element100"><strong><span style="color: #000080">void</span></strong> <strong><span style="color: #000000">PLIB_CAN_ChannelUpdate</span></strong>(
    <a href="06712.html">CAN_MODULE_ID</a> <strong><span style="color: #000000">index</span></strong>, 
    <a href="06513.html">CAN_CHANNEL</a> <strong><span style="color: #000000">channel</span></strong>
);</pre></div></div>
<a name="4465736372697074696F6E"></a><div class="Element14">
Description</div>
<div class="Element11">
<div class="Element10">
<p class="Element10">
This function updates the CAN Channel internal pointers. This function should be called when a message has been read or processed completely from a CAN receive channel (using the <a href="18520.html">PLIB_CAN_ReceivedMessageGet</a> function). It should be called after a new message has been written to a CAN transmit channel (using the <a href="18533.html">PLIB_CAN_TransmitBufferGet</a> function) and before the <a href="18534.html">PLIB_CAN_TransmitChannelFlush</a> function.&nbsp;</p>
<p class="Element10">
Trying to read a CAN receive channel that has not been updated will cause the <a href="18520.html">PLIB_CAN_ReceivedMessageGet</a> function to return the same message. Writing to a CAN transmit channel that has not been updated will cause the last written message to be overwritten.</p></div>
</div>
<a name="507265636F6E646974696F6E73"></a><div class="Element14">
Preconditions</div>
<div class="Element11">
<div class="Element10">
<p class="Element10">
This function is effective only when the CAN module is not in Configuration mode or Disable mode.</p></div>
</div>
<a name="506172616D6574657273"></a><div class="Element14">
Parameters</div>
<div class="Element11">
<div class="Element10">
<div class="Element312">
<div class="TableDiv">
<table cellspacing="0" class="Table4">
<tr>
<td class="Element300" valign="top" width="35%">
<div class="Element301">
Parameters&nbsp;</div></td><td class="Element304" valign="top" width="65%">
<div class="Element305">
Description&nbsp;</div></td></tr><tr>
<td class="Element302" valign="top" width="35%">
<div class="Element303">
index&nbsp;</div></td><td class="Element306" valign="top" width="65%">
<div class="Element307">
Identifies the desired CAN module&nbsp;</div></td></tr><tr>
<td class="Element302" valign="top" width="35%">
<div class="Element303">
channel&nbsp;</div></td><td class="Element306" valign="top" width="65%">
<div class="Element307">
Identifies the CAN channel to be updated&nbsp;</div></td></tr></table></div></div>
</div>
</div>
<a name="52657475726E73"></a><div class="Element14">
Returns</div>
<div class="Element11">
<div class="Element10">
<p class="Element10">
None.</p></div>
</div>
<a name="52656D61726B73"></a><div class="Element14">
Remarks</div>
<div class="Element11">
<div class="Element10">
<p class="Element10">
The PLIB_CAN_ChannelUpdate function should be called on a CAN receive channel only after the message obtained using the <a href="18520.html">PLIB_CAN_ReceivedMessageGet</a> function has been read or processed completely. The CAN module peripheral library does not provide access to older messages once the PLIB_CAN_ChannelUpdate function has been called.&nbsp;</p>
<p class="Element10">
When using the PLIB_CAN_TransmitMessageBuffer function to write to a CAN transmit channel the PLIB_CAN_ChannelUpdate function should be called only when a valid message has been written to the channel. Calling the update function without writing to the CAN channel will cause an incorrect message to be output on the CAN channel when the transmit channel is flushed.&nbsp;</p>
<p class="Element10">
This feature may not be available on all devices. Please refer to the specific device data sheet to determine availability or use <a href="18472.html">PLIB_CAN_ExistsChannelUpdate</a> in your application to determine whether this feature is available.</p></div>
</div>
<a name="4578616D706C65"></a><div class="Element14">
Example</div>
<div class="Element11">
<div class="Element10">
<div class="Element170">
<a href="#" onclick="CopyElementToClipboard('code01698');">Copy Code</a></div>
<div class="Element13"><div class="Element12" id="code01698"><pre class="Element12"><i><span style="color: #008000">// CAN_ID_1 Channel 1 is a Receive channel and Channel 2 is a Transmit</span></i>
<i><span style="color: #008000">// channel. Read and update Channel 1. Write a message to Channel 2 and then</span></i>
<i><span style="color: #008000">// update and flush the channel.</span></i>

<a href="06769.html">CAN_TX_MSG_BUFFER</a> * TransmitMessage;
<a href="06746.html">CAN_RX_MSG_BUFFER</a> * rxMessage;

rxMessage = <a href="18520.html">PLIB_CAN_ReceivedMessageGet</a>(CAN_ID_1, CAN_CHANNEL1);

<strong><span style="color: #000080">if</span></strong>(rxMessage != NULL)
{
    <i><span style="color: #008000">// Process the received message.</span></i>

    PLIB_CAN_ChannelUpdate(CAN_ID_1, CAN_CHANNEL1);
}

TransmitMessage = <a href="18533.html">PLIB_CAN_TransmitBufferGet</a>(CAN_ID_1, CAN_CHANNEL2);
<strong><span style="color: #000080">if</span></strong>(TransmitMessage != NULL)
{
    <i><span style="color: #008000">// Write a message to buffer</span></i>

    PLIB_CAN_ChannelUpdate(CAN_ID_1, CAN_CHANNEL2);
    <a href="18534.html">PLIB_CAN_TransmitChannelFlush</a>(CAN_ID_1, CAN_CHANNEL2);
}</pre></div></div>
</div>
</div>
</div>
<!-- End Page Content -->

<!-- Begin Page Footer -->
<div class="Element95">
<a href="16811.html">Volume V: MPLAB Harmony Framework Reference</a> &gt; <a href="17367.html">Peripheral Libraries Help</a> &gt; <a href="06512.html">CAN Peripheral Library</a> &gt; <a href="17498.html">Library Interface</a> &gt; d) Channel Configuration Functions &gt; <a href="18454.html">PLIB_CAN_ChannelUpdate Function</a></div>
<div class="Element93">
<table width="100%" cellspacing="0" cellpadding="0">
<tr><td width="100%">
<div class="Element3">
 MPLAB Harmony Help</div>
</td></tr><tr><td width="100%">
<div class="Element4">
<a href="contents.htm">Contents</a> | <a href="idx.html">Index</a> | <a href="04300.html">Home</a></div>
</td></tr><tr><td width="100%">
<div class="Element97">
<a href="mailto:docerrors@microchip.com&subject=MPLAB Harmony Documentation Feedback (Topic ID: PLIB_CAN_ChannelUpdate@CAN_MODULE_ID@CAN_CHANNEL Topic Title: PLIB_CAN_ChannelUpdate Function)&body=Thank you for your feedback! Please include a description of your feedback, and indicate whether you are reporting an an error in the documentation or an enhancement.">Documentation Feedback</a><br> <a href="http://support.microchip.com">Microchip Support</a></div>
</td></tr></table></div>

<!-- End Page Footer -->
</div>
</div>

<!-- End Client Area -->
</body></html>