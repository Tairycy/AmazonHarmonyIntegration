<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
<head>
<title>3.2: Respect Abstractions</title>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <meta name="generator" content="Doc-O-Matic" />
    <meta name="save" content="history" />
    <meta http-equiv="Content-Style-Type" content="text/css" />
    <link rel="STYLESHEET" href="default.css" type="text/css" />

<script type="text/javascript" src="scripts.js"></script>
</head>
<body class="Element700" onload="onBodyLoad();" onmousedown="onBodyMouseDown();">
<div id="persistenceDiv" style="display:none; behavior:url(#default#userData);"></div>

<!-- Begin Popups -->

<!-- End Popups -->

<!-- Begin Page Header -->
<div class="Element710" id="areafixed">
<div class="Element94">
<a href="13064.html">Volume IV: MPLAB Harmony Development</a> &gt; <a href="16808.html">MPLAB Harmony Compatibility Guide</a> &gt; <a href="07096.html">3: Modularity Guidelines</a> &gt; <a href="07105.html">3.2: Respect Abstractions</a></div>
<div class="Element92">
<table width="100%" cellspacing="0" cellpadding="0">
<tr><td width="25%">
<div class="Element1">
MPLAB Harmony Help</div>
</td><td width="25%">
<div class="Element2">
<a href="contents.htm">Contents</a> | <a href="idx.html">Index</a> | <a href="04300.html">Home</a></div>
</td><td width="25%">
<div class="Element90">
<a href="07093.html">Previous</a> | <a href="07096.html">Up</a> | <a href="07101.html">Next</a></div>
</td><td width="25%">
<div class="Element96">
<a href="mailto:docerrors@microchip.com&subject=MPLAB Harmony Documentation Feedback (Topic ID: COMPGUIDE Respect Abstractions Topic Title: 3.2: Respect Abstractions)&body=Thank you for your feedback! Please include a description of your feedback, and indicate whether you are reporting an an error in the documentation or an enhancement.">Documentation Feedback</a><br> <a href="http://support.microchip.com">Microchip Support</a></div>
</td></tr></table><div class="Element5">
3.2: Respect Abstractions</div>
</div>
</div>

<!-- End Page Header -->

<!-- Begin Client Area -->
<div class="Element720" id="areascroll">
<div class="Element721">

<!-- Begin Page Content -->
<div class="Element58">
<a name="4465736372697074696F6E"></a><div class="Element11">
<div class="Element10">
<p class="Element10">
Any code that is expected to be MPLAB Harmony compatible must not violate the abstraction provided by another MPLAB Harmony module in use in the system.&nbsp;</p>
<p class="Element10">
No module may access the internal modifiable resources (data or hardware) of another module except through a legal supported interface that allows the module to control all access to that resource in a safe and correct manner within the supported usage configuration and environment.&nbsp;</p>
<p class="Element10">
For example, the direct client access to &quot;counter4&quot; in the <span class="Element146">myapp.c</span> example (see <a href="07093.html">3.1: Isolate Interface From Implementation</a>) is a violation of the &quot;mylib&quot; interface abstraction because it directly accesses an internal resource owned by &quot;mylib&quot; without going through a legal interface. Calling a PLIB function for a different module’s peripheral is another example of violating an abstraction because it constitutes &quot;direct&quot; access to owned resources. PLIBs cannot utilize any sort of protection mechanism (which may require OS support). Therefore, if a timer module owns a specific timer instance, it can call that timer’s PLIB directly (see the following example). But, if it also calls the interrupt PLIB, then it is violating the Interrupt System Service’s abstraction.&nbsp;</p>
<p class="Element10">
<strong>Example: PLIB Application</strong> &nbsp;</p><div class="Element170">
<a href="#" onclick="CopyElementToClipboard('code00097');">Copy Code</a></div>
<div class="Element13"><div class="Element12" id="code00097"><pre class="Element12"><i><span style="color: #008000">/******* Legal.  Module &quot;owns&quot; Timer2 *******/</span></i>

<i><span style="color: #008000">/* Set up Timer2 - PBCLK as the source, prescaler is 256 (PBCLK / 256),
   enable 32-bit counter mode, clear the counter, set the period to 312,500
   - 80 MHz PBCLK / 256 = 312,500 Hz Timer2 clock, so period is set to
   - 312,500 to trigger an interrupt every 1 second */</span></i>

PLIB_TMR_ClockSourceSelect(TMR_ID_2, TMR_CLOCK_SOURCE_PERIPHERAL_CLOCK);
PLIB_TMR_PrescaleSelect(TMR_ID_2, TMR_PRESCALE_VALUE_256);
PLIB_TMR_Mode32BitEnable(TMR_ID_2);
PLIB_TMR_Counter32BitClear(TMR_ID_2);
PLIB_TMR_Period32BitSet(TMR_ID_2, 312500);

<i><span style="color: #008000">/***** Illegal! Module does not &quot;own&quot; the Interrupt Controller  *****/</span></i>

<i><span style="color: #008000">/* Enable the Timer 2 interrupt source (Timer2 is used for interrupts in
   32-bit mode), set its priority level to 2, set its sub-priority level to 0 */</span></i>

PLIB_INT_SourceEnable(INT_ID_0, INT_SOURCE_TIMER_2);
PLIB_INT_VectorPrioritySet(INT_ID_0, INT_VECTOR_T2, INT_PRIORITY_LEVEL2);
PLIB_INT_VectorSubPrioritySet(INT_ID_0, INT_VECTOR_T2, INT_SUBPRIORITY_LEVEL0);</pre></div></div>
<p class="Element10">
In the previous example, this application must use the Interrupt System Service Library (which can control access to the Interrupt Controller), instead of direct access via the PLIB (unless it is the only module in the system that uses the Interrupt Controller).</p></div>
</div>
</div>
<!-- End Page Content -->

<!-- Begin Page Footer -->
<div class="Element95">
<a href="13064.html">Volume IV: MPLAB Harmony Development</a> &gt; <a href="16808.html">MPLAB Harmony Compatibility Guide</a> &gt; <a href="07096.html">3: Modularity Guidelines</a> &gt; <a href="07105.html">3.2: Respect Abstractions</a></div>
<div class="Element93">
<table width="100%" cellspacing="0" cellpadding="0">
<tr><td width="100%">
<div class="Element3">
 MPLAB Harmony Help</div>
</td></tr><tr><td width="100%">
<div class="Element4">
<a href="contents.htm">Contents</a> | <a href="idx.html">Index</a> | <a href="04300.html">Home</a></div>
</td></tr><tr><td width="100%">
<div class="Element97">
<a href="mailto:docerrors@microchip.com&subject=MPLAB Harmony Documentation Feedback (Topic ID: COMPGUIDE Respect Abstractions Topic Title: 3.2: Respect Abstractions)&body=Thank you for your feedback! Please include a description of your feedback, and indicate whether you are reporting an an error in the documentation or an enhancement.">Documentation Feedback</a><br> <a href="http://support.microchip.com">Microchip Support</a></div>
</td></tr></table></div>

<!-- End Page Footer -->
</div>
</div>

<!-- End Client Area -->
</body></html>