<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
<head>
<title>SYS_DMA_ChannelTransferSet Function</title>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <meta name="generator" content="Doc-O-Matic" />
    <meta name="save" content="history" />
    <meta http-equiv="Content-Style-Type" content="text/css" />
    <link rel="STYLESHEET" href="default.css" type="text/css" />

<script type="text/javascript" src="scripts.js"></script>
</head>
<body class="Element700" onload="onBodyLoad();" onmousedown="onBodyMouseDown();">
<div id="persistenceDiv" style="display:none; behavior:url(#default#userData);"></div>

<!-- Begin Popups -->

<!-- End Popups -->

<!-- Begin Page Header -->
<div class="Element710" id="areafixed">
<div class="Element94">
<a href="16811.html">Volume V: MPLAB Harmony Framework Reference</a> &gt; <a href="24419.html">System Service Libraries Help</a> &gt; <a href="07980.html">Direct Memory Access (DMA) System Service Library</a> &gt; <a href="24283.html">Library Interface</a> &gt; b) Channel Setup and Management Functions &gt; <a href="23737.html">SYS_DMA_ChannelTransferSet Function</a></div>
<div class="Element92">
<table width="100%" cellspacing="0" cellpadding="0">
<tr><td width="25%">
<div class="Element1">
MPLAB Harmony Help</div>
</td><td width="25%">
<div class="Element2">
<a href="contents.htm">Contents</a> | <a href="idx.html">Index</a> | <a href="04300.html">Home</a></div>
</td><td width="25%">
<div class="Element90">
<a href="23733.html">Previous</a> | <a href="24283.html">Up</a> | <a href="23730.html">Next</a></div>
</td><td width="25%">
<div class="Element96">
<a href="mailto:docerrors@microchip.com&subject=MPLAB Harmony Documentation Feedback (Topic ID: SYS_DMA_ChannelTransferSet@SYS_DMA_CHANNEL_HANDLE@void *@size_t@void *@size_t@size_t Topic Title: SYS_DMA_ChannelTransferSet Function)&body=Thank you for your feedback! Please include a description of your feedback, and indicate whether you are reporting an an error in the documentation or an enhancement.">Documentation Feedback</a><br> <a href="http://support.microchip.com">Microchip Support</a></div>
</td></tr></table><div class="Element5">
SYS_DMA_ChannelTransferSet Function</div>
</div>
</div>

<!-- End Page Header -->

<!-- Begin Client Area -->
<div class="Element720" id="areascroll">
<div class="Element721">

<!-- Begin Page Content -->
<div class="Element58">
<a name="43"></a><div class="Element99">
C</div>
<div class="Element101"><div class="Element100"><pre class="Element100"><strong><span style="color: #000080">void</span></strong> <strong><span style="color: #000000">SYS_DMA_ChannelTransferSet</span></strong>(
    SYS_DMA_CHANNEL_HANDLE <strong><span style="color: #000000">handle</span></strong>, 
    <strong><span style="color: #000080">const</span></strong> <strong><span style="color: #000080">void</span></strong> * <strong><span style="color: #000000">srcAddr</span></strong>, 
    size_t <strong><span style="color: #000000">srcSize</span></strong>, 
    <strong><span style="color: #000080">const</span></strong> <strong><span style="color: #000080">void</span></strong> * <strong><span style="color: #000000">destAddr</span></strong>, 
    size_t <strong><span style="color: #000000">destSize</span></strong>, 
    size_t <strong><span style="color: #000000">cellSize</span></strong>
);</pre></div></div>
<a name="4465736372697074696F6E"></a><div class="Element14">
Description</div>
<div class="Element11">
<div class="Element10">
<p class="Element10">
This function sets up data transfer characteristics for a DMA channel. The The source and the destination addresses, source and destination lengths, The number of bytes transferred per cell event are set. This function does not enables the DMA channel. The channel has to be explicitly enabled to start the data transfer. The above functions could be used in situations where in the user intends to setup transfer parameters but do not intend to enable the channel immediately. For example to chain to DMA channels in a cyclic order where the channels remains disabled. The channel is enabled automatically by the DMA when the transfer trigger condition occurs.</p></div>
</div>
<a name="507265636F6E646974696F6E73"></a><div class="Element14">
Preconditions</div>
<div class="Element11">
<div class="Element10">
<p class="Element10">
DMA should have been initialized by calling <a href="23738.html">SYS_DMA_Initialize</a>. DMA channel should have been allocated by calling <a href="23719.html">SYS_DMA_ChannelAllocate</a>. The function <a href="23731.html">SYS_DMA_ChannelSetup</a> must have been called to setup and enable the required features.</p></div>
</div>
<a name="506172616D6574657273"></a><div class="Element14">
Parameters</div>
<div class="Element11">
<div class="Element10">
<div class="Element312">
<div class="TableDiv">
<table cellspacing="0" class="Table4">
<tr>
<td class="Element300" valign="top" width="35%">
<div class="Element301">
Parameters&nbsp;</div></td><td class="Element304" valign="top" width="65%">
<div class="Element305">
Description&nbsp;</div></td></tr><tr>
<td class="Element302" valign="top" width="35%">
<div class="Element303">
handle&nbsp;</div></td><td class="Element306" valign="top" width="65%">
<div class="Element307">
Handle of the DMA channel as returned by the <a href="23719.html">SYS_DMA_ChannelAllocate</a> function.&nbsp;</div></td></tr><tr>
<td class="Element302" valign="top" width="35%">
<div class="Element303">
srcAddr&nbsp;</div></td><td class="Element306" valign="top" width="65%">
<div class="Element307">
Source of the DMA transfer&nbsp;</div></td></tr><tr>
<td class="Element302" valign="top" width="35%">
<div class="Element303">
srcSize&nbsp;</div></td><td class="Element306" valign="top" width="65%">
<div class="Element307">
Size of the source&nbsp;</div></td></tr><tr>
<td class="Element302" valign="top" width="35%">
<div class="Element303">
destAddr&nbsp;</div></td><td class="Element306" valign="top" width="65%">
<div class="Element307">
Destination of the DMA transfer&nbsp;</div></td></tr><tr>
<td class="Element302" valign="top" width="35%">
<div class="Element303">
destSize&nbsp;</div></td><td class="Element306" valign="top" width="65%">
<div class="Element307">
Size of the destination&nbsp;</div></td></tr><tr>
<td class="Element302" valign="top" width="35%">
<div class="Element303">
cellSize&nbsp;</div></td><td class="Element306" valign="top" width="65%">
<div class="Element307">
Size of the cell&nbsp;</div></td></tr></table></div></div>
</div>
</div>
<a name="52657475726E73"></a><div class="Element14">
Returns</div>
<div class="Element11">
<div class="Element10">
<p class="Element10">
None.</p></div>
</div>
<a name="52656D61726B73"></a><div class="Element14">
Remarks</div>
<div class="Element11">
<div class="Element10">
<p class="Element10">
For PIC32MZ series of devices, if the source/destination addresses are RAM memory addresses, the the source/destination buffers should be made coherent to avoid the cache coherency issues. For example: </p><div class="Element170">
<a href="#" onclick="CopyElementToClipboard('code03954');">Copy Code</a></div>
<div class="Element13"><div class="Element12" id="code03954"><pre class="Element12">uint8_t buffer[1024];
<i><span style="color: #008000">// The buffer can be made coherent by adding the 'coherent' attribute, as follows:</span></i>
uint8_t __attribute__((coherent)) __attribute__((aligned(16))) buffer[1024];</pre></div></div>
</div>
</div>
<a name="4578616D706C65"></a><div class="Element14">
Example</div>
<div class="Element11">
<div class="Element10">
<div class="Element170">
<a href="#" onclick="CopyElementToClipboard('code03955');">Copy Code</a></div>
<div class="Element13"><div class="Element12" id="code03955"><pre class="Element12"><i><span style="color: #008000">// Set up 10 bytes of data transfer to UART TX</span></i>

<i><span style="color: #008000">// 'handle' is a valid handle returned</span></i>
<i><span style="color: #008000">// by the SYS_DMA_ChannelAllocate function.</span></i>
MY_APP_OBJ          myAppObj;
uint8_t             buf[10];
<strong><span style="color: #000080">void</span></strong>                *srcAddr;
<strong><span style="color: #000080">void</span></strong>                *destAddr;
size_t              srcSize;
size_t              destSize;
size_t              cellSize;

srcAddr     = (uint8_t *) buf;
srcSize     = 10;
destAddr    = (uin8_t*) &amp;U2TXREG;
destSize    = 1;
cellSize    = 1;

<i><span style="color: #008000">// User registers an event handler with system service. This is done once</span></i>

<a href="23736.html">SYS_DMA_ChannelTransferEventHandlerSet</a>(handle, APP_DMASYSTransferEventHandler,
                                                        (uintptr_t)&amp;myAppObj);

SYS_DMA_ChannelTransferSet(handle,srcAddr,srcSize,destAddr,destSize,cellSize);
<a href="23724.html">SYS_DMA_ChannelEnable</a>(handle);

<strong><span style="color: #000080">if</span></strong>(SYS_DMA_CHANNEL_HANDLE_INVALID == handle)
{
    <i><span style="color: #008000">// Error handling here</span></i>
}

<i><span style="color: #008000">// Event Processing Technique. Event is received when</span></i>
<i><span style="color: #008000">// the transfer is processed.</span></i>

<strong><span style="color: #000080">void</span></strong> APP_DMASYSTransferEventHandler(SYS_DMA_TRANSFER_EVENT event,
        SYS_DMA_CHANNEL_HANDLE handle, uintptr_t contextHandle)
{
    <strong><span style="color: #000080">switch</span></strong>(event)
    {
        <strong><span style="color: #000080">case</span></strong> SYS_DMA_TRANSFER_EVENT_COMPLETE:

            <i><span style="color: #008000">// This means the data was transferred.</span></i>
            <strong><span style="color: #000080">break</span></strong>;

        <strong><span style="color: #000080">case</span></strong> SYS_DMA_TRANSFER_EVENT_ERROR:

            <i><span style="color: #008000">// Error handling here.</span></i>
            <strong><span style="color: #000080">break</span></strong>;

        <strong><span style="color: #000080">default</span></strong>:
            <strong><span style="color: #000080">break</span></strong>;
    }
}</pre></div></div>
</div>
</div>
</div>
<!-- End Page Content -->

<!-- Begin Page Footer -->
<div class="Element95">
<a href="16811.html">Volume V: MPLAB Harmony Framework Reference</a> &gt; <a href="24419.html">System Service Libraries Help</a> &gt; <a href="07980.html">Direct Memory Access (DMA) System Service Library</a> &gt; <a href="24283.html">Library Interface</a> &gt; b) Channel Setup and Management Functions &gt; <a href="23737.html">SYS_DMA_ChannelTransferSet Function</a></div>
<div class="Element93">
<table width="100%" cellspacing="0" cellpadding="0">
<tr><td width="100%">
<div class="Element3">
 MPLAB Harmony Help</div>
</td></tr><tr><td width="100%">
<div class="Element4">
<a href="contents.htm">Contents</a> | <a href="idx.html">Index</a> | <a href="04300.html">Home</a></div>
</td></tr><tr><td width="100%">
<div class="Element97">
<a href="mailto:docerrors@microchip.com&subject=MPLAB Harmony Documentation Feedback (Topic ID: SYS_DMA_ChannelTransferSet@SYS_DMA_CHANNEL_HANDLE@void *@size_t@void *@size_t@size_t Topic Title: SYS_DMA_ChannelTransferSet Function)&body=Thank you for your feedback! Please include a description of your feedback, and indicate whether you are reporting an an error in the documentation or an enhancement.">Documentation Feedback</a><br> <a href="http://support.microchip.com">Microchip Support</a></div>
</td></tr></table></div>

<!-- End Page Footer -->
</div>
</div>

<!-- End Client Area -->
</body></html>