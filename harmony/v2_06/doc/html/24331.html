<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
<head>
<title>Source Interrupt Management</title>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <meta name="generator" content="Doc-O-Matic" />
    <meta name="save" content="history" />
    <meta http-equiv="Content-Style-Type" content="text/css" />
    <link rel="STYLESHEET" href="default.css" type="text/css" />

<script type="text/javascript" src="scripts.js"></script>
</head>
<body class="Element700" onload="onBodyLoad();" onmousedown="onBodyMouseDown();">
<div id="persistenceDiv" style="display:none; behavior:url(#default#userData);"></div>

<!-- Begin Popups -->

<!-- End Popups -->

<!-- Begin Page Header -->
<div class="Element710" id="areafixed">
<div class="Element94">
<a href="16811.html">Volume V: MPLAB Harmony Framework Reference</a> &gt; <a href="24419.html">System Service Libraries Help</a> &gt; <a href="14396.html">Interrupt System Service Library</a> &gt; <a href="24333.html">Using the Library</a> &gt; <a href="24323.html">How the Library Works</a> &gt; <a href="24331.html">Source Interrupt Management</a></div>
<div class="Element92">
<table width="100%" cellspacing="0" cellpadding="0">
<tr><td width="25%">
<div class="Element1">
MPLAB Harmony Help</div>
</td><td width="25%">
<div class="Element2">
<a href="contents.htm">Contents</a> | <a href="idx.html">Index</a> | <a href="04300.html">Home</a></div>
</td><td width="25%">
<div class="Element90">
<a href="24318.html">Previous</a> | <a href="24323.html">Up</a> | <a href="24317.html">Next</a></div>
</td><td width="25%">
<div class="Element96">
<a href="mailto:docerrors@microchip.com&subject=MPLAB Harmony Documentation Feedback (Topic ID: SYSTEM INT Source Interrupt Management Topic Title: Source Interrupt Management)&body=Thank you for your feedback! Please include a description of your feedback, and indicate whether you are reporting an an error in the documentation or an enhancement.">Documentation Feedback</a><br> <a href="http://support.microchip.com">Microchip Support</a></div>
</td></tr></table><div class="Element5">
Source Interrupt Management</div>
</div>
</div>

<!-- End Page Header -->

<!-- Begin Client Area -->
<div class="Element720" id="areascroll">
<div class="Element721">

<!-- Begin Page Content -->
<div class="Element58">
<a name="4465736372697074696F6E"></a><div class="Element11">
<div class="Element10">
<p class="Element10">
The driver, middleware, or application's interrupt-handling Tasks routine must do two things at a minimum, in the following order.
<ol class="Element630">
<li value="1" class="Element600">Remove the cause of the interrupt.</li>
<li value="2" class="Element600">Clear the interrupt source by calling the function <a href="23955.html">SYS_INT_SourceStatusClear</a>.</li>
</ol>Exactly what actions are necessary to remove the cause of an interrupt is completely dependent on the source of the interrupt. This is normally the main purpose of the driver itself and is beyond the scope of this section. Refer to the documentation for the peripheral being managed. </p><div class="Element63">
<div class="TableDiv">
<table cellspacing="0" class="Table0">
<tr>
<td class="Element67" valign="top" width="10%" style="border:none;">
<div class="Element68">
<img src="Warning ICON.png" border="0" alt="" title=""><br><strong>Warning</strong>&nbsp;</div></td><td class="Element67" valign="top" width="90%" style="border:none;">
<div class="Element68">
The cause of the interrupt must be removed before clearing the interrupt source or the interrupt may reoccur immediately after the source is cleared potentially causing an infinite loop. An infinite loop may also occur if the source is not cleared before the interrupt-handler returns.&nbsp;</div></td></tr></table></div></div>
<p class="Element10">
<strong>Example: Handling Interrupts</strong> </p><div class="Element170">
<a href="#" onclick="CopyElementToClipboard('code04011');">Copy Code</a></div>
<div class="Element13"><div class="Element12" id="code04011"><pre class="Element12"><strong><span style="color: #000080">void</span></strong> DRV_MYDEV_Tasks( SYS_MODULE_OBJ object )
{
    <i><span style="color: #008000">// Remove the cause of the interrupt</span></i>
    <i><span style="color: #008000">//...</span></i>

    <i><span style="color: #008000">// Clear Interrupt source</span></i>
    SYS_INT_SourceStatusClear(myIntSourceID);
}</pre></div></div>
<div class="Element63">
<div class="TableDiv">
<table cellspacing="0" class="Table0">
<tr>
<td class="Element67" valign="top" width="10%" style="border:none;">
<div class="Element68">
<img src="Note Icon.png" border="0" alt="" title=""> <strong>Note:</strong>&nbsp;</div></td><td class="Element67" valign="top" width="90%" style="border:none;">
<div class="Element68">
The value of <span class="Element146">myIntSourceID</span> is usually either a static or dynamic configuration option. Refer to the documentation for the specific device driver to identify how to define the interrupt source ID.&nbsp;</div></td></tr></table></div></div>
<p class="Element10">
<strong>Testing Interrupt</strong>&nbsp;</p>
<p class="Element10">
Sometimes it is necessary to cause an interrupt in software, possibly for testing purposes. To support this, the function <a href="23957.html">SYS_INT_SourceStatusSet</a> is provided.&nbsp;</p>
<p class="Element10">
<strong>Example: Causing an Interrupt in Software</strong> &nbsp;</p><div class="Element170">
<a href="#" onclick="CopyElementToClipboard('code04012');">Copy Code</a></div>
<div class="Element13"><div class="Element12" id="code04012"><pre class="Element12">SYS_INT_SourceStatusSet(MY_DRIVER_INTERRUPT_SOURCE);</pre></div></div>
<div class="Element63">
<div class="TableDiv">
<table cellspacing="0" class="Table0">
<tr>
<td class="Element67" valign="top" width="10%" style="border:none;">
<div class="Element68">
<img src="Note Icon.png" border="0" alt="" title=""> <strong>Note:</strong>&nbsp;</div></td><td class="Element67" valign="top" width="90%" style="border:none;">
<div class="Element68">
This feature is not available for all interrupt sources on all Microchip microcontrollers. Refer to the specific device data sheet to determine whether it is possible for software to set a specific interrupt source.&nbsp;</div></td></tr></table></div></div>
</div>
</div>
</div>
<!-- End Page Content -->

<!-- Begin Page Footer -->
<div class="Element95">
<a href="16811.html">Volume V: MPLAB Harmony Framework Reference</a> &gt; <a href="24419.html">System Service Libraries Help</a> &gt; <a href="14396.html">Interrupt System Service Library</a> &gt; <a href="24333.html">Using the Library</a> &gt; <a href="24323.html">How the Library Works</a> &gt; <a href="24331.html">Source Interrupt Management</a></div>
<div class="Element93">
<table width="100%" cellspacing="0" cellpadding="0">
<tr><td width="100%">
<div class="Element3">
 MPLAB Harmony Help</div>
</td></tr><tr><td width="100%">
<div class="Element4">
<a href="contents.htm">Contents</a> | <a href="idx.html">Index</a> | <a href="04300.html">Home</a></div>
</td></tr><tr><td width="100%">
<div class="Element97">
<a href="mailto:docerrors@microchip.com&subject=MPLAB Harmony Documentation Feedback (Topic ID: SYSTEM INT Source Interrupt Management Topic Title: Source Interrupt Management)&body=Thank you for your feedback! Please include a description of your feedback, and indicate whether you are reporting an an error in the documentation or an enhancement.">Documentation Feedback</a><br> <a href="http://support.microchip.com">Microchip Support</a></div>
</td></tr></table></div>

<!-- End Page Footer -->
</div>
</div>

<!-- End Client Area -->
</body></html>