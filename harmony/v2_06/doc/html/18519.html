<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
<head>
<title>PLIB_CAN_PrecalculatedBitRateSetup Function</title>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <meta name="generator" content="Doc-O-Matic" />
    <meta name="save" content="history" />
    <meta http-equiv="Content-Style-Type" content="text/css" />
    <link rel="STYLESHEET" href="default.css" type="text/css" />

<script type="text/javascript" src="scripts.js"></script>
</head>
<body class="Element700" onload="onBodyLoad();" onmousedown="onBodyMouseDown();">
<div id="persistenceDiv" style="display:none; behavior:url(#default#userData);"></div>

<!-- Begin Popups -->

<!-- End Popups -->

<!-- Begin Page Header -->
<div class="Element710" id="areafixed">
<div class="Element94">
<a href="16811.html">Volume V: MPLAB Harmony Framework Reference</a> &gt; <a href="17367.html">Peripheral Libraries Help</a> &gt; <a href="06512.html">CAN Peripheral Library</a> &gt; <a href="17498.html">Library Interface</a> &gt; c) Bus Speed Configuration Functions &gt; <a href="18519.html">PLIB_CAN_PrecalculatedBitRateSetup Function</a></div>
<div class="Element92">
<table width="100%" cellspacing="0" cellpadding="0">
<tr><td width="25%">
<div class="Element1">
MPLAB Harmony Help</div>
</td><td width="25%">
<div class="Element2">
<a href="contents.htm">Contents</a> | <a href="idx.html">Index</a> | <a href="04300.html">Home</a></div>
</td><td width="25%">
<div class="Element90">
<a href="18440.html">Previous</a> | <a href="17498.html">Up</a> | <a href="18441.html">Next</a></div>
</td><td width="25%">
<div class="Element96">
<a href="mailto:docerrors@microchip.com&subject=MPLAB Harmony Documentation Feedback (Topic ID: PLIB_CAN_PrecalculatedBitRateSetup@CAN_MODULE_ID@uint8_t@uint8_t@uint8_t@uint8_t@uint8_t Topic Title: PLIB_CAN_PrecalculatedBitRateSetup Function)&body=Thank you for your feedback! Please include a description of your feedback, and indicate whether you are reporting an an error in the documentation or an enhancement.">Documentation Feedback</a><br> <a href="http://support.microchip.com">Microchip Support</a></div>
</td></tr></table><div class="Element5">
PLIB_CAN_PrecalculatedBitRateSetup Function</div>
</div>
</div>

<!-- End Page Header -->

<!-- Begin Client Area -->
<div class="Element720" id="areascroll">
<div class="Element721">

<!-- Begin Page Content -->
<div class="Element58">
<a name="43"></a><div class="Element99">
C</div>
<div class="Element101"><div class="Element100"><pre class="Element100"><strong><span style="color: #000080">bool</span></strong> <strong><span style="color: #000000">PLIB_CAN_PrecalculatedBitRateSetup</span></strong>(
    <a href="06712.html">CAN_MODULE_ID</a> <strong><span style="color: #000000">index</span></strong>, 
    uint8_t <strong><span style="color: #000000">prescale</span></strong>, 
    uint8_t <strong><span style="color: #000000">syncjumpWidth</span></strong>, 
    uint8_t <strong><span style="color: #000000">propagation</span></strong>, 
    uint8_t <strong><span style="color: #000000">segment1</span></strong>, 
    uint8_t <strong><span style="color: #000000">segment2</span></strong>
);</pre></div></div>
<a name="4465736372697074696F6E"></a><div class="Element14">
Description</div>
<div class="Element11">
<div class="Element10">
<p class="Element10">
This function sets the configuration register with the desired Baud rate.</p></div>
</div>
<a name="507265636F6E646974696F6E73"></a><div class="Element14">
Preconditions</div>
<div class="Element11">
<div class="Element10">
<p class="Element10">
Use the &quot;ECAN Bit Rate Calculator&quot; MPLAB X IDE plug-in to get all of the parameters needed for the function.&nbsp;</p>
<p class="Element10">
This function works only if the CAN module is in Configuration mode. Use the <a href="18515.html">PLIB_CAN_OperationModeGet</a> function to get the current mode and the <a href="18516.html">PLIB_CAN_OperationModeSelect</a> function to change the mode.</p></div>
</div>
<a name="506172616D6574657273"></a><div class="Element14">
Parameters</div>
<div class="Element11">
<div class="Element10">
<div class="Element312">
<div class="TableDiv">
<table cellspacing="0" class="Table4">
<tr>
<td class="Element300" valign="top" width="35%">
<div class="Element301">
Parameters&nbsp;</div></td><td class="Element304" valign="top" width="65%">
<div class="Element305">
Description&nbsp;</div></td></tr><tr>
<td class="Element302" valign="top" width="35%">
<div class="Element303">
index&nbsp;</div></td><td class="Element306" valign="top" width="65%">
<div class="Element307">
Identifies the desired CAN module&nbsp;</div></td></tr><tr>
<td class="Element302" valign="top" width="35%">
<div class="Element303">
prescale&nbsp;</div></td><td class="Element306" valign="top" width="65%">
<div class="Element307">
The CAN module input clock prescale divisor.&nbsp;</div></td></tr><tr>
<td class="Element302" valign="top" width="35%">
<div class="Element303">
syncJumpWidth&nbsp;</div></td><td class="Element306" valign="top" width="65%">
<div class="Element307">
The synchronization jump width is the number of time quanta by which the CAN module may adjust phase segment 1 and segment 2 to compensate for jitter in the bit phase.&nbsp;</div></td></tr><tr>
<td class="Element302" valign="top" width="35%">
<div class="Element303">
propagation&nbsp;</div></td><td class="Element306" valign="top" width="65%">
<div class="Element307">
Propagation segment length is the number of time quanta allocated to allow for propagation variation in the bit sampling phase.&nbsp;</div></td></tr><tr>
<td class="Element302" valign="top" width="35%">
<div class="Element303">
segment1&nbsp;</div></td><td class="Element306" valign="top" width="65%">
<div class="Element307">
Phase segment 1 length(in time quanta) after the propagation segment before sampling of the bit begins.&nbsp;</div></td></tr><tr>
<td class="Element302" valign="top" width="35%">
<div class="Element303">
segment2&nbsp;</div></td><td class="Element306" valign="top" width="65%">
<div class="Element307">
Phase segment 2 length (in time quanta) after sampling has begun.&nbsp;</div></td></tr></table></div></div>
</div>
</div>
<a name="52657475726E73"></a><div class="Element14">
Returns</div>
<div class="Element11">
<div class="Element10">
<p class="Element10">

<ul class="Element637">
<li class="Element607">true = Baud rate setup success</li>
<li class="Element607">false = Baud rate setup failure, arguments passed are beyond the possible limits</li>
</ul></p></div>
</div>
<a name="52656D61726B73"></a><div class="Element14">
Remarks</div>
<div class="Element11">
<div class="Element10">
<p class="Element10">
This function's parameters must be precalculated for the desired baud rate and properly encoded for the registers of the CAN module that is in use. This function is primarily intended to be used in conjunction with the MPLAB X IDE ECAN Baud Rate calculator or the MPLAB Harmony Configurator (MHC), which precalculates and correctly encodes these values.&nbsp;</p>
<p class="Element10">
The MY_CAN_ID macro in the example above is used as a place holder for the actual CAN bus ID (as defined by the processor-specific <a href="06712.html">CAN_MODULE_ID</a> enum).&nbsp;</p>
<p class="Element10">
This feature may not be available on all devices. Please refer to the specific device data sheet to determine availability or use <a href="18489.html">PLIB_CAN_ExistsPrecalculatedBitRateSetup</a> in your application to determine whether this feature is available.</p></div>
</div>
<a name="4578616D706C65"></a><div class="Element14">
Example</div>
<div class="Element11">
<div class="Element10">
<div class="Element170">
<a href="#" onclick="CopyElementToClipboard('code01693');">Copy Code</a></div>
<div class="Element13"><div class="Element12" id="code01693"><pre class="Element12"><i><span style="color: #008000">// Use ECAN Bit Rate Calculator plug-in to get parameter values for 500kbps </span></i>
<i><span style="color: #008000">// Baud rate.</span></i>
<strong><span style="color: #000080">#define</span></strong> MY_CAN_ID       CAN_ID_1
<strong><span style="color: #000080">#define</span></strong> PRESCALE        6
<strong><span style="color: #000080">#define</span></strong> SYNCJUMPWIDTH   1
<strong><span style="color: #000080">#define</span></strong> PROPAGATION     2
<strong><span style="color: #000080">#define</span></strong> SEGMENT1        4
<strong><span style="color: #000080">#define</span></strong> SEGMENT2        4
<strong><span style="color: #000080">bool</span></strong> result;

<strong><span style="color: #000080">if</span></strong> (CAN_CONFIGURATION_MODE == <a href="18515.html">PLIB_CAN_OperationModeGet</a>(MY_CAN_ID))
{
   result = PLIB_CAN_PrecalculatedBitRateSetup( MY_CAN_ID, PRESCALE, SYNCJUMPWIDTH, 
                                       PROPAGATION, SEGMENT1, SEGMENT2 );
                                       
   <strong><span style="color: #000080">if</span></strong>(<strong><span style="color: #000080">false</span></strong> == result)
   {
       <i><span style="color: #008000">// Error occurred, handle accordingly</span></i>
   }
}</pre></div></div>
</div>
</div>
</div>
<!-- End Page Content -->

<!-- Begin Page Footer -->
<div class="Element95">
<a href="16811.html">Volume V: MPLAB Harmony Framework Reference</a> &gt; <a href="17367.html">Peripheral Libraries Help</a> &gt; <a href="06512.html">CAN Peripheral Library</a> &gt; <a href="17498.html">Library Interface</a> &gt; c) Bus Speed Configuration Functions &gt; <a href="18519.html">PLIB_CAN_PrecalculatedBitRateSetup Function</a></div>
<div class="Element93">
<table width="100%" cellspacing="0" cellpadding="0">
<tr><td width="100%">
<div class="Element3">
 MPLAB Harmony Help</div>
</td></tr><tr><td width="100%">
<div class="Element4">
<a href="contents.htm">Contents</a> | <a href="idx.html">Index</a> | <a href="04300.html">Home</a></div>
</td></tr><tr><td width="100%">
<div class="Element97">
<a href="mailto:docerrors@microchip.com&subject=MPLAB Harmony Documentation Feedback (Topic ID: PLIB_CAN_PrecalculatedBitRateSetup@CAN_MODULE_ID@uint8_t@uint8_t@uint8_t@uint8_t@uint8_t Topic Title: PLIB_CAN_PrecalculatedBitRateSetup Function)&body=Thank you for your feedback! Please include a description of your feedback, and indicate whether you are reporting an an error in the documentation or an enhancement.">Documentation Feedback</a><br> <a href="http://support.microchip.com">Microchip Support</a></div>
</td></tr></table></div>

<!-- End Page Footer -->
</div>
</div>

<!-- End Client Area -->
</body></html>