<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
<head>
<title>SD Card Driver Initialization</title>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <meta name="generator" content="Doc-O-Matic" />
    <meta name="save" content="history" />
    <meta http-equiv="Content-Style-Type" content="text/css" />
    <link rel="STYLESHEET" href="default.css" type="text/css" />

<script type="text/javascript" src="scripts.js"></script>
</head>
<body class="Element700" onload="onBodyLoad();" onmousedown="onBodyMouseDown();">
<div id="persistenceDiv" style="display:none; behavior:url(#default#userData);"></div>

<!-- Begin Popups -->

<!-- End Popups -->

<!-- Begin Page Header -->
<div class="Element710" id="areafixed">
<div class="Element94">
<a href="16811.html">Volume V: MPLAB Harmony Framework Reference</a> &gt; <a href="13069.html">Driver Libraries Help</a> &gt; <a href="22915.html">Secure Digital (SD) Card Driver Library</a> &gt; <a href="08750.html">Using the Library</a> &gt; <a href="08743.html">How the Library Works</a> &gt; <a href="08747.html">SD Card Driver Initialization</a></div>
<div class="Element92">
<table width="100%" cellspacing="0" cellpadding="0">
<tr><td width="25%">
<div class="Element1">
MPLAB Harmony Help</div>
</td><td width="25%">
<div class="Element2">
<a href="contents.htm">Contents</a> | <a href="idx.html">Index</a> | <a href="04300.html">Home</a></div>
</td><td width="25%">
<div class="Element90">
<a href="08743.html">Previous</a> | <a href="08743.html">Up</a> | <a href="08737.html">Next</a></div>
</td><td width="25%">
<div class="Element96">
<a href="mailto:docerrors@microchip.com&subject=MPLAB Harmony Documentation Feedback (Topic ID: DRV SDCARD SD Card Driver Initialization Topic Title: SD Card Driver Initialization)&body=Thank you for your feedback! Please include a description of your feedback, and indicate whether you are reporting an an error in the documentation or an enhancement.">Documentation Feedback</a><br> <a href="http://support.microchip.com">Microchip Support</a></div>
</td></tr></table><div class="Element5">
SD Card Driver Initialization</div>
</div>
</div>

<!-- End Page Header -->

<!-- Begin Client Area -->
<div class="Element720" id="areascroll">
<div class="Element721">

<!-- Begin Page Content -->
<div class="Element58">
<a name="4465736372697074696F6E"></a><div class="Element11">
<div class="Element10">
<p class="Element10">
The system performs the initialization and the reinitialization of the device driver with settings that affect only the instance of the device that is being initialized or reinitialized. During system initialization each instance of the SD Card module would be initialized with the following configuration settings (either passed dynamically at run time using <a href="10879.html">DRV_SDCARD_INIT</a> or by using initialization overrides) that are supported by the specific SD Card device hardware:
<ul class="Element635">
<li class="Element605">SPI Peripheral ID: Identifies the SPI Peripheral ID to be used for the SD Card Driver</li>
<li class="Element605">SPI Index: SPI Driver Index</li>
<li class="Element605">SD Card frequency: SD Card communication speed</li>
<li class="Element605">SPI Clock source: Peripheral clock used by the SPI</li>
<li class="Element605">Write-Protect Port: Port used to check if the SD Card is write protected</li>
<li class="Element605">Write-Protect Pin: Pin used to check if the SD Card is write protected</li>
<li class="Element605">Chip Select Port: Port used for the SPI Chip Select</li>
<li class="Element605">Chip Select Pin: Pin used for the SPI Chip Select</li>
</ul>The <a href="10880.html">DRV_SDCARD_Initialize</a> function returns an object handle of the type <a href="23975.html">SYS_MODULE_OBJ</a>. After this, the object handle returned by the initialize interface would be used by the other system interfaces, such as <a href="10865.html">DRV_SDCARD_Deinitialize</a>, <a href="10888.html">DRV_SDCARD_Status</a>, and <a href="10890.html">DRV_SDCARD_Tasks</a>. </p><div class="Element63">
<div class="TableDiv">
<table cellspacing="0" class="Table0">
<tr>
<td class="Element67" valign="top" width="10%" style="border:none;">
<div class="Element68">
<img src="Note Icon.png" border="0" alt="" title=""> <strong>Note:</strong>&nbsp;</div></td><td class="Element67" valign="top" width="90%" style="border:none;">
<div class="Element68">
The system initialization and the reinitialization settings, only affect the instance of the peripheral that is being initialized or reinitialized.&nbsp;</div></td></tr></table></div></div>
<p class="Element10">
<strong>Example:</strong> </p><div class="Element170">
<a href="#" onclick="CopyElementToClipboard('code00741');">Copy Code</a></div>
<div class="Element13"><div class="Element12" id="code00741"><pre class="Element12"><strong><span style="color: #000080">const</span></strong> DRV_SDCARD_INIT drvSDCardInit =
{
.spiId = SPI_ID_2,
.spiIndex = 0,
.sdcardSpeedHz = 20000000,
.spiClk = CLK_BUS_PERIPHERAL_2,
.writeProtectPort = PORT_CHANNEL_F,
.writeProtectBitPosition = PORTS_BIT_POS_1,
.chipSelectPort = PORT_CHANNEL_B,
.chipSelectBitPosition = PORTS_BIT_POS_14,
};

<strong><span style="color: #000080">void</span></strong> SYS_Initialize (<strong><span style="color: #000080">void</span></strong> *data)
{
.
.
sysObj.drvSDCard = DRV_SDCARD_Initialize(DRV_SDCARD_INDEX_0,(SYS_MODULE_INIT *)&amp;drvSDCardInit);
.
.
}</pre></div></div>
<div class="Element15">
Tasks Routine</div>
<p class="Element10">
The system will call <a href="10890.html">DRV_SDCARD_Tasks</a>, from system task service to maintain the driver's state machine.</p></div>
</div>
</div>
<!-- End Page Content -->

<!-- Begin Page Footer -->
<div class="Element95">
<a href="16811.html">Volume V: MPLAB Harmony Framework Reference</a> &gt; <a href="13069.html">Driver Libraries Help</a> &gt; <a href="22915.html">Secure Digital (SD) Card Driver Library</a> &gt; <a href="08750.html">Using the Library</a> &gt; <a href="08743.html">How the Library Works</a> &gt; <a href="08747.html">SD Card Driver Initialization</a></div>
<div class="Element93">
<table width="100%" cellspacing="0" cellpadding="0">
<tr><td width="100%">
<div class="Element3">
 MPLAB Harmony Help</div>
</td></tr><tr><td width="100%">
<div class="Element4">
<a href="contents.htm">Contents</a> | <a href="idx.html">Index</a> | <a href="04300.html">Home</a></div>
</td></tr><tr><td width="100%">
<div class="Element97">
<a href="mailto:docerrors@microchip.com&subject=MPLAB Harmony Documentation Feedback (Topic ID: DRV SDCARD SD Card Driver Initialization Topic Title: SD Card Driver Initialization)&body=Thank you for your feedback! Please include a description of your feedback, and indicate whether you are reporting an an error in the documentation or an enhancement.">Documentation Feedback</a><br> <a href="http://support.microchip.com">Microchip Support</a></div>
</td></tr></table></div>

<!-- End Page Footer -->
</div>
</div>

<!-- End Client Area -->
</body></html>