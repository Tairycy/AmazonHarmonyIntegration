<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
<head>
<title>Event Handling</title>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <meta name="generator" content="Doc-O-Matic" />
    <meta name="save" content="history" />
    <meta http-equiv="Content-Style-Type" content="text/css" />
    <link rel="STYLESHEET" href="default.css" type="text/css" />

<script type="text/javascript" src="scripts.js"></script>
</head>
<body class="Element700" onload="onBodyLoad();" onmousedown="onBodyMouseDown();">
<div id="persistenceDiv" style="display:none; behavior:url(#default#userData);"></div>

<!-- Begin Popups -->

<!-- End Popups -->

<!-- Begin Page Header -->
<div class="Element710" id="areafixed">
<div class="Element94">
<a href="16811.html">Volume V: MPLAB Harmony Framework Reference</a> &gt; <a href="27418.html">USB Libraries Help</a> &gt; <a href="27320.html">USB Device Library</a> &gt; <a href="27322.html">USB Device Stack Porting Guide</a> &gt; <a href="27301.html">USB Device Stack Porting Example</a> &gt; <a href="27297.html">Source Code Analysis</a> &gt; <a href="27295.html">Event Handling</a></div>
<div class="Element92">
<table width="100%" cellspacing="0" cellpadding="0">
<tr><td width="25%">
<div class="Element1">
MPLAB Harmony Help</div>
</td><td width="25%">
<div class="Element2">
<a href="contents.htm">Contents</a> | <a href="idx.html">Index</a> | <a href="04300.html">Home</a></div>
</td><td width="25%">
<div class="Element90">
<a href="27285.html">Previous</a> | <a href="27297.html">Up</a> | <a href="27293.html">Next</a></div>
</td><td width="25%">
<div class="Element96">
<a href="mailto:docerrors@microchip.com&subject=MPLAB Harmony Documentation Feedback (Topic ID: USB DEV PORTING Porting Event Handling Topic Title: Event Handling)&body=Thank you for your feedback! Please include a description of your feedback, and indicate whether you are reporting an an error in the documentation or an enhancement.">Documentation Feedback</a><br> <a href="http://support.microchip.com">Microchip Support</a></div>
</td></tr></table><div class="Element5">
Event Handling</div>
</div>
</div>

<!-- End Page Header -->

<!-- Begin Client Area -->
<div class="Element720" id="areascroll">
<div class="Element721">

<!-- Begin Page Content -->
<div class="Element58">
<a name="4465736372697074696F6E"></a><div class="Element11">
<div class="Element10">
<p class="Element10">
The MLA USB Device Layer provides events to the application. In the MLA &quot;Device – CDC – Basic Demo&quot; demonstration application, the USB Device Layer application event handle, USER_USB_CALLBACK_EVENT_HANDLER, is implemented at line 1427 of the project <span class="Element146">main.c</span> file. The MLA USB CDC function driver does not provide events to the application.&nbsp;</p>
<p class="Element10">
The MPLAB Harmony USB Device Layer Event handler is implemented in the APP_USBDeviceEventHandler function. The following table lists the MLA USB Device Layer Event and the equivalent MPLAB Harmony USB Device Layer Events. The MPLAB Harmony USB Device Layer features additional events that facilitate application device state management. Refer to the <a href="27319.html">USB Device Layer Library</a> documentation for more details. </p><div class="Element63">
<div class="TableDiv">
<table cellspacing="0" class="Table2">
<tr>
<td class="Element65" valign="top" width="19%">
<div class="Element66">
MLA USB Device Layer Events&nbsp;</div></td><td class="Element65" valign="top" width="81%">
<div class="Element66">
MPLAB Harmony USB Device Layer Events&nbsp;</div></td></tr><tr>
<td class="Element67" valign="top" width="19%">
<div class="Element68">
EVENT_CONFIGURED&nbsp;</div></td><td class="Element67" valign="top" width="81%">
<div class="Element68">
USB_DEVICE_EVENT_CONFIGURED&nbsp;</div></td></tr><tr>
<td class="Element67" valign="top" width="19%">
<div class="Element68">
EVENT_SET_DESCRIPTOR&nbsp;</div></td><td class="Element67" valign="top" width="81%">
<div class="Element68">
The USB Device Layer implementation in the MPLAB Harmony v0.80.xx installs Set Descriptor requests from the Host. The USB Device Layer implementation in the MPLAB Harmony v1.0 will provide this event to the application as USB_DEVICE_EVENT_SET_DESCRIPTOR event.&nbsp;</div></td></tr><tr>
<td class="Element67" valign="top" width="19%">
<div class="Element68">
EVENT_EP0_REQUEST&nbsp;</div></td><td class="Element67" valign="top" width="81%">
<div class="Element68">
USB_DEVICE_EVENT_CONTROL_TRANSFER_SETUP_REQUEST&nbsp;</div></td></tr><tr>
<td class="Element67" valign="top" width="19%">
<div class="Element68">
EVENT_ATTACH&nbsp;</div></td><td class="Element67" valign="top" width="81%">
<div class="Element68">
USB_DEVICE_EVENT_POWER_DETECTED&nbsp;</div></td></tr><tr>
<td class="Element67" valign="top" width="19%">
<div class="Element68">
EVENT_TRANSFER_TERMINATED&nbsp;</div></td><td class="Element67" valign="top" width="81%">
<div class="Element68">
USB_DEVICE_EVENT_CONTROL_TRANSFER_ABORTED&nbsp;</div></td></tr><tr>
<td class="Element67" valign="top" width="19%">
<div class="Element68">
EVENT_TRANSFER&nbsp;</div></td><td class="Element67" valign="top" width="81%">
<div class="Element68">
Not Applicable for standard device types. The USB Device Layer implementation in the MPLAB Harmony v1.0 will provide a USB_DEVICE_EVENT_ENDPOINT_READ_COMPLETE and a USB_DEVICE_ENDPOINT_WRITE_COMPLETE event for Generic device implementations.&nbsp;</div></td></tr><tr>
<td class="Element67" valign="top" width="19%">
<div class="Element68">
EVENT_SOF&nbsp;</div></td><td class="Element67" valign="top" width="81%">
<div class="Element68">
USB_DEVICE_EVENT_SOF&nbsp;</div></td></tr><tr>
<td class="Element67" valign="top" width="19%">
<div class="Element68">
EVENT_RESUME&nbsp;</div></td><td class="Element67" valign="top" width="81%">
<div class="Element68">
USB_DEVICE_EVENT_RESUMED&nbsp;</div></td></tr><tr>
<td class="Element67" valign="top" width="19%">
<div class="Element68">
EVENT_SUSPEND&nbsp;</div></td><td class="Element67" valign="top" width="81%">
<div class="Element68">
USB_DEVICE_EVENT_SUSPENDED&nbsp;</div></td></tr><tr>
<td class="Element67" valign="top" width="19%">
<div class="Element68">
EVENT_BUS_ERROR&nbsp;</div></td><td class="Element67" valign="top" width="81%">
<div class="Element68">
USB_DEVICE_EVENT_ERROR&nbsp;</div></td></tr><tr>
<td class="Element67" valign="top" width="19%">
<div class="Element68">
EVENT_TRANSFER_TERMINATED&nbsp;</div></td><td class="Element67" valign="top" width="81%">
<div class="Element68">
The USB Device Layer implementation in the MPLAB Harmony does not provide this event.&nbsp;</div></td></tr></table></div></div>
<p class="Element10">

<ul class="Element630">
<li class="Element600">The MLA USB Device Layer Event Handler function is fixed and needs to be specified for the code to compile. The MPLAB Harmony USB Device Layer Event Handler is Device Layer instance specific and is set through the <a href="27738.html">USB_DEVICE_EventHandlerSet</a> function. This function is called after the device layer is opened successfully in the APP_Tasks function.</li>
<li class="Element600">The MLA USB Device Layer Event Handler implementation must invoke the required function driver initialization routine in the EVENT_CONFIGURED event. This is not required in the MPLAB Harmony USB Device Layer Event Handler. The MPLAB Harmony USB Device Layer internally initializes all the function drivers associated with the configuration that the USB Host has set. The application should instead register event handlers with all the initialized function drivers.</li>
<li class="Element600">The MLA USB Device Layer Event Handler implementation must handle class specific control requests in the EVENT_EP0_REQUEST event response. The MPLAB Harmony USB Device Layer internally routes class specific requests directly to the function drivers. This process does not require application intervention. The MPLAB Harmony USB_DEVICE_EVENT_CONTROL_TRANSFER_SETUP_REQUEST event is generated when device layer receives a control transfer that is cannot be handled by the Device Layer or the Function Driver.</li>
</ul>The MLA CDC Function Driver Interface is not event based and hence does not require an event handler. The MPLAB CDC Function Driver Interface is event based and requires a function driver instance specific event handler to be registered. This event handler is registered through the <a href="27638.html">USB_DEVICE_CDC_EventHandlerSet</a> function. The event handler should be registered in the Device Layer Set Configuration Event</p></div>
</div>
</div>
<!-- End Page Content -->

<!-- Begin Page Footer -->
<div class="Element95">
<a href="16811.html">Volume V: MPLAB Harmony Framework Reference</a> &gt; <a href="27418.html">USB Libraries Help</a> &gt; <a href="27320.html">USB Device Library</a> &gt; <a href="27322.html">USB Device Stack Porting Guide</a> &gt; <a href="27301.html">USB Device Stack Porting Example</a> &gt; <a href="27297.html">Source Code Analysis</a> &gt; <a href="27295.html">Event Handling</a></div>
<div class="Element93">
<table width="100%" cellspacing="0" cellpadding="0">
<tr><td width="100%">
<div class="Element3">
 MPLAB Harmony Help</div>
</td></tr><tr><td width="100%">
<div class="Element4">
<a href="contents.htm">Contents</a> | <a href="idx.html">Index</a> | <a href="04300.html">Home</a></div>
</td></tr><tr><td width="100%">
<div class="Element97">
<a href="mailto:docerrors@microchip.com&subject=MPLAB Harmony Documentation Feedback (Topic ID: USB DEV PORTING Porting Event Handling Topic Title: Event Handling)&body=Thank you for your feedback! Please include a description of your feedback, and indicate whether you are reporting an an error in the documentation or an enhancement.">Documentation Feedback</a><br> <a href="http://support.microchip.com">Microchip Support</a></div>
</td></tr></table></div>

<!-- End Page Footer -->
</div>
</div>

<!-- End Client Area -->
</body></html>