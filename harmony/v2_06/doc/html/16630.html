<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
<head>
<title>Step 9: Create Multiple Module Instances</title>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <meta name="generator" content="Doc-O-Matic" />
    <meta name="save" content="history" />
    <meta http-equiv="Content-Style-Type" content="text/css" />
    <link rel="STYLESHEET" href="default.css" type="text/css" />

<script type="text/javascript" src="scripts.js"></script>
</head>
<body class="Element700" onload="onBodyLoad();" onmousedown="onBodyMouseDown();">
<div id="persistenceDiv" style="display:none; behavior:url(#default#userData);"></div>

<!-- Begin Popups -->

<!-- End Popups -->

<!-- Begin Page Header -->
<div class="Element710" id="areafixed">
<div class="Element94">
<a href="16809.html">Volume III: MPLAB Harmony Configurator (MHC)</a> &gt; <a href="07406.html">MPLAB Harmony Configurator Developer's Guide</a> &gt; <a href="16593.html">Adding New Libraries</a> &gt; <a href="16597.html">Developing a New hconfig File</a> &gt; <a href="16630.html">Step 9: Create Multiple Module Instances</a></div>
<div class="Element92">
<table width="100%" cellspacing="0" cellpadding="0">
<tr><td width="25%">
<div class="Element1">
MPLAB Harmony Help</div>
</td><td width="25%">
<div class="Element2">
<a href="contents.htm">Contents</a> | <a href="idx.html">Index</a> | <a href="04300.html">Home</a></div>
</td><td width="25%">
<div class="Element90">
<a href="16629.html">Previous</a> | <a href="16597.html">Up</a> | <a href="16632.html">Next</a></div>
</td><td width="25%">
<div class="Element96">
<a href="mailto:docerrors@microchip.com&subject=MPLAB Harmony Documentation Feedback (Topic ID: MHC DEV GUIDE Step 9: Create Multiple Module Instances Topic Title: Step 9: Create Multiple Module Instances)&body=Thank you for your feedback! Please include a description of your feedback, and indicate whether you are reporting an an error in the documentation or an enhancement.">Documentation Feedback</a><br> <a href="http://support.microchip.com">Microchip Support</a></div>
</td></tr></table><div class="Element5">
Step 9: Create Multiple Module Instances</div>
</div>
</div>

<!-- End Page Header -->

<!-- Begin Client Area -->
<div class="Element720" id="areascroll">
<div class="Element721">

<!-- Begin Page Content -->
<div class="Element58">
<a name="4465736372697074696F6E"></a><div class="Element11">
<div class="Element10">
<p class="Element10">
Several modules support multiple instances, requiring separate configuration options for each instance. In this case, the configuration options of different instances are identical, but may be set to different values. This is handled in MHC by a combination of the &quot;instances&quot; keyword, and a FreeMarker template that is processed once for each instance of the module. As an example, we will create three instances of our hconfig demonstration driver, each containing two configuration options.&nbsp;</p>
<p class="Element10">
The instance template is sourced like a normal hconfig file, but with the keyword &quot;instances&quot; preceded by the maximum number of instances supported. A configuration option is added to allow the user to select the number of instances actually configured and instantiated. </p><p class="Element10" style="text-align: center;">
<img src="MHC Step 9 Figure 1.png" border="0" alt="" title=""></p><p class="Element10">
The FreeMarker template is a marked-up hconfig file that is processed through FreeMarker once for each instance. Each time it is processed, the <span class="Element146">${INSTANCE}</span> variable is set to the instance number. </p><p class="Element10" style="text-align: center;">
<img src="MHC Step 9 Figure 2.png" border="0" alt="" title=""></p><p class="Element10">
When MHC is run, the user is prompted for the number of instances. Configuration options for each instance are displayed in the menu. </p><p class="Element10" style="text-align: center;">
<img src="MHC Step 9 Figure 3.png" border="0" alt="" title=""></p><p class="Element10">
The FreeMarker templates that are used to generate code must also be updated for multiple instances. </p><p class="Element10" style="text-align: center;">
<img src="MHC Step 9 Figure 4.png" border="0" alt="" title=""></p><p class="Element10">
When the code is generated, code is generated for each instance. </p><p class="Element10" style="text-align: center;">
<img src="MHC Step 9 Figure 5.png" border="0" alt="" title=""></p></div>
</div>
</div>
<!-- End Page Content -->

<!-- Begin Page Footer -->
<div class="Element95">
<a href="16809.html">Volume III: MPLAB Harmony Configurator (MHC)</a> &gt; <a href="07406.html">MPLAB Harmony Configurator Developer's Guide</a> &gt; <a href="16593.html">Adding New Libraries</a> &gt; <a href="16597.html">Developing a New hconfig File</a> &gt; <a href="16630.html">Step 9: Create Multiple Module Instances</a></div>
<div class="Element93">
<table width="100%" cellspacing="0" cellpadding="0">
<tr><td width="100%">
<div class="Element3">
 MPLAB Harmony Help</div>
</td></tr><tr><td width="100%">
<div class="Element4">
<a href="contents.htm">Contents</a> | <a href="idx.html">Index</a> | <a href="04300.html">Home</a></div>
</td></tr><tr><td width="100%">
<div class="Element97">
<a href="mailto:docerrors@microchip.com&subject=MPLAB Harmony Documentation Feedback (Topic ID: MHC DEV GUIDE Step 9: Create Multiple Module Instances Topic Title: Step 9: Create Multiple Module Instances)&body=Thank you for your feedback! Please include a description of your feedback, and indicate whether you are reporting an an error in the documentation or an enhancement.">Documentation Feedback</a><br> <a href="http://support.microchip.com">Microchip Support</a></div>
</td></tr></table></div>

<!-- End Page Footer -->
</div>
</div>

<!-- End Client Area -->
</body></html>