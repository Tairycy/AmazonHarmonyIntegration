<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
<head>
<title>universal_audio_encoders</title>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <meta name="generator" content="Doc-O-Matic" />
    <meta name="save" content="history" />
    <meta http-equiv="Content-Style-Type" content="text/css" />
    <link rel="STYLESHEET" href="default.css" type="text/css" />

<script type="text/javascript" src="scripts.js"></script>
</head>
<body class="Element700" onload="onBodyLoad();" onmousedown="onBodyMouseDown();">
<div id="persistenceDiv" style="display:none; behavior:url(#default#userData);"></div>

<!-- Begin Popups -->

<!-- End Popups -->

<!-- Begin Page Header -->
<div class="Element710" id="areafixed">
<div class="Element94">
<a href="04300.html">Volume I: Getting Started With MPLAB Harmony Libraries and Applications</a> &gt; <a href="03342.html">Applications Help</a> &gt; <a href="04317.html">Audio Demonstrations</a> &gt; <a href="03389.html">Demonstrations</a> &gt; <a href="03416.html">universal_audio_encoders</a></div>
<div class="Element92">
<table width="100%" cellspacing="0" cellpadding="0">
<tr><td width="25%">
<div class="Element1">
MPLAB Harmony Help</div>
</td><td width="25%">
<div class="Element2">
<a href="contents.htm">Contents</a> | <a href="idx.html">Index</a> | <a href="04300.html">Home</a></div>
</td><td width="25%">
<div class="Element90">
<a href="03415.html">Previous</a> | <a href="03389.html">Up</a> | <a href="03417.html">Next</a></div>
</td><td width="25%">
<div class="Element96">
<a href="mailto:docerrors@microchip.com&subject=MPLAB Harmony Documentation Feedback (Topic ID: APPS AUDIO universal_audio_encoders Topic Title: universal_audio_encoders)&body=Thank you for your feedback! Please include a description of your feedback, and indicate whether you are reporting an an error in the documentation or an enhancement.">Documentation Feedback</a><br> <a href="http://support.microchip.com">Microchip Support</a></div>
</td></tr></table><div class="Element5">
universal_audio_encoders</div>
</div>
</div>

<!-- End Page Header -->

<!-- Begin Client Area -->
<div class="Element720" id="areascroll">
<div class="Element721">

<!-- Begin Page Content -->
<div class="Element58">
<a name="4465736372697074696F6E"></a><div class="Element11">
<div class="Element10">
<p class="Element10">
This application demonstrates an audio encoder by taking a voice recording from a microphone, and storing encoded voice data to a mass storage device (USB Flash drive). This application first waits for a USB Flash drive to connect, and after connection is successful, voice data from a microphone is ready to be captured. During capture, data is encoded at the same time, the encoded data is written to a new create file on the root level of USB thumb drive file system, and when the voice capture ends, a <span class="Element146">.wav</span> format will be saved on the USB Flash drive.&nbsp;</p>
<p class="Element10">
This application provides examples on encoding PCM and Opus data. In the configuration ak4642_bt_audio_dk, 16 kHz, Stereo 16-bit audio PCM data is encoded and encapsulated in WAV format, while in the configuration pic32mz_ef_sk_meb2, 16 kHz, Stereo 16-bit audio Opus data is encoded and encapsulated in Ogg format. The Opus Encoder is not supported on the ak4642bt_audio_dk configuration, since the Opus Codec Library requires 292 KB program memory.</p><div class="Element15">
Architecture</div>
<p class="Element10">
This universal audio encoders application demonstrates a framework to encode data to an audio file. the ping-pong buffer technique is used in the application to record and encode voice data simultaneously. This application also provides a graphics screen displaying prompting help messages at each step in the demonstration process. </p><p class="Element10" style="text-align: center;">
<img src="APPS AUDIO universal_audi_encoders demo block diagram.png" border="0" alt="" title=""></p><div class="Element15">
Demonstration Features</div>

<ul class="Element630">
<li class="Element600"><a href="27434.html">USB MSD Host Client Driver</a></li>
<li class="Element600">FAT32 File System</li>
<li class="Element600"><a href="13058.html">AKM Codec Drivers</a></li>
<li class="Element600"><a href="13740.html">I2S Driver</a> usage in audio system</li>
<li class="Element600"><a href="13729.html">I2C Driver</a> for AKM Codec control</li>
<li class="Element600"><a href="12784.html">Graphics Library</a> usage</li>
<li class="Element600">Audio Encoders and Audio Containers System</li>
</ul><div class="Element15">
Tools Setup Differences</div>
<p class="Element10">
The following descriptions explain the different MHC settings for this demonstration.&nbsp;</p>
<p class="Element10">
<strong>I2S Driver</strong>&nbsp;</p>
<p class="Element10">
The Sampling rate field is set to 16000 for voice recording. In DMA mode, only receive DMA support and Enable DMA channel Interrupts are selected. Under I2S Driver Instance, choose the Audio Communication Width to be SPI_AUDIO_COMMUNICATION_16DATA_16FIFO_32CHANNEL and choose Queue Size Receive to be 2.&nbsp;</p>
<p class="Element10">
<strong>SPI/I2S Module Pin</strong>&nbsp;</p>
<p class="Element10">
The SPI/I2S module pin setting is needed to ensure that I2S is running correctly.&nbsp;</p>
<p class="Element10">
For example, on the PIC32 Bluetooth Audio Development Kit, SCK of I2S1 is set to port 70, SDI1 is to port 73, SDO1 is to 72, and SS1(out) is set to 69.&nbsp;</p>
<p class="Element10">
<strong>Audio Encoders and Containers</strong>&nbsp;</p>
<p class="Element10">
In the ak4642_bt_audio_dk, and ak4954_bt_audio_dk configurations, the PCM and ADPCM encoders are enabled, and the WAV container is selected in MHC, as shown in the following figure. </p><p class="Element10" style="text-align: center;">
<img src="APPS AUDIO Universal_Audio_encoders encoder_btadk_config.png" border="0" alt="" title="">&nbsp;</p>
<p class="Element10" style="text-align: center;">
&nbsp;</p>
<p class="Element10" style="text-align: center;">
&nbsp;</p><p class="Element10">
In the pic32mz_ef_sk_meb2 configuration, all encoders are selected in MHC, as shown in the following figure. </p><p class="Element10" style="text-align: center;">
<img src="APPS AUDIO universal_audio_encoders encoder_meb2_config.png" border="0" alt="" title=""></p><p class="Element10">
. </p><div class="Element63">
<div class="TableDiv">
<table cellspacing="0" class="Table0">
<tr>
<td class="Element67" valign="top" width="10%" style="border:none;">
<div class="Element68">
<img src="Note Icon.png" border="0" alt="" title=""> <strong>Note:</strong>&nbsp;</div></td><td class="Element67" valign="top" width="90%" style="border:none;">
<div class="Element68">
PCM and ADPCM encoders can only be composited with WAV container, and Opus encoder can only be composited with Ogg containers. Any combinations other than these are not guaranteed to work properly.&nbsp;</div></td></tr></table></div></div>
</div>
</div>
<a name="546F70696373"></a><div class="Element14">
Topics</div>
<div class="Element11">
<div class="Element10">
<div class="Element212">
<div class="TableDiv">
<table cellspacing="0" class="Table1">
<tr>
<td class="Element200" valign="top" width="35%">
<div class="Element201">
Name&nbsp;</div></td><td class="Element204" valign="top" width="65%">
<div class="Element205">
Description&nbsp;</div></td></tr><tr>
<td class="Element202" valign="top" width="35%">
<div class="Element203">
<a href="03417.html">Building the Application</a>&nbsp;</div></td><td class="Element206" valign="top" width="65%">
<div class="Element207">
This section identifies the MPLAB X IDE project name and location and lists and describes the available configurations for the demonstration.&nbsp;</div></td></tr><tr>
<td class="Element202" valign="top" width="35%">
<div class="Element203">
<a href="03418.html">Configuring the Hardware</a>&nbsp;</div></td><td class="Element206" valign="top" width="65%">
<div class="Element207">
This section describes how to configure the supported hardware.&nbsp;</div></td></tr><tr>
<td class="Element202" valign="top" width="35%">
<div class="Element203">
<a href="03419.html">Running the Demonstration</a>&nbsp;</div></td><td class="Element206" valign="top" width="65%">
<div class="Element207">
This section demonstrates how to run the demonstration.&nbsp;</div></td></tr></table></div></div>
</div>
</div>
</div>
<!-- End Page Content -->

<!-- Begin Page Footer -->
<div class="Element95">
<a href="04300.html">Volume I: Getting Started With MPLAB Harmony Libraries and Applications</a> &gt; <a href="03342.html">Applications Help</a> &gt; <a href="04317.html">Audio Demonstrations</a> &gt; <a href="03389.html">Demonstrations</a> &gt; <a href="03416.html">universal_audio_encoders</a></div>
<div class="Element93">
<table width="100%" cellspacing="0" cellpadding="0">
<tr><td width="100%">
<div class="Element3">
 MPLAB Harmony Help</div>
</td></tr><tr><td width="100%">
<div class="Element4">
<a href="contents.htm">Contents</a> | <a href="idx.html">Index</a> | <a href="04300.html">Home</a></div>
</td></tr><tr><td width="100%">
<div class="Element97">
<a href="mailto:docerrors@microchip.com&subject=MPLAB Harmony Documentation Feedback (Topic ID: APPS AUDIO universal_audio_encoders Topic Title: universal_audio_encoders)&body=Thank you for your feedback! Please include a description of your feedback, and indicate whether you are reporting an an error in the documentation or an enhancement.">Documentation Feedback</a><br> <a href="http://support.microchip.com">Microchip Support</a></div>
</td></tr></table></div>

<!-- End Page Footer -->
</div>
</div>

<!-- End Client Area -->
</body></html>