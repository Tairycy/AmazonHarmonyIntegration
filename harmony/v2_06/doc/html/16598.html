<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
<head>
<title>Developing MPLAB Harmony FreeMarker Templates</title>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <meta name="generator" content="Doc-O-Matic" />
    <meta name="save" content="history" />
    <meta http-equiv="Content-Style-Type" content="text/css" />
    <link rel="STYLESHEET" href="default.css" type="text/css" />

<script type="text/javascript" src="scripts.js"></script>
</head>
<body class="Element700" onload="onBodyLoad();" onmousedown="onBodyMouseDown();">
<div id="persistenceDiv" style="display:none; behavior:url(#default#userData);"></div>

<!-- Begin Popups -->

<!-- End Popups -->

<!-- Begin Page Header -->
<div class="Element710" id="areafixed">
<div class="Element94">
<a href="16809.html">Volume III: MPLAB Harmony Configurator (MHC)</a> &gt; <a href="07406.html">MPLAB Harmony Configurator Developer's Guide</a> &gt; <a href="16593.html">Adding New Libraries</a> &gt; <a href="16598.html">Developing MPLAB Harmony FreeMarker Templates</a></div>
<div class="Element92">
<table width="100%" cellspacing="0" cellpadding="0">
<tr><td width="25%">
<div class="Element1">
MPLAB Harmony Help</div>
</td><td width="25%">
<div class="Element2">
<a href="contents.htm">Contents</a> | <a href="idx.html">Index</a> | <a href="04300.html">Home</a></div>
</td><td width="25%">
<div class="Element90">
<a href="16604.html">Previous</a> | <a href="16593.html">Up</a> | <a href="16599.html">Next</a></div>
</td><td width="25%">
<div class="Element96">
<a href="mailto:docerrors@microchip.com&subject=MPLAB Harmony Documentation Feedback (Topic ID: MHC DEV GUIDE Developing MPLAB Harmony FreeMarker Templates Topic Title: Developing MPLAB Harmony FreeMarker Templates)&body=Thank you for your feedback! Please include a description of your feedback, and indicate whether you are reporting an an error in the documentation or an enhancement.">Documentation Feedback</a><br> <a href="http://support.microchip.com">Microchip Support</a></div>
</td></tr></table><div class="Element5">
Developing MPLAB Harmony FreeMarker Templates</div>
</div>
</div>

<!-- End Page Header -->

<!-- Begin Client Area -->
<div class="Element720" id="areascroll">
<div class="Element721">

<!-- Begin Page Content -->
<div class="Element58">
<a name="4465736372697074696F6E"></a><div class="Element11">
<div class="Element10">
<p class="Element10">
MHC uses FreeMarker to generate code from template files. The template files use the configuration settings generated from hconfig files to generate code specific to the configuration. A complete description of the FreeMarker language is beyond the scope of this document. Please refer to the online FreeMarker manual, which available at: <a href="#" onclick="openExternalLink('http://freemarker.org/docs');"><img src="indicator_external_link.gif" border="0" alt="" title="">http://freemarker.org/docs/</a>. This section will illustrate how MHC uses it with a simple example.&nbsp;</p>
<p class="Element10">
The configuration options generated by MHC are written to a <span class="Element146">&lt;configuration&gt;.mhc</span> file in the project’s <span class="Element146">firmware/src/system_config/&lt;configuration&gt;</span> directory. In our example, the project name is <span class="Element146">hconfig_test_demo</span>, and the configuration is &quot;default&quot;. By default, a number of files are generated by MHC and placed in the application’s <span class="Element146">firmware/src</span> directory. The configuration-specific files are in the <span class="Element146">firmware/src/ system_config/&lt;configuration&gt;</span> directory. The configuration options are written to the system_config.h file. For this example, we will first show how to create a FreeMarker template for our <span class="Element146">system_config.h</span>, and insert it into MHC.&nbsp;</p>
<p class="Element10">
For this example, we will use a simple version of <span class="Element146">drv_hconfig_example.hconfig</span>, with just three config options, CFG1, CFG2, and CFG3.&nbsp;</p>
<p class="Element10">
First, we need to create the template for <span class="Element146">system_config.h</span>. By convention, this file will be named <span class="Element146">system_config.h.ftl</span>, and be placed in the <span class="Element146">&lt;module&gt;/templates</span> directory. </p><p class="Element10" style="text-align: center;">
<img src="MHC FreeMarker Figure 1.png" border="0" alt="" title=""></p><p class="Element10">
Second, we need to implement the source code template, as shown by the following example. </p><p class="Element10" style="text-align: center;">
<img src="MHC FreeMarker Figure 2.png" border="0" alt="" title=""></p><p class="Element10">
The source code template will include FreeMarker &quot;markup&quot; statements (defined between the <span class="Element146">&lt;#</span> and <span class="Element146">&gt;</span> escape tags and will use FreeMarker variables (defined between the <span class="Element146">${</span> and <span class="Element146">}</span> escape tags. The FreeMarker statements are interpreted semantically by the FreeMarker engine and the variables are textually replaced using values defined using the MHC by the user and stored in the <span class="Element146">.mhc</span> file. </p><div class="Element63">
<div class="TableDiv">
<table cellspacing="0" class="Table0">
<tr>
<td class="Element67" valign="top" width="10%" style="border:none;">
<div class="Element68">
<img src="Note Icon.png" border="0" alt="" title=""> <strong>Note:</strong>&nbsp;</div></td><td class="Element67" valign="top" width="90%" style="border:none;">
<div class="Element68">
Symbols defined in hconfig files must be prefixed with <span class="Element146">CONFIG_</span> to use them in FreeMarker templates.&nbsp;</div></td></tr></table></div></div>
<p class="Element10">
The resulting customized source code is generated directly into the configuration-specific folder of the current project.</p></div>
</div>
<a name="546F70696373"></a><div class="Element14">
Topics</div>
<div class="Element11">
<div class="Element10">
<div class="Element212">
<div class="TableDiv">
<table cellspacing="0" class="Table1">
<tr>
<td class="Element200" valign="top" width="35%">
<div class="Element201">
Name&nbsp;</div></td><td class="Element204" valign="top" width="65%">
<div class="Element205">
Description&nbsp;</div></td></tr><tr>
<td class="Element202" valign="top" width="35%">
<div class="Element203">
<a href="16599.html">Device Configuration</a>&nbsp;</div></td><td class="Element206" valign="top" width="65%">
<div class="Element207">
This topic describes the CONFIG_DEVICE hconfig symbol.&nbsp;</div></td></tr></table></div></div>
</div>
</div>
</div>
<!-- End Page Content -->

<!-- Begin Page Footer -->
<div class="Element95">
<a href="16809.html">Volume III: MPLAB Harmony Configurator (MHC)</a> &gt; <a href="07406.html">MPLAB Harmony Configurator Developer's Guide</a> &gt; <a href="16593.html">Adding New Libraries</a> &gt; <a href="16598.html">Developing MPLAB Harmony FreeMarker Templates</a></div>
<div class="Element93">
<table width="100%" cellspacing="0" cellpadding="0">
<tr><td width="100%">
<div class="Element3">
 MPLAB Harmony Help</div>
</td></tr><tr><td width="100%">
<div class="Element4">
<a href="contents.htm">Contents</a> | <a href="idx.html">Index</a> | <a href="04300.html">Home</a></div>
</td></tr><tr><td width="100%">
<div class="Element97">
<a href="mailto:docerrors@microchip.com&subject=MPLAB Harmony Documentation Feedback (Topic ID: MHC DEV GUIDE Developing MPLAB Harmony FreeMarker Templates Topic Title: Developing MPLAB Harmony FreeMarker Templates)&body=Thank you for your feedback! Please include a description of your feedback, and indicate whether you are reporting an an error in the documentation or an enhancement.">Documentation Feedback</a><br> <a href="http://support.microchip.com">Microchip Support</a></div>
</td></tr></table></div>

<!-- End Page Footer -->
</div>
</div>

<!-- End Client Area -->
</body></html>