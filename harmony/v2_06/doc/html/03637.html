<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
<head>
<title>Running the Demonstration</title>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <meta name="generator" content="Doc-O-Matic" />
    <meta name="save" content="history" />
    <meta http-equiv="Content-Style-Type" content="text/css" />
    <link rel="STYLESHEET" href="default.css" type="text/css" />

<script type="text/javascript" src="scripts.js"></script>
</head>
<body class="Element700" onload="onBodyLoad();" onmousedown="onBodyMouseDown();">
<div id="persistenceDiv" style="display:none; behavior:url(#default#userData);"></div>

<!-- Begin Popups -->

<!-- End Popups -->

<!-- Begin Page Header -->
<div class="Element710" id="areafixed">
<div class="Element94">
<a href="04300.html">Volume I: Getting Started With MPLAB Harmony Libraries and Applications</a> &gt; <a href="03342.html">Applications Help</a> &gt; <a href="12132.html">File System Demonstrations</a> &gt; <a href="03638.html">Demonstrations</a> &gt; <a href="03648.html">sdcard_fat_single_disk</a> &gt; <a href="03637.html">Running the Demonstration</a></div>
<div class="Element92">
<table width="100%" cellspacing="0" cellpadding="0">
<tr><td width="25%">
<div class="Element1">
MPLAB Harmony Help</div>
</td><td width="25%">
<div class="Element2">
<a href="contents.htm">Contents</a> | <a href="idx.html">Index</a> | <a href="04300.html">Home</a></div>
</td><td width="25%">
<div class="Element90">
<a href="03636.html">Previous</a> | <a href="03648.html">Up</a> | <a href="03650.html">Next</a></div>
</td><td width="25%">
<div class="Element96">
<a href="mailto:docerrors@microchip.com&subject=MPLAB Harmony Documentation Feedback (Topic ID: APPS FS demo_sdcard_fat_single_running Topic Title: Running the Demonstration)&body=Thank you for your feedback! Please include a description of your feedback, and indicate whether you are reporting an an error in the documentation or an enhancement.">Documentation Feedback</a><br> <a href="http://support.microchip.com">Microchip Support</a></div>
</td></tr></table><div class="Element5">
Running the Demonstration</div>
</div>
</div>

<!-- End Page Header -->

<!-- Begin Client Area -->
<div class="Element720" id="areascroll">
<div class="Element721">

<!-- Begin Page Content -->
<div class="Element58">
<a name="4465736372697074696F6E"></a><div class="Element11">
<div class="Element10">
<p class="Element10">
Select the MPLAB X IDE project configuration:</p>
<ul class="Element630">
<li class="Element600">pic32mx795_pim_e16_int_dyn (for PIC32MX devices)</li>
<li class="Element600">pic32mx795_pim_e16_int_dyn_freertos (for PIC32MX devices)</li>
<li class="Element600">pic32mx470_pim_e16_int_dyn (for PIC32MX devices)</li>
<li class="Element600">pic32mz_ec_sk_int_dyn (for PIC32MZ EC devices)</li>
<li class="Element600">pic32mz_ef_sk_int_dyn (for PIC32MZ EF devices)</li>
<li class="Element600">pic32mz_ef_sk_int_dyn_freertos (for PIC32MZ EF devices)</li>
<li class="Element600">pic32mz_da_sk_adma (for PIC32MZ DA devices)</li>
</ul><p class="Element10">
Insert the SD card, which contains the file named <span class="Element146">FILE_TOO_LONG_NAME_EXAMPLE_123.JPG</span>. The file can be of any size.&nbsp;</p>
<p class="Element10">
Compile the selected configuration in the MPLAB X IDE project and run the code. After a few seconds, once the LED illuminates, remove the SD card from the SD Card PICtail Daughter Board (for PIC32MX) or MEB II (for PIC32MZ) and insert it into the SD card reader on a personal computer. Upon examining the contents of the SD card, a directory <span class="Element146">Dir1</span> will have been created. Inside the <span class="Element146">Dir1</span> folder, a file named <span class="Element146">FILE_TOO_LONG_NAME_EXAMPLE_123_1.JPG</span> will be present. The file, <span class="Element146">FILE_TOO_LONG_NAME_EXAMPLE_123_1.JPG</span>, will be a copy of <span class="Element146">FILE_TOO_LONG_NAME_EXAMPLE_123.JPG</span>. Verify that both files open for viewing on a personal computer. </p><div class="Element63">
<div class="TableDiv">
<table cellspacing="0" class="Table2">
<tr>
<td class="Element65" valign="top" width="55%">
<div class="Element66">
Demonstration Board&nbsp;</div></td><td class="Element65" valign="top" width="23%">
<div class="Element66">
Demonstration Success&nbsp;</div></td><td class="Element65" valign="top" width="22%">
<div class="Element66">
Demonstration Failure&nbsp;</div></td></tr><tr>
<td class="Element67" valign="top" width="55%">
<div class="Element68">
Explorer 16 Development Board&nbsp;</div></td><td class="Element67" valign="top" width="23%">
<div class="Element68">
LED5 (D5)&nbsp;</div></td><td class="Element67" valign="top" width="22%">
<div class="Element68">
LED6 (D6)&nbsp;</div></td></tr><tr>
<td class="Element67" valign="top" width="55%">
<div class="Element68">
PIC32MZ Embedded Connectivity (EC) Starter Kit&nbsp;</div></td><td class="Element67" valign="top" width="23%">
<div class="Element68">
Green LED&nbsp;</div></td><td class="Element67" valign="top" width="22%">
<div class="Element68">
Red LED&nbsp;</div></td></tr></table></div></div>
<p class="Element10">
<strong>About the Demonstration:</strong>&nbsp;</p>
<p class="Element10">
This demonstration shows an example of:</p>
<ul class="Element630">
<li class="Element600">Implementing a FAT File system (FAT16/ FAT32) on a SD card</li>
<li class="Element600">Implementing long file name (LFN)</li>
<li class="Element600">Opening a file for read or write</li>
<li class="Element600">Closing a file</li>
</ul><p class="Element10">
The demonstration opens a file named <span class="Element146">FILE_TOO_LONG_NAME_EXAMPLE_123.JPG</span> on the SD Card, reads the content of the file, creates a directory named <span class="Element146">Dir1</span> and inside the directory, writes the content into another file <span class="Element146">FILE_TOO_LONG_NAME_EXAMPLE_123_1.JPG</span> (creates a copy of one file into another file, inside a directory).&nbsp;</p>
<p class="Element10">
The demonstration application logic is implemented as a state machine in the APP_Tasks function in the file <span class="Element146">main.c</span>.</p>
<ol class="Element630">
<li value="1" class="Element600">The disk is first mounted using the <a href="23902.html">SYS_FS_Mount</a> function. The <span class="Element146">/dev/mmcblka1</span> path instructs the mount command to mount a SD card volume. The volume is mounted against a FAT type file system and mounted at <span class="Element146">/mnt/myDrive/</span>.</li>
<li value="2" class="Element600">If the mount is successful, the volume is unmounted by passing the mount name <span class="Element146">/mnt/myDrive</span> to <a href="23922.html">SYS_FS_Unmount</a> function. This unmounting is done for demonstration purposes only. Real applications do not need to unmount unless it is required for the application.</li>
<li value="3" class="Element600">If the unmount is successful, the mounting process is repeated.</li>
<li value="4" class="Element600">If the mount is successful, the application opens the file <span class="Element146">FILE_TOO_LONG_NAME_EXAMPLE_123.JPG</span> for reading with the <a href="23836.html">SYS_FS_FileOpen</a> function.</li>
<li value="5" class="Element600">If the file open is successful,the application creates a directory named <span class="Element146">Dir1</span>, with the <a href="23761.html">SYS_FS_DirectoryMake</a> function.</li>
<li value="6" class="Element600">If the directory creation is successful, the application opens the file, <span class="Element146">FILE_TOO_LONG_NAME_EXAMPLE_123_1.JPG</span>, inside the directory <span class="Element146">Dir1</span> for writing with the <a href="23836.html">SYS_FS_FileOpen</a> function. The attributes for file write is selected as &quot;SYS_FS_FILE_OPEN_WRITE&quot;. Therefore, if the file does not exist, the file is created.</li>
<li value="7" class="Element600">If the file open is successful, 512 bytes from the file <span class="Element146">FILE_TOO_LONG_NAME_EXAMPLE_123.JPG</span> is read into application buffer using the <a href="23838.html">SYS_FS_FileRead</a> function.</li>
<li value="8" class="Element600">If the file read successful, the 512 bytes is written from the application buffer to the <span class="Element146">FILE_TOO_LONG_NAME_EXAMPLE_123_1.JPG</span> file using the <a href="23848.html">SYS_FS_FileWrite</a> function.</li>
<li value="9" class="Element600">If the write operation is successful, the end of file for <span class="Element146">FILE_TOO_LONG_NAME_EXAMPLE_123.JPG</span> is checked. If the end of file is not reached, the process of reading and writing continues (step 7 and step 8).</li>
<li value="10" class="Element600">Once the end of the file is reached, both files are closed with the <a href="23828.html">SYS_FS_FileClose</a> function.</li>
<li value="11" class="Element600">Finally, a LED indicates the success of the demonstration.</li>
</ol></div>
</div>
</div>
<!-- End Page Content -->

<!-- Begin Page Footer -->
<div class="Element95">
<a href="04300.html">Volume I: Getting Started With MPLAB Harmony Libraries and Applications</a> &gt; <a href="03342.html">Applications Help</a> &gt; <a href="12132.html">File System Demonstrations</a> &gt; <a href="03638.html">Demonstrations</a> &gt; <a href="03648.html">sdcard_fat_single_disk</a> &gt; <a href="03637.html">Running the Demonstration</a></div>
<div class="Element93">
<table width="100%" cellspacing="0" cellpadding="0">
<tr><td width="100%">
<div class="Element3">
 MPLAB Harmony Help</div>
</td></tr><tr><td width="100%">
<div class="Element4">
<a href="contents.htm">Contents</a> | <a href="idx.html">Index</a> | <a href="04300.html">Home</a></div>
</td></tr><tr><td width="100%">
<div class="Element97">
<a href="mailto:docerrors@microchip.com&subject=MPLAB Harmony Documentation Feedback (Topic ID: APPS FS demo_sdcard_fat_single_running Topic Title: Running the Demonstration)&body=Thank you for your feedback! Please include a description of your feedback, and indicate whether you are reporting an an error in the documentation or an enhancement.">Documentation Feedback</a><br> <a href="http://support.microchip.com">Microchip Support</a></div>
</td></tr></table></div>

<!-- End Page Footer -->
</div>
</div>

<!-- End Client Area -->
</body></html>