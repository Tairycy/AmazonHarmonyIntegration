<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
<head>
<title>DRV_I2C_Open Function</title>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <meta name="generator" content="Doc-O-Matic" />
    <meta name="save" content="history" />
    <meta http-equiv="Content-Style-Type" content="text/css" />
    <link rel="STYLESHEET" href="default.css" type="text/css" />

<script type="text/javascript" src="scripts.js"></script>
</head>
<body class="Element700" onload="onBodyLoad();" onmousedown="onBodyMouseDown();">
<div id="persistenceDiv" style="display:none; behavior:url(#default#userData);"></div>

<!-- Begin Popups -->

<!-- End Popups -->

<!-- Begin Page Header -->
<div class="Element710" id="areafixed">
<div class="Element94">
<a href="16811.html">Volume V: MPLAB Harmony Framework Reference</a> &gt; <a href="13069.html">Driver Libraries Help</a> &gt; <a href="13729.html">I2C Driver Library Help</a> &gt; <a href="08587.html">Library Interface</a> &gt; b) Client Setup Functions &gt; <a href="10114.html">DRV_I2C_Open Function</a></div>
<div class="Element92">
<table width="100%" cellspacing="0" cellpadding="0">
<tr><td width="25%">
<div class="Element1">
MPLAB Harmony Help</div>
</td><td width="25%">
<div class="Element2">
<a href="contents.htm">Contents</a> | <a href="idx.html">Index</a> | <a href="04300.html">Home</a></div>
</td><td width="25%">
<div class="Element90">
<a href="10096.html">Previous</a> | <a href="08587.html">Up</a> | <a href="10094.html">Next</a></div>
</td><td width="25%">
<div class="Element96">
<a href="mailto:docerrors@microchip.com&subject=MPLAB Harmony Documentation Feedback (Topic ID: DRV_I2C_Open@SYS_MODULE_INDEX@DRV_IO_INTENT Topic Title: DRV_I2C_Open Function)&body=Thank you for your feedback! Please include a description of your feedback, and indicate whether you are reporting an an error in the documentation or an enhancement.">Documentation Feedback</a><br> <a href="http://support.microchip.com">Microchip Support</a></div>
</td></tr></table><div class="Element5">
DRV_I2C_Open Function</div>
</div>
</div>

<!-- End Page Header -->

<!-- Begin Client Area -->
<div class="Element720" id="areascroll">
<div class="Element721">

<!-- Begin Page Content -->
<div class="Element58">
<a name="43"></a><div class="Element99">
C</div>
<div class="Element101"><div class="Element100"><pre class="Element100"><a href="10088.html">DRV_HANDLE</a> <strong><span style="color: #000000">DRV_I2C_Open</span></strong>(
    <strong><span style="color: #000080">const</span></strong> <a href="23968.html">SYS_MODULE_INDEX</a> <strong><span style="color: #000000">index</span></strong>, 
    <strong><span style="color: #000080">const</span></strong> <a href="10240.html">DRV_IO_INTENT</a> <strong><span style="color: #000000">intent</span></strong>
);</pre></div></div>
<a name="4465736372697074696F6E"></a><div class="Element14">
Description</div>
<div class="Element11">
<div class="Element10">
<p class="Element10">
This function opens the specified instance of the I2C module for use and provides a handle that is required to use the remaining driver routines.&nbsp;</p>
<p class="Element10">
This function opens a specified instance of the I2C module driver for use by any client module and provides an &quot;open-instance&quot; handle that must be provided to any of the other I2C driver operations to identify the caller and the instance of the I2C driver/hardware module.</p></div>
</div>
<a name="507265636F6E646974696F6E73"></a><div class="Element14">
Preconditions</div>
<div class="Element11">
<div class="Element10">
<p class="Element10">
The <a href="10111.html">DRV_I2C_Initialize</a> routine must have been called for the specified I2C device instance and the <a href="10119.html">DRV_I2C_Status</a> must have returned SYS_STATUS_READY.</p></div>
</div>
<a name="506172616D6574657273"></a><div class="Element14">
Parameters</div>
<div class="Element11">
<div class="Element10">
<div class="Element312">
<div class="TableDiv">
<table cellspacing="0" class="Table4">
<tr>
<td class="Element300" valign="top" width="35%">
<div class="Element301">
Parameters&nbsp;</div></td><td class="Element304" valign="top" width="65%">
<div class="Element305">
Description&nbsp;</div></td></tr><tr>
<td class="Element302" valign="top" width="35%">
<div class="Element303">
index&nbsp;</div></td><td class="Element306" valign="top" width="65%">
<div class="Element307">
Index, identifying the instance of the I2C module to be opened.<br>&nbsp;</div></td></tr><tr>
<td class="Element302" valign="top" width="35%">
<div class="Element303">
intent&nbsp;</div></td><td class="Element306" valign="top" width="65%">
<div class="Element307">
Flags parameter identifying the intended usage and behavior of the driver. Multiple flags may be ORed together to specify the intended usage of the device. See the <a href="10240.html">DRV_IO_INTENT</a> definition.&nbsp;</div></td></tr></table></div></div>
</div>
</div>
<a name="52657475726E73"></a><div class="Element14">
Returns</div>
<div class="Element11">
<div class="Element10">
<p class="Element10">
If successful, the routine returns a valid open-instance handle (a value identifying both the caller and the module instance). If an error occurs, the returned value is <a href="10089.html">DRV_HANDLE_INVALID</a>.&nbsp;</p>
<p class="Element10">
If an error occurs, the return value is <a href="10089.html">DRV_HANDLE_INVALID</a>. An error can occur when the following is true:
<ul class="Element635">
<li class="Element605">if the number of client objects allocated via <a href="10112.html">DRV_I2C_INSTANCES_NUMBER</a> is insufficient</li>
<li class="Element605">if the client is trying to open the driver but driver has been opened exclusively by another client</li>
<li class="Element605">if the driver hardware instance being opened is not initialized or is invalid</li>
</ul></p></div>
</div>
<a name="52656D61726B73"></a><div class="Element14">
Remarks</div>
<div class="Element11">
<div class="Element10">
<p class="Element10">
The handle returned is valid until the <a href="10096.html">DRV_I2C_Close</a> routine is called.&nbsp;</p>
<p class="Element10">
This function may block if the driver is running in an OS environment that supports blocking operations and the driver requires system resources access. Regarding the hardware I2C access the operation will behave as instructed by the <a href="10240.html">DRV_IO_INTENT</a> parameter.</p></div>
</div>
<a name="4578616D706C65"></a><div class="Element14">
Example</div>
<div class="Element11">
<div class="Element10">
<div class="Element170">
<a href="#" onclick="CopyElementToClipboard('code00632');">Copy Code</a></div>
<div class="Element13"><div class="Element12" id="code00632"><pre class="Element12"><a href="10088.html">DRV_HANDLE</a>              i2c_handle;

i2c_handle = DRV_I2C_Open(I2C_ID_1, DRV_IO_INTENT_NONBLOCKING|DRV_IO_INTENT_READWRITE);
<strong><span style="color: #000080">if</span></strong> (<a href="10089.html">DRV_HANDLE_INVALID</a> == i2c_handle)
{
    <i><span style="color: #008000">// Handle open error</span></i>
}

<i><span style="color: #008000">// Close the device when it is no longer needed.</span></i>
<a href="10096.html">DRV_I2C_Close</a>(i2c_handle);</pre></div></div>
</div>
</div>
</div>
<!-- End Page Content -->

<!-- Begin Page Footer -->
<div class="Element95">
<a href="16811.html">Volume V: MPLAB Harmony Framework Reference</a> &gt; <a href="13069.html">Driver Libraries Help</a> &gt; <a href="13729.html">I2C Driver Library Help</a> &gt; <a href="08587.html">Library Interface</a> &gt; b) Client Setup Functions &gt; <a href="10114.html">DRV_I2C_Open Function</a></div>
<div class="Element93">
<table width="100%" cellspacing="0" cellpadding="0">
<tr><td width="100%">
<div class="Element3">
 MPLAB Harmony Help</div>
</td></tr><tr><td width="100%">
<div class="Element4">
<a href="contents.htm">Contents</a> | <a href="idx.html">Index</a> | <a href="04300.html">Home</a></div>
</td></tr><tr><td width="100%">
<div class="Element97">
<a href="mailto:docerrors@microchip.com&subject=MPLAB Harmony Documentation Feedback (Topic ID: DRV_I2C_Open@SYS_MODULE_INDEX@DRV_IO_INTENT Topic Title: DRV_I2C_Open Function)&body=Thank you for your feedback! Please include a description of your feedback, and indicate whether you are reporting an an error in the documentation or an enhancement.">Documentation Feedback</a><br> <a href="http://support.microchip.com">Microchip Support</a></div>
</td></tr></table></div>

<!-- End Page Footer -->
</div>
</div>

<!-- End Client Area -->
</body></html>