<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
<head>
<title>Channel Management</title>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <meta name="generator" content="Doc-O-Matic" />
    <meta name="save" content="history" />
    <meta http-equiv="Content-Style-Type" content="text/css" />
    <link rel="STYLESHEET" href="default.css" type="text/css" />

<script type="text/javascript" src="scripts.js"></script>
</head>
<body class="Element700" onload="onBodyLoad();" onmousedown="onBodyMouseDown();">
<div id="persistenceDiv" style="display:none; behavior:url(#default#userData);"></div>

<!-- Begin Popups -->

<!-- End Popups -->

<!-- Begin Page Header -->
<div class="Element710" id="areafixed">
<div class="Element94">
<a href="16811.html">Volume V: MPLAB Harmony Framework Reference</a> &gt; <a href="17367.html">Peripheral Libraries Help</a> &gt; <a href="07978.html">DMA Peripheral Library Help</a> &gt; <a href="17628.html">Using the Library</a> &gt; <a href="17616.html">How the Library Works</a> &gt; <a href="17598.html">Channel Management</a></div>
<div class="Element92">
<table width="100%" cellspacing="0" cellpadding="0">
<tr><td width="25%">
<div class="Element1">
MPLAB Harmony Help</div>
</td><td width="25%">
<div class="Element2">
<a href="contents.htm">Contents</a> | <a href="idx.html">Index</a> | <a href="04300.html">Home</a></div>
</td><td width="25%">
<div class="Element90">
<a href="17621.html">Previous</a> | <a href="17616.html">Up</a> | <a href="17622.html">Next</a></div>
</td><td width="25%">
<div class="Element96">
<a href="mailto:docerrors@microchip.com&subject=MPLAB Harmony Documentation Feedback (Topic ID: PLIB DMA Channel Management Topic Title: Channel Management)&body=Thank you for your feedback! Please include a description of your feedback, and indicate whether you are reporting an an error in the documentation or an enhancement.">Documentation Feedback</a><br> <a href="http://support.microchip.com">Microchip Support</a></div>
</td></tr></table><div class="Element5">
Channel Management</div>
</div>
</div>

<!-- End Page Header -->

<!-- Begin Client Area -->
<div class="Element720" id="areascroll">
<div class="Element721">

<!-- Begin Page Content -->
<div class="Element58">
<a name="4465736372697074696F6E"></a><div class="Element11">
<div class="Element10">
<p class="Element10">
Each Channel in the DMA module is can be independently configured for a specific transaction with different properties.&nbsp;</p>
<p class="Element10">
The following aspects of the channel can be configured using this feature.</p><div class="Element15">
DMA Channel Enable/Disable</div>
<p class="Element10">
Each channel can be enabled or disabled to control the transactions on the channel. A DMA transfer can only occur when the channel is enabled. A DMA channel can be enabled using the <a href="18906.html">PLIB_DMA_ChannelXEnable</a> function. When a channel is disabled by calling the <a href="18903.html">PLIB_DMA_ChannelXDisable</a> function, no data transfers can occur on the channel.</p><div class="Element15">
DMA Channel Priority</div>
<p class="Element10">
The DMA module has a natural priority associated with each of the channels. Channel 0 has the highest priority. Each DMA channel can be assigned priority. This priority scheme changes depending on the device selected. There are three ways in which priorities are assigned in PIC microcontrollers. In the first method, two bits are allocated for each channel for priority. Therefore, priorities 0 to 3 can be assigned to channels. The second is called round-robin. In this method, the module starts by giving Channel 0 preference in any data transfer conflicts. For each successive transfer conflict, the next higher channel receives preference, continuing as a cycle through all the channels. The third method is called fixed scheme, which always gives priority to the lowest requesting channel number. The channel priority can be set using the <a href="18874.html">PLIB_DMA_ChannelPrioritySelect</a> function or the <a href="18933.html">PLIB_DMA_ChannelXPrioritySelect</a> function depending on the device selected.</p><div class="Element15">
DMA Channel Chaining</div>
<p class="Element10">
Channel chaining is an enhancement to the DMA channel operation. A channel (slave channel) can be chained to an adjacent channel (master channel). The slave channel will be enabled when a block transfer of the master channel completes. At this point, any event on the slave channel will initiate a DMA transfer. If the channel has an event pending, a DMA transfer will begin immediately. The channel chaining can be enabled or disabled using the <a href="18889.html">PLIB_DMA_ChannelXChainEnable</a> function and the <a href="18888.html">PLIB_DMA_ChannelXChainDisable</a> function, respectively. The channel chaining higher/lower channel number can be configured using the <a href="18891.html">PLIB_DMA_ChannelXChainToHigher</a> function and the <a href="18892.html">PLIB_DMA_ChannelXChainToLower</a> function.</p><div class="Element15">
DMA Channel Transfer Direction</div>
<p class="Element10">
Each DMA transfer will have a direction. It can be memory to peripheral, peripheral to memory, or memory to memory. This can be set using the <a href="18950.html">PLIB_DMA_ChannelXTransferDirectionSelect</a> function.</p><div class="Element15">
DMA Channel Pattern Data</div>
<p class="Element10">
On supported devices, a DMA transfer can be aborted by a pattern match (refer to <a href="17626.html">Transfer/Abort (Asynchronous) Trigger Management</a>). The pattern data is per channel basis. It can be set using the <a href="18921.html">PLIB_DMA_ChannelXPatternDataSet</a> function.</p><div class="Element15">
Channel Auto Enable</div>
<p class="Element10">
This feature can be used to keep the channel active even if a block transfer or pattern match occurs. This mode is useful for applications that do repeated pattern matching. To enable this feature use the <a href="18879.html">PLIB_DMA_ChannelXAutoEnable</a> function. To disable this feature use the <a href="18878.html">PLIB_DMA_ChannelXAutoDisable</a> function.</p><div class="Element15">
DMA Channel Configuration</div>
<p class="Element10">
The following example configures DMA Channel 3 by setting its priority to two, enabling the auto-enable feature (refer to Channel Management section), enabling the channel chain feature and chaining Channel 3 and Channel 2, and finally enabling Channel 3.&nbsp;</p>
<p class="Element10">
<strong>Example:</strong> &nbsp;</p><div class="Element170">
<a href="#" onclick="CopyElementToClipboard('code01904');">Copy Code</a></div>
<div class="Element13"><div class="Element12" id="code01904"><pre class="Element12"><i><span style="color: #008000">// Disable the channel-3</span></i>
PLIB_DMA_ChannelXDisable ( DMA_ID_0, DMA_CHANNEL_3 );
<i><span style="color: #008000">// set the channel priority to 2</span></i>
PLIB_DMA_ChannelXPrioritySelect  ( DMA_ID_0, DMA_CHANNEL_3, DMA_CHANNEL_PRIORITY_2 );
<i><span style="color: #008000">// Configure the channel auto enable feature</span></i>
PLIB_DMA_ChannelXAutoEnable ( DMA_ID_0, DMA_CHANNEL_3 );
<i><span style="color: #008000">// Enable the channel chain feature</span></i>
PLIB_DMA_ChannelXChainEnable ( DMA_ID_0, DMA_CHANNEL_3 );
<i><span style="color: #008000">// chain channel 3 to channel 2</span></i>
PLIB_DMA_ChannelXChainToLower ( DMA_ID_0, DMA_CHANNEL_3 );
<i><span style="color: #008000">// Enable channel-3</span></i>
PLIB_DMA_ChannelXEnable ( DMA_ID_0, DMA_CHANNEL_3 );</pre></div></div>
<p class="Element10">
In some devices it is required to select the DMA transfer direction before initiating DMA transfer. This can be done using the following code.&nbsp;</p>
<p class="Element10">
<strong>Example:</strong> &nbsp;</p><div class="Element170">
<a href="#" onclick="CopyElementToClipboard('code01905');">Copy Code</a></div>
<div class="Element13"><div class="Element12" id="code01905"><pre class="Element12"><i><span style="color: #008000">// Disable channel-3</span></i>
PLIB_DMA_ChannelXDisable ( DMA_ID_0, DMA_CHANNEL_3 );
<i><span style="color: #008000">// Set the data transfer direction from memory to peripheral</span></i>
PLIB_DMA_ChannelXTransferDirectionSelect ( DMA_ID_0, DMA_CHANNEL_3, DMA_READ_FROM_MEMORY_WRITE_TO_PERIPHERAL );
<i><span style="color: #008000">// we can also check the current channels transfer direction</span></i>
<i><span style="color: #008000">// check the data transfer direction</span></i>
<strong><span style="color: #000080">if</span></strong> ( DMA_READ_FROM_PERIPHERAL_WRITE_TO_MEMORY == PLIB_DMA_ChannelXTransferDirectionGet ( DMA_ID_0, DMA_CHANNEL_3 ) )
{

<i><span style="color: #008000">// application code</span></i>

}</pre></div></div>
</div>
</div>
</div>
<!-- End Page Content -->

<!-- Begin Page Footer -->
<div class="Element95">
<a href="16811.html">Volume V: MPLAB Harmony Framework Reference</a> &gt; <a href="17367.html">Peripheral Libraries Help</a> &gt; <a href="07978.html">DMA Peripheral Library Help</a> &gt; <a href="17628.html">Using the Library</a> &gt; <a href="17616.html">How the Library Works</a> &gt; <a href="17598.html">Channel Management</a></div>
<div class="Element93">
<table width="100%" cellspacing="0" cellpadding="0">
<tr><td width="100%">
<div class="Element3">
 MPLAB Harmony Help</div>
</td></tr><tr><td width="100%">
<div class="Element4">
<a href="contents.htm">Contents</a> | <a href="idx.html">Index</a> | <a href="04300.html">Home</a></div>
</td></tr><tr><td width="100%">
<div class="Element97">
<a href="mailto:docerrors@microchip.com&subject=MPLAB Harmony Documentation Feedback (Topic ID: PLIB DMA Channel Management Topic Title: Channel Management)&body=Thank you for your feedback! Please include a description of your feedback, and indicate whether you are reporting an an error in the documentation or an enhancement.">Documentation Feedback</a><br> <a href="http://support.microchip.com">Microchip Support</a></div>
</td></tr></table></div>

<!-- End Page Footer -->
</div>
</div>

<!-- End Client Area -->
</body></html>