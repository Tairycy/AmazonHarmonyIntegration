<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
<head>
<title>3.1: Isolate Interface From Implementation</title>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <meta name="generator" content="Doc-O-Matic" />
    <meta name="save" content="history" />
    <meta http-equiv="Content-Style-Type" content="text/css" />
    <link rel="STYLESHEET" href="default.css" type="text/css" />

<script type="text/javascript" src="scripts.js"></script>
</head>
<body class="Element700" onload="onBodyLoad();" onmousedown="onBodyMouseDown();">
<div id="persistenceDiv" style="display:none; behavior:url(#default#userData);"></div>

<!-- Begin Popups -->

<!-- End Popups -->

<!-- Begin Page Header -->
<div class="Element710" id="areafixed">
<div class="Element94">
<a href="13064.html">Volume IV: MPLAB Harmony Development</a> &gt; <a href="16808.html">MPLAB Harmony Compatibility Guide</a> &gt; <a href="07096.html">3: Modularity Guidelines</a> &gt; <a href="07093.html">3.1: Isolate Interface From Implementation</a></div>
<div class="Element92">
<table width="100%" cellspacing="0" cellpadding="0">
<tr><td width="25%">
<div class="Element1">
MPLAB Harmony Help</div>
</td><td width="25%">
<div class="Element2">
<a href="contents.htm">Contents</a> | <a href="idx.html">Index</a> | <a href="04300.html">Home</a></div>
</td><td width="25%">
<div class="Element90">
<a href="07096.html">Previous</a> | <a href="07096.html">Up</a> | <a href="07105.html">Next</a></div>
</td><td width="25%">
<div class="Element96">
<a href="mailto:docerrors@microchip.com&subject=MPLAB Harmony Documentation Feedback (Topic ID: COMPGUIDE Isolate Interface From Implementation Topic Title: 3.1: Isolate Interface From Implementation)&body=Thank you for your feedback! Please include a description of your feedback, and indicate whether you are reporting an an error in the documentation or an enhancement.">Documentation Feedback</a><br> <a href="http://support.microchip.com">Microchip Support</a></div>
</td></tr></table><div class="Element5">
3.1: Isolate Interface From Implementation</div>
</div>
</div>

<!-- End Page Header -->

<!-- Begin Client Area -->
<div class="Element720" id="areascroll">
<div class="Element721">

<!-- Begin Page Content -->
<div class="Element58">
<a name="4465736372697074696F6E"></a><div class="Element11">
<div class="Element10">
<p class="Element10">
All MPLAB Harmony modules must have a clearly defined and well-documented &quot;functional&quot; interface. The documented interface should define function prototypes and any necessary data types and macros, but it must not utilize direct access to global data, internal resources or implementation details. Use of C-language functions is preferred (to support binary compatibility), but inline functions and macros are acceptable because they provide source-code compatibility. For example, if a module has internal global variables (as shown in the following example), it is legal to expose the values of these variables through a function, inline function, or macro. However, it is not legal to use direct access to the variables as part of the interface.</p><div class="Element15">
Example (mylib.h): Library Interface Header</div>
<div class="Element170">
<a href="#" onclick="CopyElementToClipboard('code00094');">Copy Code</a></div>
<div class="Element13"><div class="Element12" id="code00094"><pre class="Element12"><i><span style="color: #008000">/*************************** Legal Interfaces *********************/</span></i>

<i><span style="color: #008000">/* Function Access */</span></i>
<strong><span style="color: #000080">int</span></strong> MYLIB_Counter1Get ( <strong><span style="color: #000080">void</span></strong> );

<i><span style="color: #008000">/* Warning!  Do not use counter2 or counter3 variables directly. */</span></i>
<strong><span style="color: #000080">extern</span></strong> <strong><span style="color: #000080">int</span></strong> counter2;
<strong><span style="color: #000080">extern</span></strong> <strong><span style="color: #000080">int</span></strong> counter3;

<i><span style="color: #008000">/* Inline Function Access */</span></i>
<strong><span style="color: #000080">inline</span></strong> <strong><span style="color: #000080">int</span></strong> MYLIB_Counter2Get ( <strong><span style="color: #000080">void</span></strong> )
{
     <strong><span style="color: #000080">return</span></strong> counter2;
}

<i><span style="color: #008000">/* Macro Access */</span></i>
<strong><span style="color: #000080">#define</span></strong> MYLIB_Counter3Get()  counter3;

<i><span style="color: #008000">/**************************** Illegal Interface *********************/</span></i>

<i><span style="color: #008000">/* Direct Global Variable Access */</span></i>
<strong><span style="color: #000080">extern</span></strong> <strong><span style="color: #000080">int</span></strong> counter4;</pre></div></div>
<div class="Element15">
Example (mylib.c): Library Implementation</div>
<div class="Element170">
<a href="#" onclick="CopyElementToClipboard('code00095');">Copy Code</a></div>
<div class="Element13"><div class="Element12" id="code00095"><pre class="Element12"><strong><span style="color: #000080">int</span></strong> counter1;
<strong><span style="color: #000080">int</span></strong> counter2;
<strong><span style="color: #000080">int</span></strong> counter3;
<strong><span style="color: #000080">int</span></strong> counter4;


<strong><span style="color: #000080">int</span></strong> MYLIB_Counter1Get ( <strong><span style="color: #000080">void</span></strong> )
{
    <strong><span style="color: #000080">return</span></strong> counter1;
}</pre></div></div>
<div class="Element15">
Example (myapp.c): Client Implementation</div>
<div class="Element170">
<a href="#" onclick="CopyElementToClipboard('code00096');">Copy Code</a></div>
<div class="Element13"><div class="Element12" id="code00096"><pre class="Element12"><strong><span style="color: #000080">#include</span></strong> &quot;mylib.h&quot;

<strong><span style="color: #000080">int</span></strong> c1, c2, c3, c4;

<i><span style="color: #008000">/***** Legal Interface Use *****/</span></i>

c1 = MYLIB_Counter1Get();
c2 = MYLIB_Counter2Get();
c3 = MYLIB_Counter3Get();

<i><span style="color: #008000">/***** Illegal Interface Use ****/</span></i>

c4 = counter4;</pre></div></div>
<p class="Element10">
Any access that requires the client source code to use function call syntax allows for an implementation that can protect owned resources. Direct global access to owned resources does not allow such protection. </p><div class="Element63">
<div class="TableDiv">
<table cellspacing="0" class="Table0">
<tr>
<td class="Element67" valign="top" width="10%" style="border:none;">
<div class="Element68">
<img src="Note Icon.png" border="0" alt="" title=""> <strong>Note:</strong>&nbsp;</div></td><td class="Element67" valign="top" width="90%" style="border:none;">
<div class="Element68">
The previous examples do not show any sort of protection mechanism. They only show the form of the interface.&nbsp;</div></td></tr></table></div></div>
</div>
</div>
</div>
<!-- End Page Content -->

<!-- Begin Page Footer -->
<div class="Element95">
<a href="13064.html">Volume IV: MPLAB Harmony Development</a> &gt; <a href="16808.html">MPLAB Harmony Compatibility Guide</a> &gt; <a href="07096.html">3: Modularity Guidelines</a> &gt; <a href="07093.html">3.1: Isolate Interface From Implementation</a></div>
<div class="Element93">
<table width="100%" cellspacing="0" cellpadding="0">
<tr><td width="100%">
<div class="Element3">
 MPLAB Harmony Help</div>
</td></tr><tr><td width="100%">
<div class="Element4">
<a href="contents.htm">Contents</a> | <a href="idx.html">Index</a> | <a href="04300.html">Home</a></div>
</td></tr><tr><td width="100%">
<div class="Element97">
<a href="mailto:docerrors@microchip.com&subject=MPLAB Harmony Documentation Feedback (Topic ID: COMPGUIDE Isolate Interface From Implementation Topic Title: 3.1: Isolate Interface From Implementation)&body=Thank you for your feedback! Please include a description of your feedback, and indicate whether you are reporting an an error in the documentation or an enhancement.">Documentation Feedback</a><br> <a href="http://support.microchip.com">Microchip Support</a></div>
</td></tr></table></div>

<!-- End Page Footer -->
</div>
</div>

<!-- End Client Area -->
</body></html>