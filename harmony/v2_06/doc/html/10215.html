<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
<head>
<title>DRV_I2S_Read Function</title>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <meta name="generator" content="Doc-O-Matic" />
    <meta name="save" content="history" />
    <meta http-equiv="Content-Style-Type" content="text/css" />
    <link rel="STYLESHEET" href="default.css" type="text/css" />

<script type="text/javascript" src="scripts.js"></script>
</head>
<body class="Element700" onload="onBodyLoad();" onmousedown="onBodyMouseDown();">
<div id="persistenceDiv" style="display:none; behavior:url(#default#userData);"></div>

<!-- Begin Popups -->

<!-- End Popups -->

<!-- Begin Page Header -->
<div class="Element710" id="areafixed">
<div class="Element94">
<a href="16811.html">Volume V: MPLAB Harmony Framework Reference</a> &gt; <a href="13069.html">Driver Libraries Help</a> &gt; <a href="13740.html">I2S Driver Library Help</a> &gt; <a href="08607.html">Library Interface</a> &gt; c) Data Transfer Functions &gt; <a href="10215.html">DRV_I2S_Read Function</a></div>
<div class="Element92">
<table width="100%" cellspacing="0" cellpadding="0">
<tr><td width="25%">
<div class="Element1">
MPLAB Harmony Help</div>
</td><td width="25%">
<div class="Element2">
<a href="contents.htm">Contents</a> | <a href="idx.html">Index</a> | <a href="04300.html">Home</a></div>
</td><td width="25%">
<div class="Element90">
<a href="10145.html">Previous</a> | <a href="08607.html">Up</a> | <a href="10226.html">Next</a></div>
</td><td width="25%">
<div class="Element96">
<a href="mailto:docerrors@microchip.com&subject=MPLAB Harmony Documentation Feedback (Topic ID: DRV_I2S_Read@DRV_HANDLE@uint8_t *@size_t Topic Title: DRV_I2S_Read Function)&body=Thank you for your feedback! Please include a description of your feedback, and indicate whether you are reporting an an error in the documentation or an enhancement.">Documentation Feedback</a><br> <a href="http://support.microchip.com">Microchip Support</a></div>
</td></tr></table><div class="Element5">
DRV_I2S_Read Function</div>
</div>
</div>

<!-- End Page Header -->

<!-- Begin Client Area -->
<div class="Element720" id="areascroll">
<div class="Element721">

<!-- Begin Page Content -->
<div class="Element58">
<a name="43"></a><div class="Element99">
C</div>
<div class="Element101"><div class="Element100"><pre class="Element100">size_t <strong><span style="color: #000000">DRV_I2S_Read</span></strong>(
    <strong><span style="color: #000080">const</span></strong> <a href="10088.html">DRV_HANDLE</a> <strong><span style="color: #000000">handle</span></strong>, 
    uint8_t * <strong><span style="color: #000000">buffer</span></strong>, 
    <strong><span style="color: #000080">const</span></strong> size_t <strong><span style="color: #000000">numBytes</span></strong>
);</pre></div></div>
<a name="4465736372697074696F6E"></a><div class="Element14">
Description</div>
<div class="Element11">
<div class="Element10">
<p class="Element10">
This routine reads data from the I2S. This function is blocking if the driver was opened by the client for blocking operation. This function will not block if the driver was opened by the client for non blocking operation. If the ioIntent parameter at the time of opening the driver was DRV_IO_INTENT_BLOCKING, this function will only return when (or will block until) numBytes of bytes have been received or if an error occurred.&nbsp;</p>
<p class="Element10">
If the ioIntent parameter at the time of opening the driver was DRV_IO_INTENT_NON_BLOCKING, this function will return with the number of bytes that were actually read. The function will not wait until numBytes of bytes have been read.</p></div>
</div>
<a name="507265636F6E646974696F6E73"></a><div class="Element14">
Preconditions</div>
<div class="Element11">
<div class="Element10">
<p class="Element10">
The <a href="10181.html">DRV_I2S_Initialize</a> routine must have been called for the specified I2S driver instance.&nbsp;</p>
<p class="Element10">
<a href="10212.html">DRV_I2S_Open</a> must have been called to obtain a valid opened device handle.&nbsp;</p>
<p class="Element10">
DRV_IO_INTENT_READ or DRV_IO_INTENT_READWRITE must have been specified in the <a href="10212.html">DRV_I2S_Open</a> call.</p></div>
</div>
<a name="506172616D6574657273"></a><div class="Element14">
Parameters</div>
<div class="Element11">
<div class="Element10">
<div class="Element312">
<div class="TableDiv">
<table cellspacing="0" class="Table4">
<tr>
<td class="Element300" valign="top" width="35%">
<div class="Element301">
Parameters&nbsp;</div></td><td class="Element304" valign="top" width="65%">
<div class="Element305">
Description&nbsp;</div></td></tr><tr>
<td class="Element302" valign="top" width="35%">
<div class="Element303">
handle&nbsp;</div></td><td class="Element306" valign="top" width="65%">
<div class="Element307">
A valid open-instance handle, returned from the driver's open routine<br>&nbsp;</div></td></tr><tr>
<td class="Element302" valign="top" width="35%">
<div class="Element303">
buffer&nbsp;</div></td><td class="Element306" valign="top" width="65%">
<div class="Element307">
Buffer into which the data read from the I2S instance will be placed.<br>&nbsp;</div></td></tr><tr>
<td class="Element302" valign="top" width="35%">
<div class="Element303">
numBytes&nbsp;</div></td><td class="Element306" valign="top" width="65%">
<div class="Element307">
Total number of bytes that need to be read from the module instance (must be equal to or less than the size of the buffer)&nbsp;</div></td></tr></table></div></div>
</div>
</div>
<a name="52657475726E73"></a><div class="Element14">
Returns</div>
<div class="Element11">
<div class="Element10">
<p class="Element10">
Number of bytes actually copied into the caller's buffer. Returns <a href="10216.html">DRV_I2S_READ_ERROR</a> in case of an error.</p></div>
</div>
<a name="52656D61726B73"></a><div class="Element14">
Remarks</div>
<div class="Element11">
<div class="Element10">
<p class="Element10">
This function is thread safe in a RTOS application. It is recommended that this function not be called in I2S Driver Event Handler due to the potential blocking nature of the function. This function should not be called directly in an ISR. It should not be called in the event handler associated with another I2S driver instance.&nbsp;</p>
<p class="Element10">
This function does not supports DMA mode of operation.</p></div>
</div>
<a name="4578616D706C65"></a><div class="Element14">
Example</div>
<div class="Element11">
<div class="Element10">
<div class="Element170">
<a href="#" onclick="CopyElementToClipboard('code00663');">Copy Code</a></div>
<div class="Element13"><div class="Element12" id="code00663"><pre class="Element12"><a href="10088.html">DRV_HANDLE</a>      myI2SHandle;    <i><span style="color: #008000">// Returned from DRV_I2S_Open</span></i>
<strong><span style="color: #000080">char</span></strong>            myBuffer[MY_BUFFER_SIZE];
<strong><span style="color: #000080">unsigned</span></strong> <strong><span style="color: #000080">int</span></strong>    count;
<strong><span style="color: #000080">unsigned</span></strong> <strong><span style="color: #000080">int</span></strong>    total;

total = 0;
<strong><span style="color: #000080">do</span></strong>
{
    count  = DRV_I2S_Read(myI2SHandle, &amp;myBuffer[total],
                            MY_BUFFER_SIZE - total);
    total += count;
    <strong><span style="color: #000080">if</span></strong>(count == <a href="10216.html">DRV_I2S_READ_ERROR</a>)
    {
        <i><span style="color: #008000">// Handle error ...</span></i>
    }
    <strong><span style="color: #000080">else</span></strong>
    {
        <i><span style="color: #008000">// Do what needs to be..</span></i>
    }
} <strong><span style="color: #000080">while</span></strong>( total &lt; MY_BUFFER_SIZE );</pre></div></div>
</div>
</div>
</div>
<!-- End Page Content -->

<!-- Begin Page Footer -->
<div class="Element95">
<a href="16811.html">Volume V: MPLAB Harmony Framework Reference</a> &gt; <a href="13069.html">Driver Libraries Help</a> &gt; <a href="13740.html">I2S Driver Library Help</a> &gt; <a href="08607.html">Library Interface</a> &gt; c) Data Transfer Functions &gt; <a href="10215.html">DRV_I2S_Read Function</a></div>
<div class="Element93">
<table width="100%" cellspacing="0" cellpadding="0">
<tr><td width="100%">
<div class="Element3">
 MPLAB Harmony Help</div>
</td></tr><tr><td width="100%">
<div class="Element4">
<a href="contents.htm">Contents</a> | <a href="idx.html">Index</a> | <a href="04300.html">Home</a></div>
</td></tr><tr><td width="100%">
<div class="Element97">
<a href="mailto:docerrors@microchip.com&subject=MPLAB Harmony Documentation Feedback (Topic ID: DRV_I2S_Read@DRV_HANDLE@uint8_t *@size_t Topic Title: DRV_I2S_Read Function)&body=Thank you for your feedback! Please include a description of your feedback, and indicate whether you are reporting an an error in the documentation or an enhancement.">Documentation Feedback</a><br> <a href="http://support.microchip.com">Microchip Support</a></div>
</td></tr></table></div>

<!-- End Page Footer -->
</div>
</div>

<!-- End Client Area -->
</body></html>