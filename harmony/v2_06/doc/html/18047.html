<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
<head>
<title>XIP Mode</title>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <meta name="generator" content="Doc-O-Matic" />
    <meta name="save" content="history" />
    <meta http-equiv="Content-Style-Type" content="text/css" />
    <link rel="STYLESHEET" href="default.css" type="text/css" />

<script type="text/javascript" src="scripts.js"></script>
</head>
<body class="Element700" onload="onBodyLoad();" onmousedown="onBodyMouseDown();">
<div id="persistenceDiv" style="display:none; behavior:url(#default#userData);"></div>

<!-- Begin Popups -->

<!-- End Popups -->

<!-- Begin Page Header -->
<div class="Element710" id="areafixed">
<div class="Element94">
<a href="16811.html">Volume V: MPLAB Harmony Framework Reference</a> &gt; <a href="17367.html">Peripheral Libraries Help</a> &gt; <a href="23263.html">SQI Peripheral Library</a> &gt; <a href="18045.html">Using the Library</a> &gt; <a href="18036.html">How the Library Works</a> &gt; <a href="18027.html">Core Functionality</a> &gt; <a href="18047.html">XIP Mode</a></div>
<div class="Element92">
<table width="100%" cellspacing="0" cellpadding="0">
<tr><td width="25%">
<div class="Element1">
MPLAB Harmony Help</div>
</td><td width="25%">
<div class="Element2">
<a href="contents.htm">Contents</a> | <a href="idx.html">Index</a> | <a href="04300.html">Home</a></div>
</td><td width="25%">
<div class="Element90">
<a href="18027.html">Previous</a> | <a href="18027.html">Up</a> | <a href="18032.html">Next</a></div>
</td><td width="25%">
<div class="Element96">
<a href="mailto:docerrors@microchip.com&subject=MPLAB Harmony Documentation Feedback (Topic ID: PLIB SQI XIP Mode Topic Title: XIP Mode)&body=Thank you for your feedback! Please include a description of your feedback, and indicate whether you are reporting an an error in the documentation or an enhancement.">Documentation Feedback</a><br> <a href="http://support.microchip.com">Microchip Support</a></div>
</td></tr></table><div class="Element5">
XIP Mode</div>
</div>
</div>

<!-- End Page Header -->

<!-- Begin Client Area -->
<div class="Element720" id="areascroll">
<div class="Element721">

<!-- Begin Page Content -->
<div class="Element58">
<a name="4465736372697074696F6E"></a><div class="Element11">
<div class="Element10">
<p class="Element10">
XIP (eXecute-In-Place) mode is mostly used to execute the code out of the attached serial Flash device. However, this mode can also be used to transfer data as deemed necessary. In order for SQI to operate in XIP mode, host processor would have to set up the two SFRs dedicated to the XIP mode in addition to SQI configuration and clock control SFRs. Please refer to the specific data sheet and family reference manual for the configuration details.&nbsp;</p>
<p class="Element10">
Please note that all the XIP configuration values depend on the parameters of the interfaced serial Flash memory device. In XIP mode, reading values of any other SFRs return the contents of the serial Flash device, the way it is mapped.&nbsp;</p>
<p class="Element10">
The following figure shows the XIP mode software flow. </p><p class="Element10" style="text-align: center;">
<img src="xip_mode_flow.png" border="0" alt="" title=""></p><div class="Element63">
<div class="TableDiv">
<table cellspacing="0" class="Table0">
<tr>
<td class="Element67" valign="top" width="10%" style="border:none;">
<div class="Element68">
<img src="Note Icon.png" border="0" alt="" title=""><strong> Notes:</strong>&nbsp;</div></td><td class="Element67" valign="top" width="90%" style="border:none;">
<div class="Element68">

<ol class="Element630">
<li value="1" class="Element600">This step configures the SQI configuration fields, SQIEN, CSEN, and DATAEN, with the exception of MODE&lt;1:0&gt;.</li>
<li value="2" class="Element600">There are two XIP control registers: SQI1XCON1 and SQI1XCON2.</li>
</ol>&nbsp;</div></td></tr></table></div></div>
<p class="Element10">
<strong>Example:</strong> </p><div class="Element170">
<a href="#" onclick="CopyElementToClipboard('code03340');">Copy Code</a></div>
<div class="Element13"><div class="Element12" id="code03340"><pre class="Element12"><i><span style="color: #008000">// Example is written to access SST26VF032 Flash device</span></i>
<i><span style="color: #008000">// Example assumes the Flash Device is connected to Chip Select 0</span></i>

<i><span style="color: #008000">//Global defines</span></i>
<strong><span style="color: #000080">#define</span></strong> SST26VF_HS_READ    0x0B
<strong><span style="color: #000080">#define</span></strong> SST26VF_MODE_CODE  0x0
<strong><span style="color: #000080">#define</span></strong> SST26VF_MODE_BYTES 0x0

<i><span style="color: #008000">// Set up SQI Configuration Bits</span></i>
PLIB_SQI_Enable(SQI_ID_1);
PLIB_SQI_CSOutputEnableSelect(SQI_ID_1, SQI_CS_OEN_0);
PLIB_SQI_DataOutputEnableSelect(SQI_ID_1, SQI_DATA_OEN_QUAD);

<i><span style="color: #008000">// Disable All Interrupts</span></i>
PLIB_SQI_InterruptDisable(SQI_ID_1, SQI_ALL_INT);
PLIB_SQI_InterruptSignalDisable(SQI_ID_1, SQI_ALL_INT);

<i><span style="color: #008000">// Set up SQI Transfer Clock</span></i>
PLIB_SQI_ClockDividerSet(SQI_ID_1,CLK_DIV_1);
PLIB_SQI_ClockEnable(SQI_ID_1);
<strong><span style="color: #000080">while</span></strong> (!PLIB_SQI_ClockIsStable(SQI_ID_1));

<i><span style="color: #008000">// Configure XIP Control 1 SFR</span></i>
PLIB_SQI_XIPControlWord1Set (SQI_ID_1,
                             SQI_LANE_QUAD,
                             SQI_LANE_QUAD,
                             SQI_LANE_QUAD,
                             SQI_LANE_QUAD,
                             SQI_LANE_QUAD,
                             SST26VF_HS_READ,
                             ADDR_BYTES_3,
                             DUMMY_BYTES_2
                            );

<i><span style="color: #008000">// Configure XIP Control 2 SFR</span></i>
PLIB_SQI_XIPControlWord2Set (SQI_ID_1,
                             SST26VF_MODE_CODE,
                             MODE_BYTES_0,
                             SQI_CS_0
                            );

<i><span style="color: #008000">// Set Transfer Mode to XIP</span></i>
PLIB_SQI_TransferModeSet(SQI_ID_1, SQI_XFER_MODE_XIP);

<i><span style="color: #008000">// The SQI is now in XIP mode and should start fetching the code</span></i></pre></div></div>
</div>
</div>
</div>
<!-- End Page Content -->

<!-- Begin Page Footer -->
<div class="Element95">
<a href="16811.html">Volume V: MPLAB Harmony Framework Reference</a> &gt; <a href="17367.html">Peripheral Libraries Help</a> &gt; <a href="23263.html">SQI Peripheral Library</a> &gt; <a href="18045.html">Using the Library</a> &gt; <a href="18036.html">How the Library Works</a> &gt; <a href="18027.html">Core Functionality</a> &gt; <a href="18047.html">XIP Mode</a></div>
<div class="Element93">
<table width="100%" cellspacing="0" cellpadding="0">
<tr><td width="100%">
<div class="Element3">
 MPLAB Harmony Help</div>
</td></tr><tr><td width="100%">
<div class="Element4">
<a href="contents.htm">Contents</a> | <a href="idx.html">Index</a> | <a href="04300.html">Home</a></div>
</td></tr><tr><td width="100%">
<div class="Element97">
<a href="mailto:docerrors@microchip.com&subject=MPLAB Harmony Documentation Feedback (Topic ID: PLIB SQI XIP Mode Topic Title: XIP Mode)&body=Thank you for your feedback! Please include a description of your feedback, and indicate whether you are reporting an an error in the documentation or an enhancement.">Documentation Feedback</a><br> <a href="http://support.microchip.com">Microchip Support</a></div>
</td></tr></table></div>

<!-- End Page Footer -->
</div>
</div>

<!-- End Client Area -->
</body></html>